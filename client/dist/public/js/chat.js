(()=>{"use strict";var t={d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Decoder:()=>ot,Encoder:()=>rt,PacketType:()=>it,protocol:()=>nt});const s=Object.create(null);s.open="0",s.close="1",s.ping="2",s.pong="3",s.message="4",s.upgrade="5",s.noop="6";const n=Object.create(null);Object.keys(s).forEach((t=>{n[s[t]]=t}));const i={type:"error",data:"parser error"},r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,a=(t,e)=>{const s=new FileReader;return s.onload=function(){const t=s.result.split(",")[1];e("b"+t)},s.readAsDataURL(t)},c=({type:t,data:e},n,i)=>{return r&&e instanceof Blob?n?i(e):a(e,i):o&&(e instanceof ArrayBuffer||(c=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?n?i(e):a(new Blob([e]),i):i(s[t]+(e||""));var c},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<h.length;t++)p[h.charCodeAt(t)]=t;const u="function"==typeof ArrayBuffer,l=(t,e)=>{if(u){const s=(t=>{let e,s,n,i,r,o=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);const h=new ArrayBuffer(o),u=new Uint8Array(h);for(e=0;e<a;e+=4)s=p[t.charCodeAt(e)],n=p[t.charCodeAt(e+1)],i=p[t.charCodeAt(e+2)],r=p[t.charCodeAt(e+3)],u[c++]=s<<2|n>>4,u[c++]=(15&n)<<4|i>>2,u[c++]=(3&i)<<6|63&r;return h})(t);return d(s,e)}return{base64:!0,data:t}},d=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t,f=(t,e)=>{if("string"!=typeof t)return{type:"message",data:d(t,e)};const s=t.charAt(0);return"b"===s?{type:"message",data:l(t.substring(1),e)}:n[s]?t.length>1?{type:n[s],data:t.substring(1)}:{type:n[s]}:i},y=String.fromCharCode(30);function m(t){if(t)return function(t){for(var e in m.prototype)t[e]=m.prototype[e];return t}(t)}m.prototype.on=m.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},m.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},m.prototype.off=m.prototype.removeListener=m.prototype.removeAllListeners=m.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<n.length;i++)if((s=n[i])===e||s.fn===e){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},m.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){n=0;for(var i=(s=s.slice(0)).length;n<i;++n)s[n].apply(this,e)}return this},m.prototype.emitReserved=m.prototype.emit,m.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},m.prototype.hasListeners=function(t){return!!this.listeners(t).length};const g="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function b(t,...e){return e.reduce(((e,s)=>(t.hasOwnProperty(s)&&(e[s]=t[s]),e)),{})}const v=setTimeout,w=clearTimeout;function k(t,e){e.useNativeTimers?(t.setTimeoutFn=v.bind(g),t.clearTimeoutFn=w.bind(g)):(t.setTimeoutFn=setTimeout.bind(g),t.clearTimeoutFn=clearTimeout.bind(g))}class _ extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class A extends m{constructor(t){super(),this.writable=!1,k(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,s){return super.emitReserved("error",new _(t,e,s)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=f(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const E="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),O={};let R,T=0,C=0;function B(t){let e="";do{e=E[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function S(){const t=B(+new Date);return t!==R?(T=0,R=t):t+"."+B(T++)}for(;C<64;C++)O[E[C]]=C;function x(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}let N=!1;try{N="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const L=N;function P(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||L))return new XMLHttpRequest}catch(t){}if(!e)try{return new(g[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function j(){}const q=null!=new P({xdomain:!1}).responseType;class I extends m{constructor(t,e){super(),k(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=b(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new P(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=I.requestsCount++,I.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=j,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete I.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}function D(){for(let t in I.requests)I.requests.hasOwnProperty(t)&&I.requests[t].abort()}I.requestsCount=0,I.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",D):"function"==typeof addEventListener&&addEventListener("onpagehide"in g?"pagehide":"unload",D,!1));const M="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),F=g.WebSocket||g.MozWebSocket,U="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),V={websocket:class extends A{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,s=U?{}:b(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=U?new F(t,e,s):e?new F(t,e):new F(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],n=e===t.length-1;c(s,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}n&&M((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=S()),this.supportsBinary||(t.b64=1);const n=x(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}check(){return!!F}},polling:class extends A{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let s=location.port;s||(s=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||s!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=q&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const s=t.split(y),n=[];for(let t=0;t<s.length;t++){const i=f(s[t],e);if(n.push(i),"error"===i.type)break}return n})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const s=t.length,n=new Array(s);let i=0;t.forEach(((t,r)=>{c(t,!1,(t=>{n[r]=t,++i===s&&e(n.join(y))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let s="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=S()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(s=":"+this.opts.port);const n=x(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new I(this.uri(),t)}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},H=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,K=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Y(t){const e=t,s=t.indexOf("["),n=t.indexOf("]");-1!=s&&-1!=n&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let i=H.exec(t||""),r={},o=14;for(;o--;)r[K[o]]=i[o]||"";return-1!=s&&-1!=n&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(t,e){const s=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1),"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1),s}(0,r.path),r.queryKey=function(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(s[e]=n)})),s}(0,r.query),r}class z extends m{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=Y(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Y(e.host).host),k(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},s=t.split("&");for(let t=0,n=s.length;t<n;t++){let n=s[t].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new V[t](s)}open(){let t;if(this.opts.rememberUpgrade&&z.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),s=!1;z.priorWebsocketSuccess=!1;const n=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!s)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;z.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{s||"closed"!==this.readyState&&(h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function i(){s||(s=!0,h(),e.close(),e=null)}const r=t=>{const s=new Error("probe error: "+t);s.transport=e.name,i(),this.emitReserved("upgradeError",s)};function o(){r("transport closed")}function a(){r("socket closed")}function c(t){e&&t.name!==e.name&&i()}const h=()=>{e.removeListener("open",n),e.removeListener("error",r),e.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};e.once("open",n),e.once("error",r),e.once("close",o),this.once("close",a),this.once("upgrading",c),e.open()}onOpen(){if(this.readyState="open",z.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const n=this.writeBuffer[s].data;if(n&&(t+="string"==typeof(e=n)?function(t){let e=0,s=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}(e):Math.ceil(1.33*(e.byteLength||e.size))),s>0&&t>this.maxPayload)return this.writeBuffer.slice(0,s);t+=2}var e;return this.writeBuffer}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof s&&(n=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const i={type:t,data:e,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?s():t()})):this.upgrading?s():t()),this}onError(t){z.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let s=0;const n=t.length;for(;s<n;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}z.protocol=4,z.protocol;const W="function"==typeof ArrayBuffer,$=Object.prototype.toString,J="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===$.call(Blob),X="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===$.call(File);function G(t){return W&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||J&&t instanceof Blob||X&&t instanceof File}function Q(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,s=t.length;e<s;e++)if(Q(t[e]))return!0;return!1}if(G(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return Q(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&Q(t[e]))return!0;return!1}function Z(t){const e=[],s=t.data,n=t;return n.data=tt(s,e),n.attachments=e.length,{packet:n,buffers:e}}function tt(t,e){if(!t)return t;if(G(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=tt(t[n],e);return s}if("object"==typeof t&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=tt(t[n],e));return s}return t}function et(t,e){return t.data=st(t.data,e),t.attachments=void 0,t}function st(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=st(t[s],e);else if("object"==typeof t)for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=st(t[s],e));return t}const nt=5;var it;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(it||(it={}));class rt{constructor(t){this.replacer=t}encode(t){return t.type!==it.EVENT&&t.type!==it.ACK||!Q(t)?[this.encodeAsString(t)]:(t.type=t.type===it.EVENT?it.BINARY_EVENT:it.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==it.BINARY_EVENT&&t.type!==it.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=Z(t),s=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(s),n}}class ot extends m{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===it.BINARY_EVENT||e.type===it.BINARY_ACK?(this.reconstructor=new at(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!G(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(void 0===it[s.type])throw new Error("unknown packet type "+s.type);if(s.type===it.BINARY_EVENT||s.type===it.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const i=t.substring(n,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");s.attachments=Number(i)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);s.nsp=t.substring(n,e)}else s.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;for(;++e;){const s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}s.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=this.tryParse(t.substr(e));if(!ot.isPayloadValid(s.type,n))throw new Error("invalid payload");s.data=n}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case it.CONNECT:return"object"==typeof e;case it.DISCONNECT:return void 0===e;case it.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case it.EVENT:case it.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case it.ACK:case it.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class at{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=et(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ct(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const ht=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class pt extends m{constructor(t,e,s){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ct(t,"open",this.onopen.bind(this)),ct(t,"packet",this.onpacket.bind(this)),ct(t,"error",this.onerror.bind(this)),ct(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(ht.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const s={type:it.EVENT,data:e,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,n=e.pop();this._registerAckCallback(t,n),s.id=t}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,e){const s=this.flags.timeout;if(void 0===s)return void(this.acks[t]=e);const n=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),s);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:it.CONNECT,data:t})})):this.packet({type:it.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case it.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case it.EVENT:case it.BINARY_EVENT:this.onevent(t);break;case it.ACK:case it.BINARY_ACK:this.onack(t);break;case it.DISCONNECT:this.ondisconnect();break;case it.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let s=!1;return function(...n){s||(s=!0,e.packet({type:it.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:it.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e)s.apply(this,t.data)}}}function ut(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ut.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-s:t+s}return 0|Math.min(t,this.max)},ut.prototype.reset=function(){this.attempts=0},ut.prototype.setMin=function(t){this.ms=t},ut.prototype.setMax=function(t){this.max=t},ut.prototype.setJitter=function(t){this.jitter=t};class lt extends m{constructor(t,s){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(s=t,t=void 0),(s=s||{}).path=s.path||"/socket.io",this.opts=s,k(this,s),this.reconnection(!1!==s.reconnection),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=s.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new ut({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==s.timeout?2e4:s.timeout),this._readyState="closed",this.uri=t;const i=s.parser||e;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==s.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new z(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const n=ct(e,"open",(function(){s.onopen(),t&&t()})),i=ct(e,"error",(e=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",e),t?t(e):s.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&n();const s=this.setTimeoutFn((()=>{n(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(n),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ct(t,"ping",this.onping.bind(this)),ct(t,"data",this.ondata.bind(this)),ct(t,"error",this.onerror.bind(this)),ct(t,"close",this.onclose.bind(this)),ct(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s||(s=new pt(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const dt={};function ft(t,e){"object"==typeof t&&(e=t,t=void 0);const s=function(t,e="",s){let n=t;s=s||"undefined"!=typeof location&&location,null==t&&(t=s.protocol+"//"+s.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==s?s.protocol+"//"+t:"https://"+t),n=Y(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(s&&s.port===n.port?"":":"+n.port),n}(t,(e=e||{}).path||"/socket.io"),n=s.source,i=s.id,r=s.path,o=dt[i]&&r in dt[i].nsps;let a;return e.forceNew||e["force new connection"]||!1===e.multiplex||o?a=new lt(n,e):(dt[i]||(dt[i]=new lt(n,e)),a=dt[i]),s.query&&!e.query&&(e.query=s.queryKey),a.socket(s.path,e)}function yt(t,e={}){const s=document.createElement(t);for(const t in e)s.setAttribute(t,e[t]);return s}function mt(t){const e=Math.random().toString(10);return Array.isArray(t)&&0!=t.length&&t.some((t=>t.getAttribute("data-tid")===e))?mt(t):e}Object.assign(ft,{Manager:lt,Socket:pt,io:ft,connect:ft});class gt{constructor(t){const{_id:e,tid:s,createdAt:n,msg:i}=t;e&&(this._id=e),s&&(this.tid=s),n instanceof Date?this.createdAt=n:this.createdAt=new Date,this.msg=i}}function bt(t){const{msg:e,createdAt:s,_id:n,tid:i,own:r}=t,o=yt("li",{"data-id":n||"","data-tid":i||""}),a=yt("span",{class:"time"});a.innerText=function(t){return new Date(t).toTimeString().substr(0,5)}(s);const c=document.createElement("span");return c.innerText=e,o.prepend(a,c),r?(o.append(function(){const t=yt("select",{class:"messageItem_select",name:"messageItemSelect"});return["*","delete","update"].forEach((e=>{const s=yt("option",{value:e});s.innerText=e.charAt(0).toUpperCase()+e.slice(1),t.append(s)})),t}()),o):o}function vt(t,e,s="append"){return"prepend"===s?e.prepend(t):e.append(t)}const wt=document.getElementById("messages");async function kt(t,e,s){const n=t+"/"+e.toString(10)+"/"+s.toString(10);(await fetch(n).then((t=>t.json()))).forEach((t=>vt(bt(t),wt,"prepend")))}const _t=document.querySelector("form"),At=document.getElementById("messages"),Et=At.children,Ot=document.getElementById("m"),Rt=document.querySelector("button#wantMore"),Tt="http://localhost:3000";(async function(){const t=ft();await async function(t){return await kt("http://localhost:3000/messages",0,10)}(),Rt.click((()=>{const t=parseInt(At.children.length);kt(`${Tt}/messages`,t,t+10)})),_t.onsubmit=function(e){e.preventDefault();const s=Ot.value;if(!s)return;Ot.value="";const n=new gt({msg:s,tid:mt(Et)}),i=bt({...n,own:!0});At.append(i),this.scrollTo(0,this.scrollHeight),t.emit("save",{msg:n.msg,tid:n.tid}),i.querySelector(".messageItem_select").onchange=function(){let e=this.parentElement;const s=e.getAttribute("data-id");"delete"===this.value?(t.emit("delete",s),t.on("deleted",(t=>{const s=document.createElement("em");s.innerText="Message was deleted. It will dissapear in 5 seconds.",e.append(s);const n=Et.slice(-50).querySelector(`[data-id='${t}']`);setTimeout((()=>n.remove()),1e3)}))):console.log("nothing yet")}},t.on("saved",(({_id:t,tid:e})=>{for(let s=Et.length-1;s>Et.length-200&&s>0;s--)if(Et[s].getAttribute("data-tid")===e){Et[s].setAttribute("data-id",t),Et[s].removeAttribute("data-tid");break}})),t.on("new",(t=>{vt(bt(t)),_t.scrollTo(0,_t.scrollHeight)}))})().catch((t=>console.log(t)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RzFkLEtBQUsyZCxjQUd0QnphLEVBQU9yQyxLQUFLLE9BQVEsQ0FBRXlOLElBQUtrUCxFQUFPbFAsSUFBS3VNLElBQUsyQyxFQUFPM0MsTUFHbEM0QyxFQUFHWCxjQUFjLHVCQUN2QmMsU0FBVyxXQUVsQixJQUFJSCxFQUFLemQsS0FBSzZkLGNBQ2QsTUFBTTNDLEVBQU11QyxFQUFHekMsYUFBYSxXQUNULFdBQWZoYixLQUFLM0QsT0FDTDZHLEVBQU9yQyxLQUFLLFNBQVVxYSxHQUN0QmhZLEVBQU90RCxHQUFHLFdBQVlzYixJQUNsQixNQUFNNEMsRUFBS25YLFNBQVM4VCxjQUFjLE1BQ2xDcUQsRUFBR3RDLFVBQ0MsdURBQ0ppQyxFQUFHNUIsT0FBT2lDLEdBQ1YsTUFDTUMsRUFEVWhCLEdBQVMvYixPQUFPLElBQ1A4YixjQUNyQixhQUFhNUIsT0FFakJwWixZQUFXLElBQU1pYyxFQUFTQyxVQUFVLFNBR3hDQyxRQUFRQyxJQUFJLGlCQU14QmhiLEVBQU90RCxHQUFHLFNBQVMsRUFBR3NiLElBQUFBLEVBQUtMLElBQUFBLE1BQ3ZCLElBQ0ksSUFBSTNjLEVBQUk2ZSxHQUFTNWUsT0FBUyxFQUMxQkQsRUFBSTZlLEdBQVM1ZSxPQUFTLEtBQU9ELEVBQUksRUFDakNBLElBRUEsR0FBSTZlLEdBQVM3ZSxHQUFHOGMsYUFBYSxjQUFnQkgsRUFBSyxDQUM5Q2tDLEdBQVM3ZSxHQUFHd2MsYUFBYSxVQUFXUSxHQUNwQzZCLEdBQVM3ZSxHQUFHaWdCLGdCQUFnQixZQUM1QixVQU1aamIsRUFBT3RELEdBQUcsT0FBUS9DLElBQ2RxZixHQUFVZCxHQUFVdmUsSUFDcEIsR0FBSzZnQixTQUFTLEVBQUcsR0FBS0Msa0JBSTlCUyxHQUFPQyxPQUFPbFosR0FBTThZLFFBQVFDLElBQUkvWSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tcGFyc2VyL2J1aWxkL2VzbS9jb21tb25zLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1wYXJzZXIvYnVpbGQvZXNtL2VuY29kZVBhY2tldC5icm93c2VyLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1wYXJzZXIvYnVpbGQvZXNtL2NvbnRyaWIvYmFzZTY0LWFycmF5YnVmZmVyLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1wYXJzZXIvYnVpbGQvZXNtL2RlY29kZVBhY2tldC5icm93c2VyLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1wYXJzZXIvYnVpbGQvZXNtL2luZGV4LmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL0Bzb2NrZXQuaW8vY29tcG9uZW50LWVtaXR0ZXIvaW5kZXgubWpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL2dsb2JhbFRoaXMuYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS91dGlsLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL3RyYW5zcG9ydC5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS9jb250cmliL3llYXN0LmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL2NvbnRyaWIvcGFyc2Vxcy5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS9jb250cmliL2hhcy1jb3JzLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL3RyYW5zcG9ydHMveG1saHR0cHJlcXVlc3QuYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS90cmFuc3BvcnRzL3BvbGxpbmcuanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9idWlsZC9lc20vdHJhbnNwb3J0cy93ZWJzb2NrZXQtY29uc3RydWN0b3IuYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS90cmFuc3BvcnRzL3dlYnNvY2tldC5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9lbmdpbmUuaW8tY2xpZW50L2J1aWxkL2VzbS90cmFuc3BvcnRzL2luZGV4LmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL2NvbnRyaWIvcGFyc2V1cmkuanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9ub2RlX21vZHVsZXMvZW5naW5lLmlvLWNsaWVudC9idWlsZC9lc20vc29ja2V0LmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL2VuZ2luZS5pby1jbGllbnQvYnVpbGQvZXNtL2luZGV4LmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1wYXJzZXIvYnVpbGQvZXNtL2lzLWJpbmFyeS5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL25vZGVfbW9kdWxlcy9zb2NrZXQuaW8tcGFyc2VyL2J1aWxkL2VzbS9iaW5hcnkuanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLXBhcnNlci9idWlsZC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9lc20vb24uanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9lc20vc29ja2V0LmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvZXNtL2NvbnRyaWIvYmFja28yLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vbm9kZV9tb2R1bGVzL3NvY2tldC5pby1jbGllbnQvYnVpbGQvZXNtL21hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9ub2RlX21vZHVsZXMvc29ja2V0LmlvLWNsaWVudC9idWlsZC9lc20vdXJsLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vc3JjL3B1YmxpYy9qcy91dGlscy5qcyIsIndlYnBhY2s6Ly9DaGF0IEFwcCBDbGllbnQgU2lkZS8uL3NyYy9wdWJsaWMvanMvYnVpbGRNc2cuanMiLCJ3ZWJwYWNrOi8vQ2hhdCBBcHAgQ2xpZW50IFNpZGUvLi9zcmMvcHVibGljL2pzL2ZldGNoLmpzIiwid2VicGFjazovL0NoYXQgQXBwIENsaWVudCBTaWRlLy4vc3JjL3B1YmxpYy9qcy9jaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiY29uc3QgUEFDS0VUX1RZUEVTID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgLy8gbm8gTWFwID0gbm8gcG9seWZpbGxcblBBQ0tFVF9UWVBFU1tcIm9wZW5cIl0gPSBcIjBcIjtcblBBQ0tFVF9UWVBFU1tcImNsb3NlXCJdID0gXCIxXCI7XG5QQUNLRVRfVFlQRVNbXCJwaW5nXCJdID0gXCIyXCI7XG5QQUNLRVRfVFlQRVNbXCJwb25nXCJdID0gXCIzXCI7XG5QQUNLRVRfVFlQRVNbXCJtZXNzYWdlXCJdID0gXCI0XCI7XG5QQUNLRVRfVFlQRVNbXCJ1cGdyYWRlXCJdID0gXCI1XCI7XG5QQUNLRVRfVFlQRVNbXCJub29wXCJdID0gXCI2XCI7XG5jb25zdCBQQUNLRVRfVFlQRVNfUkVWRVJTRSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5PYmplY3Qua2V5cyhQQUNLRVRfVFlQRVMpLmZvckVhY2goa2V5ID0+IHtcbiAgICBQQUNLRVRfVFlQRVNfUkVWRVJTRVtQQUNLRVRfVFlQRVNba2V5XV0gPSBrZXk7XG59KTtcbmNvbnN0IEVSUk9SX1BBQ0tFVCA9IHsgdHlwZTogXCJlcnJvclwiLCBkYXRhOiBcInBhcnNlciBlcnJvclwiIH07XG5leHBvcnQgeyBQQUNLRVRfVFlQRVMsIFBBQ0tFVF9UWVBFU19SRVZFUlNFLCBFUlJPUl9QQUNLRVQgfTtcbiIsImltcG9ydCB7IFBBQ0tFVF9UWVBFUyB9IGZyb20gXCIuL2NvbW1vbnMuanNcIjtcbmNvbnN0IHdpdGhOYXRpdmVCbG9iID0gdHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICh0eXBlb2YgQmxvYiAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoQmxvYikgPT09IFwiW29iamVjdCBCbG9iQ29uc3RydWN0b3JdXCIpO1xuY29uc3Qgd2l0aE5hdGl2ZUFycmF5QnVmZmVyID0gdHlwZW9mIEFycmF5QnVmZmVyID09PSBcImZ1bmN0aW9uXCI7XG4vLyBBcnJheUJ1ZmZlci5pc1ZpZXcgbWV0aG9kIGlzIG5vdCBkZWZpbmVkIGluIElFMTBcbmNvbnN0IGlzVmlldyA9IG9iaiA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IEFycmF5QnVmZmVyLmlzVmlldyhvYmopXG4gICAgICAgIDogb2JqICYmIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjtcbn07XG5jb25zdCBlbmNvZGVQYWNrZXQgPSAoeyB0eXBlLCBkYXRhIH0sIHN1cHBvcnRzQmluYXJ5LCBjYWxsYmFjaykgPT4ge1xuICAgIGlmICh3aXRoTmF0aXZlQmxvYiAmJiBkYXRhIGluc3RhbmNlb2YgQmxvYikge1xuICAgICAgICBpZiAoc3VwcG9ydHNCaW5hcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVCbG9iQXNCYXNlNjQoZGF0YSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpdGhOYXRpdmVBcnJheUJ1ZmZlciAmJlxuICAgICAgICAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGlzVmlldyhkYXRhKSkpIHtcbiAgICAgICAgaWYgKHN1cHBvcnRzQmluYXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZW5jb2RlQmxvYkFzQmFzZTY0KG5ldyBCbG9iKFtkYXRhXSksIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBwbGFpbiBzdHJpbmdcbiAgICByZXR1cm4gY2FsbGJhY2soUEFDS0VUX1RZUEVTW3R5cGVdICsgKGRhdGEgfHwgXCJcIikpO1xufTtcbmNvbnN0IGVuY29kZUJsb2JBc0Jhc2U2NCA9IChkYXRhLCBjYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZmlsZVJlYWRlci5yZXN1bHQuc3BsaXQoXCIsXCIpWzFdO1xuICAgICAgICBjYWxsYmFjayhcImJcIiArIGNvbnRlbnQpO1xuICAgIH07XG4gICAgcmV0dXJuIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChkYXRhKTtcbn07XG5leHBvcnQgZGVmYXVsdCBlbmNvZGVQYWNrZXQ7XG4iLCJjb25zdCBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcbi8vIFVzZSBhIGxvb2t1cCB0YWJsZSB0byBmaW5kIHRoZSBpbmRleC5cbmNvbnN0IGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTtcbmZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpO1xufVxuZXhwb3J0IGNvbnN0IGVuY29kZSA9IChhcnJheWJ1ZmZlcikgPT4ge1xuICAgIGxldCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaSwgbGVuID0gYnl0ZXMubGVuZ3RoLCBiYXNlNjQgPSAnJztcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDMpIHtcbiAgICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2ldID4+IDJdO1xuICAgICAgICBiYXNlNjQgKz0gY2hhcnNbKChieXRlc1tpXSAmIDMpIDw8IDQpIHwgKGJ5dGVzW2kgKyAxXSA+PiA0KV07XG4gICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyKSB8IChieXRlc1tpICsgMl0gPj4gNildO1xuICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaSArIDJdICYgNjNdO1xuICAgIH1cbiAgICBpZiAobGVuICUgMyA9PT0gMikge1xuICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArICc9JztcbiAgICB9XG4gICAgZWxzZSBpZiAobGVuICUgMyA9PT0gMSkge1xuICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAyKSArICc9PSc7XG4gICAgfVxuICAgIHJldHVybiBiYXNlNjQ7XG59O1xuZXhwb3J0IGNvbnN0IGRlY29kZSA9IChiYXNlNjQpID0+IHtcbiAgICBsZXQgYnVmZmVyTGVuZ3RoID0gYmFzZTY0Lmxlbmd0aCAqIDAuNzUsIGxlbiA9IGJhc2U2NC5sZW5ndGgsIGksIHAgPSAwLCBlbmNvZGVkMSwgZW5jb2RlZDIsIGVuY29kZWQzLCBlbmNvZGVkNDtcbiAgICBpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAxXSA9PT0gJz0nKSB7XG4gICAgICAgIGJ1ZmZlckxlbmd0aC0tO1xuICAgICAgICBpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAyXSA9PT0gJz0nKSB7XG4gICAgICAgICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhcnJheWJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpLCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICAgICAgZW5jb2RlZDEgPSBsb29rdXBbYmFzZTY0LmNoYXJDb2RlQXQoaSldO1xuICAgICAgICBlbmNvZGVkMiA9IGxvb2t1cFtiYXNlNjQuY2hhckNvZGVBdChpICsgMSldO1xuICAgICAgICBlbmNvZGVkMyA9IGxvb2t1cFtiYXNlNjQuY2hhckNvZGVBdChpICsgMildO1xuICAgICAgICBlbmNvZGVkNCA9IGxvb2t1cFtiYXNlNjQuY2hhckNvZGVBdChpICsgMyldO1xuICAgICAgICBieXRlc1twKytdID0gKGVuY29kZWQxIDw8IDIpIHwgKGVuY29kZWQyID4+IDQpO1xuICAgICAgICBieXRlc1twKytdID0gKChlbmNvZGVkMiAmIDE1KSA8PCA0KSB8IChlbmNvZGVkMyA+PiAyKTtcbiAgICAgICAgYnl0ZXNbcCsrXSA9ICgoZW5jb2RlZDMgJiAzKSA8PCA2KSB8IChlbmNvZGVkNCAmIDYzKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5YnVmZmVyO1xufTtcbiIsImltcG9ydCB7IEVSUk9SX1BBQ0tFVCwgUEFDS0VUX1RZUEVTX1JFVkVSU0UgfSBmcm9tIFwiLi9jb21tb25zLmpzXCI7XG5pbXBvcnQgeyBkZWNvZGUgfSBmcm9tIFwiLi9jb250cmliL2Jhc2U2NC1hcnJheWJ1ZmZlci5qc1wiO1xuY29uc3Qgd2l0aE5hdGl2ZUFycmF5QnVmZmVyID0gdHlwZW9mIEFycmF5QnVmZmVyID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBkZWNvZGVQYWNrZXQgPSAoZW5jb2RlZFBhY2tldCwgYmluYXJ5VHlwZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgZW5jb2RlZFBhY2tldCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICBkYXRhOiBtYXBCaW5hcnkoZW5jb2RlZFBhY2tldCwgYmluYXJ5VHlwZSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IGVuY29kZWRQYWNrZXQuY2hhckF0KDApO1xuICAgIGlmICh0eXBlID09PSBcImJcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJtZXNzYWdlXCIsXG4gICAgICAgICAgICBkYXRhOiBkZWNvZGVCYXNlNjRQYWNrZXQoZW5jb2RlZFBhY2tldC5zdWJzdHJpbmcoMSksIGJpbmFyeVR5cGUpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHBhY2tldFR5cGUgPSBQQUNLRVRfVFlQRVNfUkVWRVJTRVt0eXBlXTtcbiAgICBpZiAoIXBhY2tldFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIEVSUk9SX1BBQ0tFVDtcbiAgICB9XG4gICAgcmV0dXJuIGVuY29kZWRQYWNrZXQubGVuZ3RoID4gMVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHR5cGU6IFBBQ0tFVF9UWVBFU19SRVZFUlNFW3R5cGVdLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlZFBhY2tldC5zdWJzdHJpbmcoMSlcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIHR5cGU6IFBBQ0tFVF9UWVBFU19SRVZFUlNFW3R5cGVdXG4gICAgICAgIH07XG59O1xuY29uc3QgZGVjb2RlQmFzZTY0UGFja2V0ID0gKGRhdGEsIGJpbmFyeVR5cGUpID0+IHtcbiAgICBpZiAod2l0aE5hdGl2ZUFycmF5QnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUoZGF0YSk7XG4gICAgICAgIHJldHVybiBtYXBCaW5hcnkoZGVjb2RlZCwgYmluYXJ5VHlwZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geyBiYXNlNjQ6IHRydWUsIGRhdGEgfTsgLy8gZmFsbGJhY2sgZm9yIG9sZCBicm93c2Vyc1xuICAgIH1cbn07XG5jb25zdCBtYXBCaW5hcnkgPSAoZGF0YSwgYmluYXJ5VHlwZSkgPT4ge1xuICAgIHN3aXRjaCAoYmluYXJ5VHlwZSkge1xuICAgICAgICBjYXNlIFwiYmxvYlwiOlxuICAgICAgICAgICAgcmV0dXJuIGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciA/IG5ldyBCbG9iKFtkYXRhXSkgOiBkYXRhO1xuICAgICAgICBjYXNlIFwiYXJyYXlidWZmZXJcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBkYXRhOyAvLyBhc3N1bWluZyB0aGUgZGF0YSBpcyBhbHJlYWR5IGFuIEFycmF5QnVmZmVyXG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGRlY29kZVBhY2tldDtcbiIsImltcG9ydCBlbmNvZGVQYWNrZXQgZnJvbSBcIi4vZW5jb2RlUGFja2V0LmpzXCI7XG5pbXBvcnQgZGVjb2RlUGFja2V0IGZyb20gXCIuL2RlY29kZVBhY2tldC5qc1wiO1xuY29uc3QgU0VQQVJBVE9SID0gU3RyaW5nLmZyb21DaGFyQ29kZSgzMCk7IC8vIHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWxpbWl0ZXIjQVNDSUlfZGVsaW1pdGVkX3RleHRcbmNvbnN0IGVuY29kZVBheWxvYWQgPSAocGFja2V0cywgY2FsbGJhY2spID0+IHtcbiAgICAvLyBzb21lIHBhY2tldHMgbWF5IGJlIGFkZGVkIHRvIHRoZSBhcnJheSB3aGlsZSBlbmNvZGluZywgc28gdGhlIGluaXRpYWwgbGVuZ3RoIG11c3QgYmUgc2F2ZWRcbiAgICBjb25zdCBsZW5ndGggPSBwYWNrZXRzLmxlbmd0aDtcbiAgICBjb25zdCBlbmNvZGVkUGFja2V0cyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgcGFja2V0cy5mb3JFYWNoKChwYWNrZXQsIGkpID0+IHtcbiAgICAgICAgLy8gZm9yY2UgYmFzZTY0IGVuY29kaW5nIGZvciBiaW5hcnkgcGFja2V0c1xuICAgICAgICBlbmNvZGVQYWNrZXQocGFja2V0LCBmYWxzZSwgZW5jb2RlZFBhY2tldCA9PiB7XG4gICAgICAgICAgICBlbmNvZGVkUGFja2V0c1tpXSA9IGVuY29kZWRQYWNrZXQ7XG4gICAgICAgICAgICBpZiAoKytjb3VudCA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZW5jb2RlZFBhY2tldHMuam9pbihTRVBBUkFUT1IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuY29uc3QgZGVjb2RlUGF5bG9hZCA9IChlbmNvZGVkUGF5bG9hZCwgYmluYXJ5VHlwZSkgPT4ge1xuICAgIGNvbnN0IGVuY29kZWRQYWNrZXRzID0gZW5jb2RlZFBheWxvYWQuc3BsaXQoU0VQQVJBVE9SKTtcbiAgICBjb25zdCBwYWNrZXRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmNvZGVkUGFja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBkZWNvZGVkUGFja2V0ID0gZGVjb2RlUGFja2V0KGVuY29kZWRQYWNrZXRzW2ldLCBiaW5hcnlUeXBlKTtcbiAgICAgICAgcGFja2V0cy5wdXNoKGRlY29kZWRQYWNrZXQpO1xuICAgICAgICBpZiAoZGVjb2RlZFBhY2tldC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYWNrZXRzO1xufTtcbmV4cG9ydCBjb25zdCBwcm90b2NvbCA9IDQ7XG5leHBvcnQgeyBlbmNvZGVQYWNrZXQsIGVuY29kZVBheWxvYWQsIGRlY29kZVBhY2tldCwgZGVjb2RlUGF5bG9hZCB9O1xuIiwiLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBFbWl0dGVyKG9iaikge1xuICBpZiAob2JqKSByZXR1cm4gbWl4aW4ob2JqKTtcbn1cblxuLyoqXG4gKiBNaXhpbiB0aGUgZW1pdHRlciBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG1peGluKG9iaikge1xuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcbiAgICBvYmpba2V5XSA9IEVtaXR0ZXIucHJvdG90eXBlW2tleV07XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cbkVtaXR0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG4gICh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSlcbiAgICAucHVzaChmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcbiAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XG4gIGZ1bmN0aW9uIG9uKCkge1xuICAgIHRoaXMub2ZmKGV2ZW50LCBvbik7XG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIG9uLmZuID0gZm47XG4gIHRoaXMub24oZXZlbnQsIG9uKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5vZmYgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxuRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cbiAgLy8gYWxsXG4gIGlmICgwID09IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHNwZWNpZmljIGV2ZW50XG4gIHZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xuICBpZiAoIWNhbGxiYWNrcykgcmV0dXJuIHRoaXM7XG5cbiAgLy8gcmVtb3ZlIGFsbCBoYW5kbGVyc1xuICBpZiAoMSA9PSBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyByZW1vdmUgc3BlY2lmaWMgaGFuZGxlclxuICB2YXIgY2I7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgY2IgPSBjYWxsYmFja3NbaV07XG4gICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBSZW1vdmUgZXZlbnQgc3BlY2lmaWMgYXJyYXlzIGZvciBldmVudCB0eXBlcyB0aGF0IG5vXG4gIC8vIG9uZSBpcyBzdWJzY3JpYmVkIGZvciB0byBhdm9pZCBtZW1vcnkgbGVhay5cbiAgaWYgKGNhbGxiYWNrcy5sZW5ndGggPT09IDApIHtcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxuICogQHJldHVybiB7RW1pdHRlcn1cbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oZXZlbnQpe1xuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cbiAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpXG4gICAgLCBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdO1xuXG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gIH1cblxuICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGFsaWFzIHVzZWQgZm9yIHJlc2VydmVkIGV2ZW50cyAocHJvdGVjdGVkIG1ldGhvZClcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXRSZXNlcnZlZCA9IEVtaXR0ZXIucHJvdG90eXBlLmVtaXQ7XG5cbi8qKlxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5FbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW107XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoaXMgZW1pdHRlciBoYXMgYGV2ZW50YCBoYW5kbGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbkVtaXR0ZXIucHJvdG90eXBlLmhhc0xpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XG59O1xuIiwiZXhwb3J0IGNvbnN0IGdsb2JhbFRoaXNTaGltID0gKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG4gICAgfVxufSkoKTtcbiIsImltcG9ydCB7IGdsb2JhbFRoaXNTaGltIGFzIGdsb2JhbFRoaXMgfSBmcm9tIFwiLi9nbG9iYWxUaGlzLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGljayhvYmosIC4uLmF0dHIpIHtcbiAgICByZXR1cm4gYXR0ci5yZWR1Y2UoKGFjYywgaykgPT4ge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICBhY2Nba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG4vLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSByZWFsIHRpbWVvdXQgZnVuY3Rpb25zIHNvIHRoZXkgY2FuIGJlIHVzZWQgd2hlbiBvdmVycmlkZGVuXG5jb25zdCBOQVRJVkVfU0VUX1RJTUVPVVQgPSBzZXRUaW1lb3V0O1xuY29uc3QgTkFUSVZFX0NMRUFSX1RJTUVPVVQgPSBjbGVhclRpbWVvdXQ7XG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFRpbWVyRnVuY3Rpb25zKG9iaiwgb3B0cykge1xuICAgIGlmIChvcHRzLnVzZU5hdGl2ZVRpbWVycykge1xuICAgICAgICBvYmouc2V0VGltZW91dEZuID0gTkFUSVZFX1NFVF9USU1FT1VULmJpbmQoZ2xvYmFsVGhpcyk7XG4gICAgICAgIG9iai5jbGVhclRpbWVvdXRGbiA9IE5BVElWRV9DTEVBUl9USU1FT1VULmJpbmQoZ2xvYmFsVGhpcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvYmouc2V0VGltZW91dEZuID0gc2V0VGltZW91dC5iaW5kKGdsb2JhbFRoaXMpO1xuICAgICAgICBvYmouY2xlYXJUaW1lb3V0Rm4gPSBjbGVhclRpbWVvdXQuYmluZChnbG9iYWxUaGlzKTtcbiAgICB9XG59XG4vLyBiYXNlNjQgZW5jb2RlZCBidWZmZXJzIGFyZSBhYm91dCAzMyUgYmlnZ2VyIChodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQpXG5jb25zdCBCQVNFNjRfT1ZFUkhFQUQgPSAxLjMzO1xuLy8gd2UgY291bGQgYWxzbyBoYXZlIHVzZWQgYG5ldyBCbG9iKFtvYmpdKS5zaXplYCwgYnV0IGl0IGlzbid0IHN1cHBvcnRlZCBpbiBJRTlcbmV4cG9ydCBmdW5jdGlvbiBieXRlTGVuZ3RoKG9iaikge1xuICAgIGlmICh0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB1dGY4TGVuZ3RoKG9iaik7XG4gICAgfVxuICAgIC8vIGFycmF5YnVmZmVyIG9yIGJsb2JcbiAgICByZXR1cm4gTWF0aC5jZWlsKChvYmouYnl0ZUxlbmd0aCB8fCBvYmouc2l6ZSkgKiBCQVNFNjRfT1ZFUkhFQUQpO1xufVxuZnVuY3Rpb24gdXRmOExlbmd0aChzdHIpIHtcbiAgICBsZXQgYyA9IDAsIGxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGMgPCAweDgwKSB7XG4gICAgICAgICAgICBsZW5ndGggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgMHg4MDApIHtcbiAgICAgICAgICAgIGxlbmd0aCArPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPCAweGQ4MDAgfHwgYyA+PSAweGUwMDApIHtcbiAgICAgICAgICAgIGxlbmd0aCArPSAzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgbGVuZ3RoICs9IDQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbiIsImltcG9ydCB7IGRlY29kZVBhY2tldCB9IGZyb20gXCJlbmdpbmUuaW8tcGFyc2VyXCI7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcIkBzb2NrZXQuaW8vY29tcG9uZW50LWVtaXR0ZXJcIjtcbmltcG9ydCB7IGluc3RhbGxUaW1lckZ1bmN0aW9ucyB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmNsYXNzIFRyYW5zcG9ydEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZGVzY3JpcHRpb24sIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocmVhc29uKTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnR5cGUgPSBcIlRyYW5zcG9ydEVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFRyYW5zcG9ydCBleHRlbmRzIEVtaXR0ZXIge1xuICAgIC8qKlxuICAgICAqIFRyYW5zcG9ydCBhYnN0cmFjdCBjb25zdHJ1Y3Rvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuICAgICAgICBpbnN0YWxsVGltZXJGdW5jdGlvbnModGhpcywgb3B0cyk7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICAgIHRoaXMucXVlcnkgPSBvcHRzLnF1ZXJ5O1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIlwiO1xuICAgICAgICB0aGlzLnNvY2tldCA9IG9wdHMuc29ja2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWl0cyBhbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWFzb25cbiAgICAgKiBAcGFyYW0gZGVzY3JpcHRpb25cbiAgICAgKiBAcGFyYW0gY29udGV4dCAtIHRoZSBlcnJvciBjb250ZXh0XG4gICAgICogQHJldHVybiB7VHJhbnNwb3J0fSBmb3IgY2hhaW5pbmdcbiAgICAgKiBAYXBpIHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uRXJyb3IocmVhc29uLCBkZXNjcmlwdGlvbiwgY29udGV4dCkge1xuICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJlcnJvclwiLCBuZXcgVHJhbnNwb3J0RXJyb3IocmVhc29uLCBkZXNjcmlwdGlvbiwgY29udGV4dCkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHRyYW5zcG9ydC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG4gICAgb3BlbigpIHtcbiAgICAgICAgaWYgKFwiY2xvc2VkXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIlwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwib3BlbmluZ1wiO1xuICAgICAgICAgICAgdGhpcy5kb09wZW4oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSB0cmFuc3BvcnQuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRvQ2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBtdWx0aXBsZSBwYWNrZXRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGFja2V0c1xuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG4gICAgc2VuZChwYWNrZXRzKSB7XG4gICAgICAgIGlmIChcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlKHBhY2tldHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGhpcyBtaWdodCBoYXBwZW4gaWYgdGhlIHRyYW5zcG9ydCB3YXMgc2lsZW50bHkgY2xvc2VkIGluIHRoZSBiZWZvcmV1bmxvYWQgZXZlbnQgaGFuZGxlclxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIG9wZW5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJvdGVjdGVkXG4gICAgICovXG4gICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIm9wZW5cIjtcbiAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIHN1cGVyLmVtaXRSZXNlcnZlZChcIm9wZW5cIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aXRoIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YVxuICAgICAqIEBhcGkgcHJvdGVjdGVkXG4gICAgICovXG4gICAgb25EYXRhKGRhdGEpIHtcbiAgICAgICAgY29uc3QgcGFja2V0ID0gZGVjb2RlUGFja2V0KGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpO1xuICAgICAgICB0aGlzLm9uUGFja2V0KHBhY2tldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aXRoIGEgZGVjb2RlZCBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAYXBpIHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uUGFja2V0KHBhY2tldCkge1xuICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gY2xvc2UuXG4gICAgICpcbiAgICAgKiBAYXBpIHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uQ2xvc2UoZGV0YWlscykge1xuICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJjbG9zZVwiLCBkZXRhaWxzKTtcbiAgICB9XG59XG4iLCIvLyBpbXBvcnRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS91bnNoaWZ0aW8veWVhc3Rcbid1c2Ugc3RyaWN0JztcbmNvbnN0IGFscGhhYmV0ID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6LV8nLnNwbGl0KCcnKSwgbGVuZ3RoID0gNjQsIG1hcCA9IHt9O1xubGV0IHNlZWQgPSAwLCBpID0gMCwgcHJldjtcbi8qKlxuICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIG51bWJlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtIFRoZSBudW1iZXIgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGUobnVtKSB7XG4gICAgbGV0IGVuY29kZWQgPSAnJztcbiAgICBkbyB7XG4gICAgICAgIGVuY29kZWQgPSBhbHBoYWJldFtudW0gJSBsZW5ndGhdICsgZW5jb2RlZDtcbiAgICAgICAgbnVtID0gTWF0aC5mbG9vcihudW0gLyBsZW5ndGgpO1xuICAgIH0gd2hpbGUgKG51bSA+IDApO1xuICAgIHJldHVybiBlbmNvZGVkO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIGludGVnZXIgdmFsdWUgc3BlY2lmaWVkIGJ5IHRoZSBnaXZlbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgaW50ZWdlciB2YWx1ZSByZXByZXNlbnRlZCBieSB0aGUgc3RyaW5nLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZShzdHIpIHtcbiAgICBsZXQgZGVjb2RlZCA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBkZWNvZGVkID0gZGVjb2RlZCAqIGxlbmd0aCArIG1hcFtzdHIuY2hhckF0KGkpXTtcbiAgICB9XG4gICAgcmV0dXJuIGRlY29kZWQ7XG59XG4vKipcbiAqIFllYXN0OiBBIHRpbnkgZ3Jvd2luZyBpZCBnZW5lcmF0b3IuXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gQSB1bmlxdWUgaWQuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24geWVhc3QoKSB7XG4gICAgY29uc3Qgbm93ID0gZW5jb2RlKCtuZXcgRGF0ZSgpKTtcbiAgICBpZiAobm93ICE9PSBwcmV2KVxuICAgICAgICByZXR1cm4gc2VlZCA9IDAsIHByZXYgPSBub3c7XG4gICAgcmV0dXJuIG5vdyArICcuJyArIGVuY29kZShzZWVkKyspO1xufVxuLy9cbi8vIE1hcCBlYWNoIGNoYXJhY3RlciB0byBpdHMgaW5kZXguXG4vL1xuZm9yICg7IGkgPCBsZW5ndGg7IGkrKylcbiAgICBtYXBbYWxwaGFiZXRbaV1dID0gaTtcbiIsIi8vIGltcG9ydGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhbGtuL3F1ZXJ5c3RyaW5nXG4vKipcbiAqIENvbXBpbGVzIGEgcXVlcnlzdHJpbmdcbiAqIFJldHVybnMgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlKG9iaikge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBmb3IgKGxldCBpIGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICBpZiAoc3RyLmxlbmd0aClcbiAgICAgICAgICAgICAgICBzdHIgKz0gJyYnO1xuICAgICAgICAgICAgc3RyICs9IGVuY29kZVVSSUNvbXBvbmVudChpKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChvYmpbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG4vKipcbiAqIFBhcnNlcyBhIHNpbXBsZSBxdWVyeXN0cmluZyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBxc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGUocXMpIHtcbiAgICBsZXQgcXJ5ID0ge307XG4gICAgbGV0IHBhaXJzID0gcXMuc3BsaXQoJyYnKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBsZXQgcGFpciA9IHBhaXJzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgIHFyeVtkZWNvZGVVUklDb21wb25lbnQocGFpclswXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xuICAgIH1cbiAgICByZXR1cm4gcXJ5O1xufVxuIiwiLy8gaW1wb3J0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vY29tcG9uZW50L2hhcy1jb3JzXG5sZXQgdmFsdWUgPSBmYWxzZTtcbnRyeSB7XG4gICAgdmFsdWUgPSB0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xufVxuY2F0Y2ggKGVycikge1xuICAgIC8vIGlmIFhNTEh0dHAgc3VwcG9ydCBpcyBkaXNhYmxlZCBpbiBJRSB0aGVuIGl0IHdpbGwgdGhyb3dcbiAgICAvLyB3aGVuIHRyeWluZyB0byBjcmVhdGVcbn1cbmV4cG9ydCBjb25zdCBoYXNDT1JTID0gdmFsdWU7XG4iLCIvLyBicm93c2VyIHNoaW0gZm9yIHhtbGh0dHByZXF1ZXN0IG1vZHVsZVxuaW1wb3J0IHsgaGFzQ09SUyB9IGZyb20gXCIuLi9jb250cmliL2hhcy1jb3JzLmpzXCI7XG5pbXBvcnQgeyBnbG9iYWxUaGlzU2hpbSBhcyBnbG9iYWxUaGlzIH0gZnJvbSBcIi4uL2dsb2JhbFRoaXMuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBYSFIob3B0cykge1xuICAgIGNvbnN0IHhkb21haW4gPSBvcHRzLnhkb21haW47XG4gICAgLy8gWE1MSHR0cFJlcXVlc3QgY2FuIGJlIGRpc2FibGVkIG9uIElFXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAmJiAoIXhkb21haW4gfHwgaGFzQ09SUykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkgeyB9XG4gICAgaWYgKCF4ZG9tYWluKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGdsb2JhbFRoaXNbW1wiQWN0aXZlXCJdLmNvbmNhdChcIk9iamVjdFwiKS5qb2luKFwiWFwiKV0oXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVHJhbnNwb3J0IH0gZnJvbSBcIi4uL3RyYW5zcG9ydC5qc1wiO1xuaW1wb3J0IHsgeWVhc3QgfSBmcm9tIFwiLi4vY29udHJpYi95ZWFzdC5qc1wiO1xuaW1wb3J0IHsgZW5jb2RlIH0gZnJvbSBcIi4uL2NvbnRyaWIvcGFyc2Vxcy5qc1wiO1xuaW1wb3J0IHsgZW5jb2RlUGF5bG9hZCwgZGVjb2RlUGF5bG9hZCB9IGZyb20gXCJlbmdpbmUuaW8tcGFyc2VyXCI7XG5pbXBvcnQgeyBYSFIgYXMgWE1MSHR0cFJlcXVlc3QgfSBmcm9tIFwiLi94bWxodHRwcmVxdWVzdC5qc1wiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gXCJAc29ja2V0LmlvL2NvbXBvbmVudC1lbWl0dGVyXCI7XG5pbXBvcnQgeyBpbnN0YWxsVGltZXJGdW5jdGlvbnMsIHBpY2sgfSBmcm9tIFwiLi4vdXRpbC5qc1wiO1xuaW1wb3J0IHsgZ2xvYmFsVGhpc1NoaW0gYXMgZ2xvYmFsVGhpcyB9IGZyb20gXCIuLi9nbG9iYWxUaGlzLmpzXCI7XG5mdW5jdGlvbiBlbXB0eSgpIHsgfVxuY29uc3QgaGFzWEhSMiA9IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KHtcbiAgICAgICAgeGRvbWFpbjogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gbnVsbCAhPSB4aHIucmVzcG9uc2VUeXBlO1xufSkoKTtcbmV4cG9ydCBjbGFzcyBQb2xsaW5nIGV4dGVuZHMgVHJhbnNwb3J0IHtcbiAgICAvKipcbiAgICAgKiBYSFIgUG9sbGluZyBjb25zdHJ1Y3Rvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgICAgIHN1cGVyKG9wdHMpO1xuICAgICAgICB0aGlzLnBvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgY29uc3QgaXNTU0wgPSBcImh0dHBzOlwiID09PSBsb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgICAgIGxldCBwb3J0ID0gbG9jYXRpb24ucG9ydDtcbiAgICAgICAgICAgIC8vIHNvbWUgdXNlciBhZ2VudHMgaGF2ZSBlbXB0eSBgbG9jYXRpb24ucG9ydGBcbiAgICAgICAgICAgIGlmICghcG9ydCkge1xuICAgICAgICAgICAgICAgIHBvcnQgPSBpc1NTTCA/IFwiNDQzXCIgOiBcIjgwXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnhkID1cbiAgICAgICAgICAgICAgICAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuaG9zdG5hbWUgIT09IGxvY2F0aW9uLmhvc3RuYW1lKSB8fFxuICAgICAgICAgICAgICAgICAgICBwb3J0ICE9PSBvcHRzLnBvcnQ7XG4gICAgICAgICAgICB0aGlzLnhzID0gb3B0cy5zZWN1cmUgIT09IGlzU1NMO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBYSFIgc3VwcG9ydHMgYmluYXJ5XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBmb3JjZUJhc2U2NCA9IG9wdHMgJiYgb3B0cy5mb3JjZUJhc2U2NDtcbiAgICAgICAgdGhpcy5zdXBwb3J0c0JpbmFyeSA9IGhhc1hIUjIgJiYgIWZvcmNlQmFzZTY0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc3BvcnQgbmFtZS5cbiAgICAgKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicG9sbGluZ1wiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc29ja2V0ICh0cmlnZ2VycyBwb2xsaW5nKS4gV2Ugd3JpdGUgYSBQSU5HIG1lc3NhZ2UgdG8gZGV0ZXJtaW5lXG4gICAgICogd2hlbiB0aGUgdHJhbnNwb3J0IGlzIG9wZW4uXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBkb09wZW4oKSB7XG4gICAgICAgIHRoaXMucG9sbCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXVzZXMgcG9sbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIHVwb24gYnVmZmVycyBhcmUgZmx1c2hlZCBhbmQgdHJhbnNwb3J0IGlzIHBhdXNlZFxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIHBhdXNlKG9uUGF1c2UpIHtcbiAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJwYXVzaW5nXCI7XG4gICAgICAgIGNvbnN0IHBhdXNlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJwYXVzZWRcIjtcbiAgICAgICAgICAgIG9uUGF1c2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucG9sbGluZyB8fCAhdGhpcy53cml0YWJsZSkge1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0b3RhbCsrO1xuICAgICAgICAgICAgICAgIHRoaXMub25jZShcInBvbGxDb21wbGV0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC0tdG90YWwgfHwgcGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy53cml0YWJsZSkge1xuICAgICAgICAgICAgICAgIHRvdGFsKys7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmNlKFwiZHJhaW5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAtLXRvdGFsIHx8IHBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXVzZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBwb2xsaW5nIGN5Y2xlLlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cbiAgICBwb2xsKCkge1xuICAgICAgICB0aGlzLnBvbGxpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmRvUG9sbCgpO1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBvbGxcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJsb2FkcyBvbkRhdGEgdG8gZGV0ZWN0IHBheWxvYWRzLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgb25EYXRhKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBwYWNrZXQgPT4ge1xuICAgICAgICAgICAgLy8gaWYgaXRzIHRoZSBmaXJzdCBtZXNzYWdlIHdlIGNvbnNpZGVyIHRoZSB0cmFuc3BvcnQgb3BlblxuICAgICAgICAgICAgaWYgKFwib3BlbmluZ1wiID09PSB0aGlzLnJlYWR5U3RhdGUgJiYgcGFja2V0LnR5cGUgPT09IFwib3BlblwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIGl0cyBhIGNsb3NlIHBhY2tldCwgd2UgY2xvc2UgdGhlIG9uZ29pbmcgcmVxdWVzdHNcbiAgICAgICAgICAgIGlmIChcImNsb3NlXCIgPT09IHBhY2tldC50eXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlKHsgZGVzY3JpcHRpb246IFwidHJhbnNwb3J0IGNsb3NlZCBieSB0aGUgc2VydmVyXCIgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGJ5cGFzcyBvbkRhdGEgYW5kIGhhbmRsZSB0aGUgbWVzc2FnZVxuICAgICAgICAgICAgdGhpcy5vblBhY2tldChwYWNrZXQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBkZWNvZGUgcGF5bG9hZFxuICAgICAgICBkZWNvZGVQYXlsb2FkKGRhdGEsIHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpLmZvckVhY2goY2FsbGJhY2spO1xuICAgICAgICAvLyBpZiBhbiBldmVudCBkaWQgbm90IHRyaWdnZXIgY2xvc2luZ1xuICAgICAgICBpZiAoXCJjbG9zZWRcIiAhPT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBnb3QgZGF0YSB3ZSdyZSBub3QgcG9sbGluZ1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBvbGxDb21wbGV0ZVwiKTtcbiAgICAgICAgICAgIGlmIChcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgcG9sbGluZywgc2VuZCBhIGNsb3NlIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIGRvQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53cml0ZShbeyB0eXBlOiBcImNsb3NlXCIgfV0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGluIGNhc2Ugd2UncmUgdHJ5aW5nIHRvIGNsb3NlIHdoaWxlXG4gICAgICAgICAgICAvLyBoYW5kc2hha2luZyBpcyBpbiBwcm9ncmVzcyAoR0gtMTY0KVxuICAgICAgICAgICAgdGhpcy5vbmNlKFwib3BlblwiLCBjbG9zZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIGEgcGFja2V0cyBwYXlsb2FkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF0YSBwYWNrZXRzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZHJhaW4gY2FsbGJhY2tcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICB3cml0ZShwYWNrZXRzKSB7XG4gICAgICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgZW5jb2RlUGF5bG9hZChwYWNrZXRzLCBkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMuZG9Xcml0ZShkYXRhLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJkcmFpblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHVyaSBmb3IgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIHVyaSgpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyeSB8fCB7fTtcbiAgICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5vcHRzLnNlY3VyZSA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiO1xuICAgICAgICBsZXQgcG9ydCA9IFwiXCI7XG4gICAgICAgIC8vIGNhY2hlIGJ1c3RpbmcgaXMgZm9yY2VkXG4gICAgICAgIGlmIChmYWxzZSAhPT0gdGhpcy5vcHRzLnRpbWVzdGFtcFJlcXVlc3RzKSB7XG4gICAgICAgICAgICBxdWVyeVt0aGlzLm9wdHMudGltZXN0YW1wUGFyYW1dID0geWVhc3QoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc3VwcG9ydHNCaW5hcnkgJiYgIXF1ZXJ5LnNpZCkge1xuICAgICAgICAgICAgcXVlcnkuYjY0ID0gMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhdm9pZCBwb3J0IGlmIGRlZmF1bHQgZm9yIHNjaGVtYVxuICAgICAgICBpZiAodGhpcy5vcHRzLnBvcnQgJiZcbiAgICAgICAgICAgICgoXCJodHRwc1wiID09PSBzY2hlbWEgJiYgTnVtYmVyKHRoaXMub3B0cy5wb3J0KSAhPT0gNDQzKSB8fFxuICAgICAgICAgICAgICAgIChcImh0dHBcIiA9PT0gc2NoZW1hICYmIE51bWJlcih0aGlzLm9wdHMucG9ydCkgIT09IDgwKSkpIHtcbiAgICAgICAgICAgIHBvcnQgPSBcIjpcIiArIHRoaXMub3B0cy5wb3J0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kZWRRdWVyeSA9IGVuY29kZShxdWVyeSk7XG4gICAgICAgIGNvbnN0IGlwdjYgPSB0aGlzLm9wdHMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikgIT09IC0xO1xuICAgICAgICByZXR1cm4gKHNjaGVtYSArXG4gICAgICAgICAgICBcIjovL1wiICtcbiAgICAgICAgICAgIChpcHY2ID8gXCJbXCIgKyB0aGlzLm9wdHMuaG9zdG5hbWUgKyBcIl1cIiA6IHRoaXMub3B0cy5ob3N0bmFtZSkgK1xuICAgICAgICAgICAgcG9ydCArXG4gICAgICAgICAgICB0aGlzLm9wdHMucGF0aCArXG4gICAgICAgICAgICAoZW5jb2RlZFF1ZXJ5Lmxlbmd0aCA/IFwiP1wiICsgZW5jb2RlZFF1ZXJ5IDogXCJcIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICByZXF1ZXN0KG9wdHMgPSB7fSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKG9wdHMsIHsgeGQ6IHRoaXMueGQsIHhzOiB0aGlzLnhzIH0sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLnVyaSgpLCBvcHRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGVkIHVwb24gZmx1c2guXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgZG9Xcml0ZShkYXRhLCBmbikge1xuICAgICAgICBjb25zdCByZXEgPSB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcS5vbihcInN1Y2Nlc3NcIiwgZm4pO1xuICAgICAgICByZXEub24oXCJlcnJvclwiLCAoeGhyU3RhdHVzLCBjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoXCJ4aHIgcG9zdCBlcnJvclwiLCB4aHJTdGF0dXMsIGNvbnRleHQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIGEgcG9sbCBjeWNsZS5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIGRvUG9sbCgpIHtcbiAgICAgICAgY29uc3QgcmVxID0gdGhpcy5yZXF1ZXN0KCk7XG4gICAgICAgIHJlcS5vbihcImRhdGFcIiwgdGhpcy5vbkRhdGEuYmluZCh0aGlzKSk7XG4gICAgICAgIHJlcS5vbihcImVycm9yXCIsICh4aHJTdGF0dXMsIGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihcInhociBwb2xsIGVycm9yXCIsIHhoclN0YXR1cywgY29udGV4dCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvbGxYaHIgPSByZXE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJlcXVlc3QgZXh0ZW5kcyBFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IGNvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodXJpLCBvcHRzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGluc3RhbGxUaW1lckZ1bmN0aW9ucyh0aGlzLCBvcHRzKTtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBvcHRzLm1ldGhvZCB8fCBcIkdFVFwiO1xuICAgICAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICAgICAgdGhpcy5hc3luYyA9IGZhbHNlICE9PSBvcHRzLmFzeW5jO1xuICAgICAgICB0aGlzLmRhdGEgPSB1bmRlZmluZWQgIT09IG9wdHMuZGF0YSA/IG9wdHMuZGF0YSA6IG51bGw7XG4gICAgICAgIHRoaXMuY3JlYXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIFhIUiBvYmplY3QgYW5kIHNlbmRzIHRoZSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgY3JlYXRlKCkge1xuICAgICAgICBjb25zdCBvcHRzID0gcGljayh0aGlzLm9wdHMsIFwiYWdlbnRcIiwgXCJwZnhcIiwgXCJrZXlcIiwgXCJwYXNzcGhyYXNlXCIsIFwiY2VydFwiLCBcImNhXCIsIFwiY2lwaGVyc1wiLCBcInJlamVjdFVuYXV0aG9yaXplZFwiLCBcImF1dG9VbnJlZlwiKTtcbiAgICAgICAgb3B0cy54ZG9tYWluID0gISF0aGlzLm9wdHMueGQ7XG4gICAgICAgIG9wdHMueHNjaGVtZSA9ICEhdGhpcy5vcHRzLnhzO1xuICAgICAgICBjb25zdCB4aHIgPSAodGhpcy54aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3Qob3B0cykpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgeGhyLm9wZW4odGhpcy5tZXRob2QsIHRoaXMudXJpLCB0aGlzLmFzeW5jKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5leHRyYUhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldERpc2FibGVIZWFkZXJDaGVjayAmJiB4aHIuc2V0RGlzYWJsZUhlYWRlckNoZWNrKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMub3B0cy5leHRyYUhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuZXh0cmFIZWFkZXJzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaSwgdGhpcy5vcHRzLmV4dHJhSGVhZGVyc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICBpZiAoXCJQT1NUXCIgPT09IHRoaXMubWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAvLyBpZTYgY2hlY2tcbiAgICAgICAgICAgIGlmIChcIndpdGhDcmVkZW50aWFsc1wiIGluIHhocikge1xuICAgICAgICAgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLm9wdHMud2l0aENyZWRlbnRpYWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5yZXF1ZXN0VGltZW91dCkge1xuICAgICAgICAgICAgICAgIHhoci50aW1lb3V0ID0gdGhpcy5vcHRzLnJlcXVlc3RUaW1lb3V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoNCAhPT0geGhyLnJlYWR5U3RhdGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoMjAwID09PSB4aHIuc3RhdHVzIHx8IDEyMjMgPT09IHhoci5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkxvYWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgYGVycm9yYCBldmVudCBoYW5kbGVyIHRoYXQncyB1c2VyLXNldFxuICAgICAgICAgICAgICAgICAgICAvLyBkb2VzIG5vdCB0aHJvdyBpbiB0aGUgc2FtZSB0aWNrIGFuZCBnZXRzIGNhdWdodCBoZXJlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGltZW91dEZuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvcih0eXBlb2YgeGhyLnN0YXR1cyA9PT0gXCJudW1iZXJcIiA/IHhoci5zdGF0dXMgOiAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5zZW5kKHRoaXMuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gZGVmZXIgc2luY2UgLmNyZWF0ZSgpIGlzIGNhbGxlZCBkaXJlY3RseSBmcm9tIHRoZSBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgLy8gYW5kIHRodXMgdGhlICdlcnJvcicgZXZlbnQgY2FuIG9ubHkgYmUgb25seSBib3VuZCAqYWZ0ZXIqIHRoaXMgZXhjZXB0aW9uXG4gICAgICAgICAgICAvLyBvY2N1cnMuICBUaGVyZWZvcmUsIGFsc28sIHdlIGNhbm5vdCB0aHJvdyBoZXJlIGF0IGFsbC5cbiAgICAgICAgICAgIHRoaXMuc2V0VGltZW91dEZuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gUmVxdWVzdC5yZXF1ZXN0c0NvdW50Kys7XG4gICAgICAgICAgICBSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdID0gdGhpcztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyLCB0aGlzLnhocik7XG4gICAgICAgIHRoaXMuY2xlYW51cCh0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW5zIHVwIGhvdXNlLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgY2xlYW51cChmcm9tRXJyb3IpIHtcbiAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiB0aGlzLnhociB8fCBudWxsID09PSB0aGlzLnhocikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGVtcHR5O1xuICAgICAgICBpZiAoZnJvbUVycm9yKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMueGhyLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgZGVsZXRlIFJlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy54aHIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBsb2FkLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgb25Mb2FkKCkge1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy54aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJkYXRhXCIsIGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWJvcnRzIHRoZSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cbiAgICBhYm9ydCgpIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgfVxufVxuUmVxdWVzdC5yZXF1ZXN0c0NvdW50ID0gMDtcblJlcXVlc3QucmVxdWVzdHMgPSB7fTtcbi8qKlxuICogQWJvcnRzIHBlbmRpbmcgcmVxdWVzdHMgd2hlbiB1bmxvYWRpbmcgdGhlIHdpbmRvdy4gVGhpcyBpcyBuZWVkZWQgdG8gcHJldmVudFxuICogbWVtb3J5IGxlYWtzIChlLmcuIHdoZW4gdXNpbmcgSUUpIGFuZCB0byBlbnN1cmUgdGhhdCBubyBzcHVyaW91cyBlcnJvciBpc1xuICogZW1pdHRlZC5cbiAqL1xuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodHlwZW9mIGF0dGFjaEV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBhdHRhY2hFdmVudChcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNvbnN0IHRlcm1pbmF0aW9uRXZlbnQgPSBcIm9ucGFnZWhpZGVcIiBpbiBnbG9iYWxUaGlzID8gXCJwYWdlaGlkZVwiIDogXCJ1bmxvYWRcIjtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcih0ZXJtaW5hdGlvbkV2ZW50LCB1bmxvYWRIYW5kbGVyLCBmYWxzZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdW5sb2FkSGFuZGxlcigpIHtcbiAgICBmb3IgKGxldCBpIGluIFJlcXVlc3QucmVxdWVzdHMpIHtcbiAgICAgICAgaWYgKFJlcXVlc3QucmVxdWVzdHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgIFJlcXVlc3QucmVxdWVzdHNbaV0uYWJvcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IGdsb2JhbFRoaXNTaGltIGFzIGdsb2JhbFRoaXMgfSBmcm9tIFwiLi4vZ2xvYmFsVGhpcy5qc1wiO1xuZXhwb3J0IGNvbnN0IG5leHRUaWNrID0gKCgpID0+IHtcbiAgICBjb25zdCBpc1Byb21pc2VBdmFpbGFibGUgPSB0eXBlb2YgUHJvbWlzZSA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBQcm9taXNlLnJlc29sdmUgPT09IFwiZnVuY3Rpb25cIjtcbiAgICBpZiAoaXNQcm9taXNlQXZhaWxhYmxlKSB7XG4gICAgICAgIHJldHVybiBjYiA9PiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGNiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAoY2IsIHNldFRpbWVvdXRGbikgPT4gc2V0VGltZW91dEZuKGNiLCAwKTtcbiAgICB9XG59KSgpO1xuZXhwb3J0IGNvbnN0IFdlYlNvY2tldCA9IGdsb2JhbFRoaXMuV2ViU29ja2V0IHx8IGdsb2JhbFRoaXMuTW96V2ViU29ja2V0O1xuZXhwb3J0IGNvbnN0IHVzaW5nQnJvd3NlcldlYlNvY2tldCA9IHRydWU7XG5leHBvcnQgY29uc3QgZGVmYXVsdEJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XG4iLCJpbXBvcnQgeyBUcmFuc3BvcnQgfSBmcm9tIFwiLi4vdHJhbnNwb3J0LmpzXCI7XG5pbXBvcnQgeyBlbmNvZGUgfSBmcm9tIFwiLi4vY29udHJpYi9wYXJzZXFzLmpzXCI7XG5pbXBvcnQgeyB5ZWFzdCB9IGZyb20gXCIuLi9jb250cmliL3llYXN0LmpzXCI7XG5pbXBvcnQgeyBwaWNrIH0gZnJvbSBcIi4uL3V0aWwuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRCaW5hcnlUeXBlLCBuZXh0VGljaywgdXNpbmdCcm93c2VyV2ViU29ja2V0LCBXZWJTb2NrZXQgfSBmcm9tIFwiLi93ZWJzb2NrZXQtY29uc3RydWN0b3IuanNcIjtcbmltcG9ydCB7IGVuY29kZVBhY2tldCB9IGZyb20gXCJlbmdpbmUuaW8tcGFyc2VyXCI7XG4vLyBkZXRlY3QgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnRcbmNvbnN0IGlzUmVhY3ROYXRpdmUgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIG5hdmlnYXRvci5wcm9kdWN0ID09PSBcInN0cmluZ1wiICYmXG4gICAgbmF2aWdhdG9yLnByb2R1Y3QudG9Mb3dlckNhc2UoKSA9PT0gXCJyZWFjdG5hdGl2ZVwiO1xuZXhwb3J0IGNsYXNzIFdTIGV4dGVuZHMgVHJhbnNwb3J0IHtcbiAgICAvKipcbiAgICAgKiBXZWJTb2NrZXQgdHJhbnNwb3J0IGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQGFwaSB7T2JqZWN0fSBjb25uZWN0aW9uIG9wdGlvbnNcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAgICAgc3VwZXIob3B0cyk7XG4gICAgICAgIHRoaXMuc3VwcG9ydHNCaW5hcnkgPSAhb3B0cy5mb3JjZUJhc2U2NDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNwb3J0IG5hbWUuXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJ3ZWJzb2NrZXRcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgc29ja2V0LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgZG9PcGVuKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlY2soKSkge1xuICAgICAgICAgICAgLy8gbGV0IHByb2JlIHRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cmkgPSB0aGlzLnVyaSgpO1xuICAgICAgICBjb25zdCBwcm90b2NvbHMgPSB0aGlzLm9wdHMucHJvdG9jb2xzO1xuICAgICAgICAvLyBSZWFjdCBOYXRpdmUgb25seSBzdXBwb3J0cyB0aGUgJ2hlYWRlcnMnIG9wdGlvbiwgYW5kIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIGFueXRoaW5nIGVsc2UgaXMgcGFzc2VkXG4gICAgICAgIGNvbnN0IG9wdHMgPSBpc1JlYWN0TmF0aXZlXG4gICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICA6IHBpY2sodGhpcy5vcHRzLCBcImFnZW50XCIsIFwicGVyTWVzc2FnZURlZmxhdGVcIiwgXCJwZnhcIiwgXCJrZXlcIiwgXCJwYXNzcGhyYXNlXCIsIFwiY2VydFwiLCBcImNhXCIsIFwiY2lwaGVyc1wiLCBcInJlamVjdFVuYXV0aG9yaXplZFwiLCBcImxvY2FsQWRkcmVzc1wiLCBcInByb3RvY29sVmVyc2lvblwiLCBcIm9yaWdpblwiLCBcIm1heFBheWxvYWRcIiwgXCJmYW1pbHlcIiwgXCJjaGVja1NlcnZlcklkZW50aXR5XCIpO1xuICAgICAgICBpZiAodGhpcy5vcHRzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgb3B0cy5oZWFkZXJzID0gdGhpcy5vcHRzLmV4dHJhSGVhZGVycztcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cyA9XG4gICAgICAgICAgICAgICAgdXNpbmdCcm93c2VyV2ViU29ja2V0ICYmICFpc1JlYWN0TmF0aXZlXG4gICAgICAgICAgICAgICAgICAgID8gcHJvdG9jb2xzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBXZWJTb2NrZXQodXJpLCBwcm90b2NvbHMpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBXZWJTb2NrZXQodXJpKVxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBXZWJTb2NrZXQodXJpLCBwcm90b2NvbHMsIG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXRSZXNlcnZlZChcImVycm9yXCIsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cy5iaW5hcnlUeXBlID0gdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSB8fCBkZWZhdWx0QmluYXJ5VHlwZTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgc29ja2V0XG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy53cy5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmF1dG9VbnJlZikge1xuICAgICAgICAgICAgICAgIHRoaXMud3MuX3NvY2tldC51bnJlZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy53cy5vbmNsb3NlID0gY2xvc2VFdmVudCA9PiB0aGlzLm9uQ2xvc2Uoe1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwid2Vic29ja2V0IGNvbm5lY3Rpb24gY2xvc2VkXCIsXG4gICAgICAgICAgICBjb250ZXh0OiBjbG9zZUV2ZW50XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IGV2ID0+IHRoaXMub25EYXRhKGV2LmRhdGEpO1xuICAgICAgICB0aGlzLndzLm9uZXJyb3IgPSBlID0+IHRoaXMub25FcnJvcihcIndlYnNvY2tldCBlcnJvclwiLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIGRhdGEgdG8gc29ja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgb2YgcGFja2V0cy5cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICB3cml0ZShwYWNrZXRzKSB7XG4gICAgICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcbiAgICAgICAgLy8gZW5jb2RlUGFja2V0IGVmZmljaWVudCBhcyBpdCB1c2VzIFdTIGZyYW1pbmdcbiAgICAgICAgLy8gbm8gbmVlZCBmb3IgZW5jb2RlUGF5bG9hZFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhY2tldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHBhY2tldCA9IHBhY2tldHNbaV07XG4gICAgICAgICAgICBjb25zdCBsYXN0UGFja2V0ID0gaSA9PT0gcGFja2V0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgZW5jb2RlUGFja2V0KHBhY2tldCwgdGhpcy5zdXBwb3J0c0JpbmFyeSwgZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIGNyZWF0ZSBhIG5ldyBvYmplY3QgKEdILTQzNylcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRzID0ge307XG4gICAgICAgICAgICAgICAgaWYgKCF1c2luZ0Jyb3dzZXJXZWJTb2NrZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhY2tldC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbXByZXNzID0gcGFja2V0Lm9wdGlvbnMuY29tcHJlc3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5wZXJNZXNzYWdlRGVmbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0cmluZ1wiID09PSB0eXBlb2YgZGF0YSA/IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpIDogZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuIDwgdGhpcy5vcHRzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuY29tcHJlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTb21ldGltZXMgdGhlIHdlYnNvY2tldCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZCBidXQgdGhlIGJyb3dzZXIgZGlkbid0XG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGNoYW5jZSBvZiBpbmZvcm1pbmcgdXMgYWJvdXQgaXQgeWV0LCBpbiB0aGF0IGNhc2Ugc2VuZCB3aWxsXG4gICAgICAgICAgICAgICAgLy8gdGhyb3cgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNpbmdCcm93c2VyV2ViU29ja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUeXBlRXJyb3IgaXMgdGhyb3duIHdoZW4gcGFzc2luZyB0aGUgc2Vjb25kIGFyZ3VtZW50IG9uIFNhZmFyaVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cy5zZW5kKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cy5zZW5kKGRhdGEsIG9wdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsYXN0UGFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZha2UgZHJhaW5cbiAgICAgICAgICAgICAgICAgICAgLy8gZGVmZXIgdG8gbmV4dCB0aWNrIHRvIGFsbG93IFNvY2tldCB0byBjbGVhciB3cml0ZUJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZHJhaW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuc2V0VGltZW91dEZuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgc29ja2V0LlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgZG9DbG9zZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLndzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0aGlzLndzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLndzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgdXJpIGZvciBjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgdXJpKCkge1xuICAgICAgICBsZXQgcXVlcnkgPSB0aGlzLnF1ZXJ5IHx8IHt9O1xuICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLm9wdHMuc2VjdXJlID8gXCJ3c3NcIiA6IFwid3NcIjtcbiAgICAgICAgbGV0IHBvcnQgPSBcIlwiO1xuICAgICAgICAvLyBhdm9pZCBwb3J0IGlmIGRlZmF1bHQgZm9yIHNjaGVtYVxuICAgICAgICBpZiAodGhpcy5vcHRzLnBvcnQgJiZcbiAgICAgICAgICAgICgoXCJ3c3NcIiA9PT0gc2NoZW1hICYmIE51bWJlcih0aGlzLm9wdHMucG9ydCkgIT09IDQ0MykgfHxcbiAgICAgICAgICAgICAgICAoXCJ3c1wiID09PSBzY2hlbWEgJiYgTnVtYmVyKHRoaXMub3B0cy5wb3J0KSAhPT0gODApKSkge1xuICAgICAgICAgICAgcG9ydCA9IFwiOlwiICsgdGhpcy5vcHRzLnBvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwZW5kIHRpbWVzdGFtcCB0byBVUklcbiAgICAgICAgaWYgKHRoaXMub3B0cy50aW1lc3RhbXBSZXF1ZXN0cykge1xuICAgICAgICAgICAgcXVlcnlbdGhpcy5vcHRzLnRpbWVzdGFtcFBhcmFtXSA9IHllYXN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29tbXVuaWNhdGUgYmluYXJ5IHN1cHBvcnQgY2FwYWJpbGl0aWVzXG4gICAgICAgIGlmICghdGhpcy5zdXBwb3J0c0JpbmFyeSkge1xuICAgICAgICAgICAgcXVlcnkuYjY0ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbmNvZGVkUXVlcnkgPSBlbmNvZGUocXVlcnkpO1xuICAgICAgICBjb25zdCBpcHY2ID0gdGhpcy5vcHRzLmhvc3RuYW1lLmluZGV4T2YoXCI6XCIpICE9PSAtMTtcbiAgICAgICAgcmV0dXJuIChzY2hlbWEgK1xuICAgICAgICAgICAgXCI6Ly9cIiArXG4gICAgICAgICAgICAoaXB2NiA/IFwiW1wiICsgdGhpcy5vcHRzLmhvc3RuYW1lICsgXCJdXCIgOiB0aGlzLm9wdHMuaG9zdG5hbWUpICtcbiAgICAgICAgICAgIHBvcnQgK1xuICAgICAgICAgICAgdGhpcy5vcHRzLnBhdGggK1xuICAgICAgICAgICAgKGVuY29kZWRRdWVyeS5sZW5ndGggPyBcIj9cIiArIGVuY29kZWRRdWVyeSA6IFwiXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmVhdHVyZSBkZXRlY3Rpb24gZm9yIFdlYlNvY2tldC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHdoZXRoZXIgdGhpcyB0cmFuc3BvcnQgaXMgYXZhaWxhYmxlLlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAhIVdlYlNvY2tldDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQb2xsaW5nIH0gZnJvbSBcIi4vcG9sbGluZy5qc1wiO1xuaW1wb3J0IHsgV1MgfSBmcm9tIFwiLi93ZWJzb2NrZXQuanNcIjtcbmV4cG9ydCBjb25zdCB0cmFuc3BvcnRzID0ge1xuICAgIHdlYnNvY2tldDogV1MsXG4gICAgcG9sbGluZzogUG9sbGluZ1xufTtcbiIsIi8vIGltcG9ydGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhbGtuL3BhcnNldXJpXG4vKipcbiAqIFBhcnNlcyBhbiBVUklcbiAqXG4gKiBAYXV0aG9yIFN0ZXZlbiBMZXZpdGhhbiA8c3RldmVubGV2aXRoYW4uY29tPiAoTUlUIGxpY2Vuc2UpXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuY29uc3QgcmUgPSAvXig/Oig/IVteOkBdKzpbXjpAXFwvXSpAKShodHRwfGh0dHBzfHdzfHdzcyk6XFwvXFwvKT8oKD86KChbXjpAXSopKD86OihbXjpAXSopKT8pP0ApPygoPzpbYS1mMC05XXswLDR9Oil7Miw3fVthLWYwLTldezAsNH18W146XFwvPyNdKikoPzo6KFxcZCopKT8pKCgoXFwvKD86W14/I10oPyFbXj8jXFwvXSpcXC5bXj8jXFwvLl0rKD86Wz8jXXwkKSkpKlxcLz8pPyhbXj8jXFwvXSopKSg/OlxcPyhbXiNdKikpPyg/OiMoLiopKT8pLztcbmNvbnN0IHBhcnRzID0gW1xuICAgICdzb3VyY2UnLCAncHJvdG9jb2wnLCAnYXV0aG9yaXR5JywgJ3VzZXJJbmZvJywgJ3VzZXInLCAncGFzc3dvcmQnLCAnaG9zdCcsICdwb3J0JywgJ3JlbGF0aXZlJywgJ3BhdGgnLCAnZGlyZWN0b3J5JywgJ2ZpbGUnLCAncXVlcnknLCAnYW5jaG9yJ1xuXTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgICBjb25zdCBzcmMgPSBzdHIsIGIgPSBzdHIuaW5kZXhPZignWycpLCBlID0gc3RyLmluZGV4T2YoJ10nKTtcbiAgICBpZiAoYiAhPSAtMSAmJiBlICE9IC0xKSB7XG4gICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgYikgKyBzdHIuc3Vic3RyaW5nKGIsIGUpLnJlcGxhY2UoLzovZywgJzsnKSArIHN0ci5zdWJzdHJpbmcoZSwgc3RyLmxlbmd0aCk7XG4gICAgfVxuICAgIGxldCBtID0gcmUuZXhlYyhzdHIgfHwgJycpLCB1cmkgPSB7fSwgaSA9IDE0O1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdXJpW3BhcnRzW2ldXSA9IG1baV0gfHwgJyc7XG4gICAgfVxuICAgIGlmIChiICE9IC0xICYmIGUgIT0gLTEpIHtcbiAgICAgICAgdXJpLnNvdXJjZSA9IHNyYztcbiAgICAgICAgdXJpLmhvc3QgPSB1cmkuaG9zdC5zdWJzdHJpbmcoMSwgdXJpLmhvc3QubGVuZ3RoIC0gMSkucmVwbGFjZSgvOy9nLCAnOicpO1xuICAgICAgICB1cmkuYXV0aG9yaXR5ID0gdXJpLmF1dGhvcml0eS5yZXBsYWNlKCdbJywgJycpLnJlcGxhY2UoJ10nLCAnJykucmVwbGFjZSgvOy9nLCAnOicpO1xuICAgICAgICB1cmkuaXB2NnVyaSA9IHRydWU7XG4gICAgfVxuICAgIHVyaS5wYXRoTmFtZXMgPSBwYXRoTmFtZXModXJpLCB1cmlbJ3BhdGgnXSk7XG4gICAgdXJpLnF1ZXJ5S2V5ID0gcXVlcnlLZXkodXJpLCB1cmlbJ3F1ZXJ5J10pO1xuICAgIHJldHVybiB1cmk7XG59XG5mdW5jdGlvbiBwYXRoTmFtZXMob2JqLCBwYXRoKSB7XG4gICAgY29uc3QgcmVneCA9IC9cXC97Miw5fS9nLCBuYW1lcyA9IHBhdGgucmVwbGFjZShyZWd4LCBcIi9cIikuc3BsaXQoXCIvXCIpO1xuICAgIGlmIChwYXRoLnN1YnN0cigwLCAxKSA9PSAnLycgfHwgcGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmFtZXMuc3BsaWNlKDAsIDEpO1xuICAgIH1cbiAgICBpZiAocGF0aC5zdWJzdHIocGF0aC5sZW5ndGggLSAxLCAxKSA9PSAnLycpIHtcbiAgICAgICAgbmFtZXMuc3BsaWNlKG5hbWVzLmxlbmd0aCAtIDEsIDEpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXM7XG59XG5mdW5jdGlvbiBxdWVyeUtleSh1cmksIHF1ZXJ5KSB7XG4gICAgY29uc3QgZGF0YSA9IHt9O1xuICAgIHF1ZXJ5LnJlcGxhY2UoLyg/Ol58JikoW14mPV0qKT0/KFteJl0qKS9nLCBmdW5jdGlvbiAoJDAsICQxLCAkMikge1xuICAgICAgICBpZiAoJDEpIHtcbiAgICAgICAgICAgIGRhdGFbJDFdID0gJDI7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGF0YTtcbn1cbiIsImltcG9ydCB7IHRyYW5zcG9ydHMgfSBmcm9tIFwiLi90cmFuc3BvcnRzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBpbnN0YWxsVGltZXJGdW5jdGlvbnMsIGJ5dGVMZW5ndGggfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgeyBkZWNvZGUgfSBmcm9tIFwiLi9jb250cmliL3BhcnNlcXMuanNcIjtcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSBcIi4vY29udHJpYi9wYXJzZXVyaS5qc1wiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gXCJAc29ja2V0LmlvL2NvbXBvbmVudC1lbWl0dGVyXCI7XG5pbXBvcnQgeyBwcm90b2NvbCB9IGZyb20gXCJlbmdpbmUuaW8tcGFyc2VyXCI7XG5leHBvcnQgY2xhc3MgU29ja2V0IGV4dGVuZHMgRW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogU29ja2V0IGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSB1cmkgb3Igb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodXJpLCBvcHRzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKHVyaSAmJiBcIm9iamVjdFwiID09PSB0eXBlb2YgdXJpKSB7XG4gICAgICAgICAgICBvcHRzID0gdXJpO1xuICAgICAgICAgICAgdXJpID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJpKSB7XG4gICAgICAgICAgICB1cmkgPSBwYXJzZSh1cmkpO1xuICAgICAgICAgICAgb3B0cy5ob3N0bmFtZSA9IHVyaS5ob3N0O1xuICAgICAgICAgICAgb3B0cy5zZWN1cmUgPSB1cmkucHJvdG9jb2wgPT09IFwiaHR0cHNcIiB8fCB1cmkucHJvdG9jb2wgPT09IFwid3NzXCI7XG4gICAgICAgICAgICBvcHRzLnBvcnQgPSB1cmkucG9ydDtcbiAgICAgICAgICAgIGlmICh1cmkucXVlcnkpXG4gICAgICAgICAgICAgICAgb3B0cy5xdWVyeSA9IHVyaS5xdWVyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRzLmhvc3QpIHtcbiAgICAgICAgICAgIG9wdHMuaG9zdG5hbWUgPSBwYXJzZShvcHRzLmhvc3QpLmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdGFsbFRpbWVyRnVuY3Rpb25zKHRoaXMsIG9wdHMpO1xuICAgICAgICB0aGlzLnNlY3VyZSA9XG4gICAgICAgICAgICBudWxsICE9IG9wdHMuc2VjdXJlXG4gICAgICAgICAgICAgICAgPyBvcHRzLnNlY3VyZVxuICAgICAgICAgICAgICAgIDogdHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIFwiaHR0cHM6XCIgPT09IGxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICBpZiAob3B0cy5ob3N0bmFtZSAmJiAhb3B0cy5wb3J0KSB7XG4gICAgICAgICAgICAvLyBpZiBubyBwb3J0IGlzIHNwZWNpZmllZCBtYW51YWxseSwgdXNlIHRoZSBwcm90b2NvbCBkZWZhdWx0XG4gICAgICAgICAgICBvcHRzLnBvcnQgPSB0aGlzLnNlY3VyZSA/IFwiNDQzXCIgOiBcIjgwXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ob3N0bmFtZSA9XG4gICAgICAgICAgICBvcHRzLmhvc3RuYW1lIHx8XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiA/IGxvY2F0aW9uLmhvc3RuYW1lIDogXCJsb2NhbGhvc3RcIik7XG4gICAgICAgIHRoaXMucG9ydCA9XG4gICAgICAgICAgICBvcHRzLnBvcnQgfHxcbiAgICAgICAgICAgICAgICAodHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIGxvY2F0aW9uLnBvcnRcbiAgICAgICAgICAgICAgICAgICAgPyBsb2NhdGlvbi5wb3J0XG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5zZWN1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCI0NDNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIjgwXCIpO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydHMgPSBvcHRzLnRyYW5zcG9ydHMgfHwgW1wicG9sbGluZ1wiLCBcIndlYnNvY2tldFwiXTtcbiAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJcIjtcbiAgICAgICAgdGhpcy53cml0ZUJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLnByZXZCdWZmZXJMZW4gPSAwO1xuICAgICAgICB0aGlzLm9wdHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHBhdGg6IFwiL2VuZ2luZS5pb1wiLFxuICAgICAgICAgICAgYWdlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSxcbiAgICAgICAgICAgIHVwZ3JhZGU6IHRydWUsXG4gICAgICAgICAgICB0aW1lc3RhbXBQYXJhbTogXCJ0XCIsXG4gICAgICAgICAgICByZW1lbWJlclVwZ3JhZGU6IGZhbHNlLFxuICAgICAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiB0cnVlLFxuICAgICAgICAgICAgcGVyTWVzc2FnZURlZmxhdGU6IHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDEwMjRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmFuc3BvcnRPcHRpb25zOiB7fSxcbiAgICAgICAgICAgIGNsb3NlT25CZWZvcmV1bmxvYWQ6IHRydWVcbiAgICAgICAgfSwgb3B0cyk7XG4gICAgICAgIHRoaXMub3B0cy5wYXRoID0gdGhpcy5vcHRzLnBhdGgucmVwbGFjZSgvXFwvJC8sIFwiXCIpICsgXCIvXCI7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRzLnF1ZXJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLm9wdHMucXVlcnkgPSBkZWNvZGUodGhpcy5vcHRzLnF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgb24gaGFuZHNoYWtlXG4gICAgICAgIHRoaXMuaWQgPSBudWxsO1xuICAgICAgICB0aGlzLnVwZ3JhZGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5waW5nSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB0aGlzLnBpbmdUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgLy8gc2V0IG9uIGhlYXJ0YmVhdFxuICAgICAgICB0aGlzLnBpbmdUaW1lb3V0VGltZXIgPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5jbG9zZU9uQmVmb3JldW5sb2FkKSB7XG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveCBjbG9zZXMgdGhlIGNvbm5lY3Rpb24gd2hlbiB0aGUgXCJiZWZvcmV1bmxvYWRcIiBldmVudCBpcyBlbWl0dGVkIGJ1dCBub3QgQ2hyb21lLiBUaGlzIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlcyBldmVyeSBicm93c2VyIGJlaGF2ZXMgdGhlIHNhbWUgKG5vIFwiZGlzY29ubmVjdFwiIGV2ZW50IGF0IHRoZSBTb2NrZXQuSU8gbGV2ZWwgd2hlbiB0aGUgcGFnZSBpc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NlZC9yZWxvYWRlZClcbiAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaWxlbnRseSBjbG9zZSB0aGUgdHJhbnNwb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ob3N0bmFtZSAhPT0gXCJsb2NhbGhvc3RcIikge1xuICAgICAgICAgICAgICAgIHRoaXMub2ZmbGluZUV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZShcInRyYW5zcG9ydCBjbG9zZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJuZXR3b3JrIGNvbm5lY3Rpb24gbG9zdFwiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5vZmZsaW5lRXZlbnRMaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRyYW5zcG9ydCBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0cmFuc3BvcnQgbmFtZVxuICAgICAqIEByZXR1cm4ge1RyYW5zcG9ydH1cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBjcmVhdGVUcmFuc3BvcnQobmFtZSkge1xuICAgICAgICBjb25zdCBxdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0cy5xdWVyeSk7XG4gICAgICAgIC8vIGFwcGVuZCBlbmdpbmUuaW8gcHJvdG9jb2wgaWRlbnRpZmllclxuICAgICAgICBxdWVyeS5FSU8gPSBwcm90b2NvbDtcbiAgICAgICAgLy8gdHJhbnNwb3J0IG5hbWVcbiAgICAgICAgcXVlcnkudHJhbnNwb3J0ID0gbmFtZTtcbiAgICAgICAgLy8gc2Vzc2lvbiBpZCBpZiB3ZSBhbHJlYWR5IGhhdmUgb25lXG4gICAgICAgIGlmICh0aGlzLmlkKVxuICAgICAgICAgICAgcXVlcnkuc2lkID0gdGhpcy5pZDtcbiAgICAgICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0cy50cmFuc3BvcnRPcHRpb25zW25hbWVdLCB0aGlzLm9wdHMsIHtcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgc29ja2V0OiB0aGlzLFxuICAgICAgICAgICAgaG9zdG5hbWU6IHRoaXMuaG9zdG5hbWUsXG4gICAgICAgICAgICBzZWN1cmU6IHRoaXMuc2VjdXJlLFxuICAgICAgICAgICAgcG9ydDogdGhpcy5wb3J0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IHRyYW5zcG9ydHNbbmFtZV0ob3B0cyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIHRyYW5zcG9ydCB0byB1c2UgYW5kIHN0YXJ0cyBwcm9iZS5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIG9wZW4oKSB7XG4gICAgICAgIGxldCB0cmFuc3BvcnQ7XG4gICAgICAgIGlmICh0aGlzLm9wdHMucmVtZW1iZXJVcGdyYWRlICYmXG4gICAgICAgICAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzICYmXG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydHMuaW5kZXhPZihcIndlYnNvY2tldFwiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IFwid2Vic29ja2V0XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoMCA9PT0gdGhpcy50cmFuc3BvcnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRW1pdCBlcnJvciBvbiBuZXh0IHRpY2sgc28gaXQgY2FuIGJlIGxpc3RlbmVkIHRvXG4gICAgICAgICAgICB0aGlzLnNldFRpbWVvdXRGbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJlcnJvclwiLCBcIk5vIHRyYW5zcG9ydHMgYXZhaWxhYmxlXCIpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmFuc3BvcnQgPSB0aGlzLnRyYW5zcG9ydHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJvcGVuaW5nXCI7XG4gICAgICAgIC8vIFJldHJ5IHdpdGggdGhlIG5leHQgdHJhbnNwb3J0IGlmIHRoZSB0cmFuc3BvcnQgaXMgZGlzYWJsZWQgKGpzb25wOiBmYWxzZSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KHRyYW5zcG9ydCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0cy5zaGlmdCgpO1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNwb3J0Lm9wZW4oKTtcbiAgICAgICAgdGhpcy5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY3VycmVudCB0cmFuc3BvcnQuIERpc2FibGVzIHRoZSBleGlzdGluZyBvbmUgKGlmIGFueSkuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBzZXRUcmFuc3BvcnQodHJhbnNwb3J0KSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zcG9ydCkge1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHVwIHRyYW5zcG9ydFxuICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgICAgICAgLy8gc2V0IHVwIHRyYW5zcG9ydCBsaXN0ZW5lcnNcbiAgICAgICAgdHJhbnNwb3J0XG4gICAgICAgICAgICAub24oXCJkcmFpblwiLCB0aGlzLm9uRHJhaW4uYmluZCh0aGlzKSlcbiAgICAgICAgICAgIC5vbihcInBhY2tldFwiLCB0aGlzLm9uUGFja2V0LmJpbmQodGhpcykpXG4gICAgICAgICAgICAub24oXCJlcnJvclwiLCB0aGlzLm9uRXJyb3IuYmluZCh0aGlzKSlcbiAgICAgICAgICAgIC5vbihcImNsb3NlXCIsIHJlYXNvbiA9PiB0aGlzLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIiwgcmVhc29uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2JlcyBhIHRyYW5zcG9ydC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0cmFuc3BvcnQgbmFtZVxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIHByb2JlKG5hbWUpIHtcbiAgICAgICAgbGV0IHRyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KG5hbWUpO1xuICAgICAgICBsZXQgZmFpbGVkID0gZmFsc2U7XG4gICAgICAgIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgb25UcmFuc3BvcnRPcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZhaWxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0cmFuc3BvcnQuc2VuZChbeyB0eXBlOiBcInBpbmdcIiwgZGF0YTogXCJwcm9iZVwiIH1dKTtcbiAgICAgICAgICAgIHRyYW5zcG9ydC5vbmNlKFwicGFja2V0XCIsIG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZhaWxlZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChcInBvbmdcIiA9PT0gbXNnLnR5cGUgJiYgXCJwcm9iZVwiID09PSBtc2cuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZ3JhZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwidXBncmFkaW5nXCIsIHRyYW5zcG9ydCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNwb3J0KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gXCJ3ZWJzb2NrZXRcIiA9PT0gdHJhbnNwb3J0Lm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnBhdXNlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWlsZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiY2xvc2VkXCIgPT09IHRoaXMucmVhZHlTdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zcG9ydCh0cmFuc3BvcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0LnNlbmQoW3sgdHlwZTogXCJ1cGdyYWRlXCIgfV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJ1cGdyYWRlXCIsIHRyYW5zcG9ydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGdyYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXCJwcm9iZSBlcnJvclwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBlcnIudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwidXBncmFkZUVycm9yXCIsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIGZyZWV6ZVRyYW5zcG9ydCgpIHtcbiAgICAgICAgICAgIGlmIChmYWlsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gQW55IGNhbGxiYWNrIGNhbGxlZCBieSB0cmFuc3BvcnQgc2hvdWxkIGJlIGlnbm9yZWQgc2luY2Ugbm93XG4gICAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgdHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgICAgICAgICB0cmFuc3BvcnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhhbmRsZSBhbnkgZXJyb3IgdGhhdCBoYXBwZW5zIHdoaWxlIHByb2JpbmdcbiAgICAgICAgY29uc3Qgb25lcnJvciA9IGVyciA9PiB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcInByb2JlIGVycm9yOiBcIiArIGVycik7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBlcnJvci50cmFuc3BvcnQgPSB0cmFuc3BvcnQubmFtZTtcbiAgICAgICAgICAgIGZyZWV6ZVRyYW5zcG9ydCgpO1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJ1cGdyYWRlRXJyb3JcIiwgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBvblRyYW5zcG9ydENsb3NlKCkge1xuICAgICAgICAgICAgb25lcnJvcihcInRyYW5zcG9ydCBjbG9zZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiB0aGUgc29ja2V0IGlzIGNsb3NlZCB3aGlsZSB3ZSdyZSBwcm9iaW5nXG4gICAgICAgIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgICAgICAgICBvbmVycm9yKFwic29ja2V0IGNsb3NlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHRoZSBzb2NrZXQgaXMgdXBncmFkZWQgd2hpbGUgd2UncmUgcHJvYmluZ1xuICAgICAgICBmdW5jdGlvbiBvbnVwZ3JhZGUodG8pIHtcbiAgICAgICAgICAgIGlmICh0cmFuc3BvcnQgJiYgdG8ubmFtZSAhPT0gdHJhbnNwb3J0Lm5hbWUpIHtcbiAgICAgICAgICAgICAgICBmcmVlemVUcmFuc3BvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycyBvbiB0aGUgdHJhbnNwb3J0IGFuZCBvbiBzZWxmXG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgICAgICB0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJvcGVuXCIsIG9uVHJhbnNwb3J0T3Blbik7XG4gICAgICAgICAgICB0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCBvbmVycm9yKTtcbiAgICAgICAgICAgIHRyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsIG9uVHJhbnNwb3J0Q2xvc2UpO1xuICAgICAgICAgICAgdGhpcy5vZmYoXCJjbG9zZVwiLCBvbmNsb3NlKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKFwidXBncmFkaW5nXCIsIG9udXBncmFkZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRyYW5zcG9ydC5vbmNlKFwib3BlblwiLCBvblRyYW5zcG9ydE9wZW4pO1xuICAgICAgICB0cmFuc3BvcnQub25jZShcImVycm9yXCIsIG9uZXJyb3IpO1xuICAgICAgICB0cmFuc3BvcnQub25jZShcImNsb3NlXCIsIG9uVHJhbnNwb3J0Q2xvc2UpO1xuICAgICAgICB0aGlzLm9uY2UoXCJjbG9zZVwiLCBvbmNsb3NlKTtcbiAgICAgICAgdGhpcy5vbmNlKFwidXBncmFkaW5nXCIsIG9udXBncmFkZSk7XG4gICAgICAgIHRyYW5zcG9ydC5vcGVuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIGNvbm5lY3Rpb24gaXMgZGVlbWVkIG9wZW4uXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwib3BlblwiO1xuICAgICAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gXCJ3ZWJzb2NrZXRcIiA9PT0gdGhpcy50cmFuc3BvcnQubmFtZTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciBgcmVhZHlTdGF0ZWAgaW4gY2FzZSBhbiBgb3BlbmBcbiAgICAgICAgLy8gbGlzdGVuZXIgYWxyZWFkeSBjbG9zZWQgdGhlIHNvY2tldFxuICAgICAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSAmJlxuICAgICAgICAgICAgdGhpcy5vcHRzLnVwZ3JhZGUgJiZcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnBhdXNlKSB7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICBjb25zdCBsID0gdGhpcy51cGdyYWRlcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvYmUodGhpcy51cGdyYWRlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uUGFja2V0KHBhY2tldCkge1xuICAgICAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgICAgICAgXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgICAgICAgXCJjbG9zaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwYWNrZXRcIiwgcGFja2V0KTtcbiAgICAgICAgICAgIC8vIFNvY2tldCBpcyBsaXZlIC0gYW55IHBhY2tldCBjb3VudHNcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiaGVhcnRiZWF0XCIpO1xuICAgICAgICAgICAgc3dpdGNoIChwYWNrZXQudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJvcGVuXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25IYW5kc2hha2UoSlNPTi5wYXJzZShwYWNrZXQuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicGluZ1wiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0UGluZ1RpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kUGFja2V0KFwicG9uZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBvbmdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXCJzZXJ2ZXIgZXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgZXJyLmNvZGUgPSBwYWNrZXQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZGF0YVwiLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwibWVzc2FnZVwiLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGhhbmRzaGFrZSBjb21wbGV0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBoYW5kc2hha2Ugb2JqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgb25IYW5kc2hha2UoZGF0YSkge1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImhhbmRzaGFrZVwiLCBkYXRhKTtcbiAgICAgICAgdGhpcy5pZCA9IGRhdGEuc2lkO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydC5xdWVyeS5zaWQgPSBkYXRhLnNpZDtcbiAgICAgICAgdGhpcy51cGdyYWRlcyA9IHRoaXMuZmlsdGVyVXBncmFkZXMoZGF0YS51cGdyYWRlcyk7XG4gICAgICAgIHRoaXMucGluZ0ludGVydmFsID0gZGF0YS5waW5nSW50ZXJ2YWw7XG4gICAgICAgIHRoaXMucGluZ1RpbWVvdXQgPSBkYXRhLnBpbmdUaW1lb3V0O1xuICAgICAgICB0aGlzLm1heFBheWxvYWQgPSBkYXRhLm1heFBheWxvYWQ7XG4gICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICAgIC8vIEluIGNhc2Ugb3BlbiBoYW5kbGVyIGNsb3NlcyBzb2NrZXRcbiAgICAgICAgaWYgKFwiY2xvc2VkXCIgPT09IHRoaXMucmVhZHlTdGF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5yZXNldFBpbmdUaW1lb3V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYW5kIHJlc2V0cyBwaW5nIHRpbWVvdXQgdGltZXIgYmFzZWQgb24gc2VydmVyIHBpbmdzLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgcmVzZXRQaW5nVGltZW91dCgpIHtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRGbih0aGlzLnBpbmdUaW1lb3V0VGltZXIpO1xuICAgICAgICB0aGlzLnBpbmdUaW1lb3V0VGltZXIgPSB0aGlzLnNldFRpbWVvdXRGbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UoXCJwaW5nIHRpbWVvdXRcIik7XG4gICAgICAgIH0sIHRoaXMucGluZ0ludGVydmFsICsgdGhpcy5waW5nVGltZW91dCk7XG4gICAgICAgIGlmICh0aGlzLm9wdHMuYXV0b1VucmVmKSB7XG4gICAgICAgICAgICB0aGlzLnBpbmdUaW1lb3V0VGltZXIudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgb24gYGRyYWluYCBldmVudFxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG4gICAgb25EcmFpbigpIHtcbiAgICAgICAgdGhpcy53cml0ZUJ1ZmZlci5zcGxpY2UoMCwgdGhpcy5wcmV2QnVmZmVyTGVuKTtcbiAgICAgICAgLy8gc2V0dGluZyBwcmV2QnVmZmVyTGVuID0gMCBpcyB2ZXJ5IGltcG9ydGFudFxuICAgICAgICAvLyBmb3IgZXhhbXBsZSwgd2hlbiB1cGdyYWRpbmcsIHVwZ3JhZGUgcGFja2V0IGlzIHNlbnQgb3ZlcixcbiAgICAgICAgLy8gYW5kIGEgbm9uemVybyBwcmV2QnVmZmVyTGVuIGNvdWxkIGNhdXNlIHByb2JsZW1zIG9uIGBkcmFpbmBcbiAgICAgICAgdGhpcy5wcmV2QnVmZmVyTGVuID0gMDtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImRyYWluXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZsdXNoIHdyaXRlIGJ1ZmZlcnMuXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgaWYgKFwiY2xvc2VkXCIgIT09IHRoaXMucmVhZHlTdGF0ZSAmJlxuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQud3JpdGFibGUgJiZcbiAgICAgICAgICAgICF0aGlzLnVwZ3JhZGluZyAmJlxuICAgICAgICAgICAgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhY2tldHMgPSB0aGlzLmdldFdyaXRhYmxlUGFja2V0cygpO1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQuc2VuZChwYWNrZXRzKTtcbiAgICAgICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgY3VycmVudCBsZW5ndGggb2Ygd3JpdGVCdWZmZXJcbiAgICAgICAgICAgIC8vIHNwbGljZSB3cml0ZUJ1ZmZlciBhbmQgY2FsbGJhY2tCdWZmZXIgb24gYGRyYWluYFxuICAgICAgICAgICAgdGhpcy5wcmV2QnVmZmVyTGVuID0gcGFja2V0cy5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImZsdXNoXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZSB0aGUgZW5jb2RlZCBzaXplIG9mIHRoZSB3cml0ZUJ1ZmZlciBpcyBiZWxvdyB0aGUgbWF4UGF5bG9hZCB2YWx1ZSBzZW50IGJ5IHRoZSBzZXJ2ZXIgKG9ubHkgZm9yIEhUVFBcbiAgICAgKiBsb25nLXBvbGxpbmcpXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGdldFdyaXRhYmxlUGFja2V0cygpIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkQ2hlY2tQYXlsb2FkU2l6ZSA9IHRoaXMubWF4UGF5bG9hZCAmJlxuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQubmFtZSA9PT0gXCJwb2xsaW5nXCIgJiZcbiAgICAgICAgICAgIHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoID4gMTtcbiAgICAgICAgaWYgKCFzaG91bGRDaGVja1BheWxvYWRTaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53cml0ZUJ1ZmZlcjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGF5bG9hZFNpemUgPSAxOyAvLyBmaXJzdCBwYWNrZXQgdHlwZVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLndyaXRlQnVmZmVyW2ldLmRhdGE7XG4gICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHBheWxvYWRTaXplICs9IGJ5dGVMZW5ndGgoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA+IDAgJiYgcGF5bG9hZFNpemUgPiB0aGlzLm1heFBheWxvYWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cml0ZUJ1ZmZlci5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBheWxvYWRTaXplICs9IDI7IC8vIHNlcGFyYXRvciArIHBhY2tldCB0eXBlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud3JpdGVCdWZmZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgbWVzc2FnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge1NvY2tldH0gZm9yIGNoYWluaW5nLlxuICAgICAqIEBhcGkgcHVibGljXG4gICAgICovXG4gICAgd3JpdGUobXNnLCBvcHRpb25zLCBmbikge1xuICAgICAgICB0aGlzLnNlbmRQYWNrZXQoXCJtZXNzYWdlXCIsIG1zZywgb3B0aW9ucywgZm4pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2VuZChtc2csIG9wdGlvbnMsIGZuKSB7XG4gICAgICAgIHRoaXMuc2VuZFBhY2tldChcIm1lc3NhZ2VcIiwgbXNnLCBvcHRpb25zLCBmbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYWNrZXQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBzZW5kUGFja2V0KHR5cGUsIGRhdGEsIG9wdGlvbnMsIGZuKSB7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBkYXRhKSB7XG4gICAgICAgICAgICBmbiA9IGRhdGE7XG4gICAgICAgICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBmbiA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJjbG9zaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fCBcImNsb3NlZFwiID09PSB0aGlzLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5jb21wcmVzcyA9IGZhbHNlICE9PSBvcHRpb25zLmNvbXByZXNzO1xuICAgICAgICBjb25zdCBwYWNrZXQgPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwYWNrZXRDcmVhdGVcIiwgcGFja2V0KTtcbiAgICAgICAgdGhpcy53cml0ZUJ1ZmZlci5wdXNoKHBhY2tldCk7XG4gICAgICAgIGlmIChmbilcbiAgICAgICAgICAgIHRoaXMub25jZShcImZsdXNoXCIsIGZuKTtcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25DbG9zZShcImZvcmNlZCBjbG9zZVwiKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNsZWFudXBBbmRDbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub2ZmKFwidXBncmFkZVwiLCBjbGVhbnVwQW5kQ2xvc2UpO1xuICAgICAgICAgICAgdGhpcy5vZmYoXCJ1cGdyYWRlRXJyb3JcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHdhaXRGb3JVcGdyYWRlID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gd2FpdCBmb3IgdXBncmFkZSB0byBmaW5pc2ggc2luY2Ugd2UgY2FuJ3Qgc2VuZCBwYWNrZXRzIHdoaWxlIHBhdXNpbmcgYSB0cmFuc3BvcnRcbiAgICAgICAgICAgIHRoaXMub25jZShcInVwZ3JhZGVcIiwgY2xlYW51cEFuZENsb3NlKTtcbiAgICAgICAgICAgIHRoaXMub25jZShcInVwZ3JhZGVFcnJvclwiLCBjbGVhbnVwQW5kQ2xvc2UpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fCBcIm9wZW5cIiA9PT0gdGhpcy5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBcImNsb3NpbmdcIjtcbiAgICAgICAgICAgIGlmICh0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25jZShcImRyYWluXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXBncmFkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YWl0Rm9yVXBncmFkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy51cGdyYWRpbmcpIHtcbiAgICAgICAgICAgICAgICB3YWl0Rm9yVXBncmFkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gdHJhbnNwb3J0IGVycm9yXG4gICAgICpcbiAgICAgKiBAYXBpIHByaXZhdGVcbiAgICAgKi9cbiAgICBvbkVycm9yKGVycikge1xuICAgICAgICBTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgdGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGVycm9yXCIsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHRyYW5zcG9ydCBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBhcGkgcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uQ2xvc2UocmVhc29uLCBkZXNjcmlwdGlvbikge1xuICAgICAgICBpZiAoXCJvcGVuaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgICAgICAgXCJvcGVuXCIgPT09IHRoaXMucmVhZHlTdGF0ZSB8fFxuICAgICAgICAgICAgXCJjbG9zaW5nXCIgPT09IHRoaXMucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgLy8gY2xlYXIgdGltZXJzXG4gICAgICAgICAgICB0aGlzLmNsZWFyVGltZW91dEZuKHRoaXMucGluZ1RpbWVvdXRUaW1lcik7XG4gICAgICAgICAgICAvLyBzdG9wIGV2ZW50IGZyb20gZmlyaW5nIGFnYWluIGZvciB0cmFuc3BvcnRcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycyhcImNsb3NlXCIpO1xuICAgICAgICAgICAgLy8gZW5zdXJlIHRyYW5zcG9ydCB3b24ndCBzdGF5IG9wZW5cbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgICAgICAgICAvLyBpZ25vcmUgZnVydGhlciB0cmFuc3BvcnQgY29tbXVuaWNhdGlvblxuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlbW92ZUV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMub2ZmbGluZUV2ZW50TGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNldCByZWFkeSBzdGF0ZVxuICAgICAgICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjtcbiAgICAgICAgICAgIC8vIGNsZWFyIHNlc3Npb24gaWRcbiAgICAgICAgICAgIHRoaXMuaWQgPSBudWxsO1xuICAgICAgICAgICAgLy8gZW1pdCBjbG9zZSBldmVudFxuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJjbG9zZVwiLCByZWFzb24sIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIC8vIGNsZWFuIGJ1ZmZlcnMgYWZ0ZXIsIHNvIHVzZXJzIGNhbiBzdGlsbFxuICAgICAgICAgICAgLy8gZ3JhYiB0aGUgYnVmZmVycyBvbiBgY2xvc2VgIGV2ZW50XG4gICAgICAgICAgICB0aGlzLndyaXRlQnVmZmVyID0gW107XG4gICAgICAgICAgICB0aGlzLnByZXZCdWZmZXJMZW4gPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbHRlcnMgdXBncmFkZXMsIHJldHVybmluZyBvbmx5IHRob3NlIG1hdGNoaW5nIGNsaWVudCB0cmFuc3BvcnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gc2VydmVyIHVwZ3JhZGVzXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICpcbiAgICAgKi9cbiAgICBmaWx0ZXJVcGdyYWRlcyh1cGdyYWRlcykge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZFVwZ3JhZGVzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgaiA9IHVwZ3JhZGVzLmxlbmd0aDtcbiAgICAgICAgZm9yICg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh+dGhpcy50cmFuc3BvcnRzLmluZGV4T2YodXBncmFkZXNbaV0pKVxuICAgICAgICAgICAgICAgIGZpbHRlcmVkVXBncmFkZXMucHVzaCh1cGdyYWRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkVXBncmFkZXM7XG4gICAgfVxufVxuU29ja2V0LnByb3RvY29sID0gcHJvdG9jb2w7XG4iLCJpbXBvcnQgeyBTb2NrZXQgfSBmcm9tIFwiLi9zb2NrZXQuanNcIjtcbmV4cG9ydCB7IFNvY2tldCB9O1xuZXhwb3J0IGNvbnN0IHByb3RvY29sID0gU29ja2V0LnByb3RvY29sO1xuZXhwb3J0IHsgVHJhbnNwb3J0IH0gZnJvbSBcIi4vdHJhbnNwb3J0LmpzXCI7XG5leHBvcnQgeyB0cmFuc3BvcnRzIH0gZnJvbSBcIi4vdHJhbnNwb3J0cy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgaW5zdGFsbFRpbWVyRnVuY3Rpb25zIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IHsgcGFyc2UgfSBmcm9tIFwiLi9jb250cmliL3BhcnNldXJpLmpzXCI7XG4iLCJjb25zdCB3aXRoTmF0aXZlQXJyYXlCdWZmZXIgPSB0eXBlb2YgQXJyYXlCdWZmZXIgPT09IFwiZnVuY3Rpb25cIjtcbmNvbnN0IGlzVmlldyA9IChvYmopID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gQXJyYXlCdWZmZXIuaXNWaWV3KG9iailcbiAgICAgICAgOiBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7XG59O1xuY29uc3QgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3Qgd2l0aE5hdGl2ZUJsb2IgPSB0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgKHR5cGVvZiBCbG9iICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwoQmxvYikgPT09IFwiW29iamVjdCBCbG9iQ29uc3RydWN0b3JdXCIpO1xuY29uc3Qgd2l0aE5hdGl2ZUZpbGUgPSB0eXBlb2YgRmlsZSA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwoRmlsZSkgPT09IFwiW29iamVjdCBGaWxlQ29uc3RydWN0b3JdXCIpO1xuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGEgQnVmZmVyLCBhbiBBcnJheUJ1ZmZlciwgYSBCbG9iIG9yIGEgRmlsZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNCaW5hcnkob2JqKSB7XG4gICAgcmV0dXJuICgod2l0aE5hdGl2ZUFycmF5QnVmZmVyICYmIChvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBpc1ZpZXcob2JqKSkpIHx8XG4gICAgICAgICh3aXRoTmF0aXZlQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iKSB8fFxuICAgICAgICAod2l0aE5hdGl2ZUZpbGUgJiYgb2JqIGluc3RhbmNlb2YgRmlsZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0JpbmFyeShvYmosIHRvSlNPTikge1xuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYgKGhhc0JpbmFyeShvYmpbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaXNCaW5hcnkob2JqKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9iai50b0pTT04gJiZcbiAgICAgICAgdHlwZW9mIG9iai50b0pTT04gPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICBhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBoYXNCaW5hcnkob2JqLnRvSlNPTigpLCB0cnVlKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpICYmIGhhc0JpbmFyeShvYmpba2V5XSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbiIsImltcG9ydCB7IGlzQmluYXJ5IH0gZnJvbSBcIi4vaXMtYmluYXJ5LmpzXCI7XG4vKipcbiAqIFJlcGxhY2VzIGV2ZXJ5IEJ1ZmZlciB8IEFycmF5QnVmZmVyIHwgQmxvYiB8IEZpbGUgaW4gcGFja2V0IHdpdGggYSBudW1iZXJlZCBwbGFjZWhvbGRlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFja2V0IC0gc29ja2V0LmlvIGV2ZW50IHBhY2tldFxuICogQHJldHVybiB7T2JqZWN0fSB3aXRoIGRlY29uc3RydWN0ZWQgcGFja2V0IGFuZCBsaXN0IG9mIGJ1ZmZlcnNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29uc3RydWN0UGFja2V0KHBhY2tldCkge1xuICAgIGNvbnN0IGJ1ZmZlcnMgPSBbXTtcbiAgICBjb25zdCBwYWNrZXREYXRhID0gcGFja2V0LmRhdGE7XG4gICAgY29uc3QgcGFjayA9IHBhY2tldDtcbiAgICBwYWNrLmRhdGEgPSBfZGVjb25zdHJ1Y3RQYWNrZXQocGFja2V0RGF0YSwgYnVmZmVycyk7XG4gICAgcGFjay5hdHRhY2htZW50cyA9IGJ1ZmZlcnMubGVuZ3RoOyAvLyBudW1iZXIgb2YgYmluYXJ5ICdhdHRhY2htZW50cydcbiAgICByZXR1cm4geyBwYWNrZXQ6IHBhY2ssIGJ1ZmZlcnM6IGJ1ZmZlcnMgfTtcbn1cbmZ1bmN0aW9uIF9kZWNvbnN0cnVjdFBhY2tldChkYXRhLCBidWZmZXJzKSB7XG4gICAgaWYgKCFkYXRhKVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBpZiAoaXNCaW5hcnkoZGF0YSkpIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB7IF9wbGFjZWhvbGRlcjogdHJ1ZSwgbnVtOiBidWZmZXJzLmxlbmd0aCB9O1xuICAgICAgICBidWZmZXJzLnB1c2goZGF0YSk7XG4gICAgICAgIHJldHVybiBwbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICBjb25zdCBuZXdEYXRhID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdEYXRhW2ldID0gX2RlY29uc3RydWN0UGFja2V0KGRhdGFbaV0sIGJ1ZmZlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdEYXRhO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiAhKGRhdGEgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgICBjb25zdCBuZXdEYXRhID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSkge1xuICAgICAgICAgICAgICAgIG5ld0RhdGFba2V5XSA9IF9kZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0sIGJ1ZmZlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdEYXRhO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cbi8qKlxuICogUmVjb25zdHJ1Y3RzIGEgYmluYXJ5IHBhY2tldCBmcm9tIGl0cyBwbGFjZWhvbGRlciBwYWNrZXQgYW5kIGJ1ZmZlcnNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFja2V0IC0gZXZlbnQgcGFja2V0IHdpdGggcGxhY2Vob2xkZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBidWZmZXJzIC0gYmluYXJ5IGJ1ZmZlcnMgdG8gcHV0IGluIHBsYWNlaG9sZGVyIHBvc2l0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fSByZWNvbnN0cnVjdGVkIHBhY2tldFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVjb25zdHJ1Y3RQYWNrZXQocGFja2V0LCBidWZmZXJzKSB7XG4gICAgcGFja2V0LmRhdGEgPSBfcmVjb25zdHJ1Y3RQYWNrZXQocGFja2V0LmRhdGEsIGJ1ZmZlcnMpO1xuICAgIHBhY2tldC5hdHRhY2htZW50cyA9IHVuZGVmaW5lZDsgLy8gbm8gbG9uZ2VyIHVzZWZ1bFxuICAgIHJldHVybiBwYWNrZXQ7XG59XG5mdW5jdGlvbiBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YSwgYnVmZmVycykge1xuICAgIGlmICghZGF0YSlcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5fcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcnNbZGF0YS5udW1dOyAvLyBhcHByb3ByaWF0ZSBidWZmZXIgKHNob3VsZCBiZSBuYXR1cmFsIG9yZGVyIGFueXdheSlcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGFbaV0gPSBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtpXSwgYnVmZmVycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgZGF0YVtrZXldID0gX3JlY29uc3RydWN0UGFja2V0KGRhdGFba2V5XSwgYnVmZmVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG59XG4iLCJpbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcIkBzb2NrZXQuaW8vY29tcG9uZW50LWVtaXR0ZXJcIjtcbmltcG9ydCB7IGRlY29uc3RydWN0UGFja2V0LCByZWNvbnN0cnVjdFBhY2tldCB9IGZyb20gXCIuL2JpbmFyeS5qc1wiO1xuaW1wb3J0IHsgaXNCaW5hcnksIGhhc0JpbmFyeSB9IGZyb20gXCIuL2lzLWJpbmFyeS5qc1wiO1xuLyoqXG4gKiBQcm90b2NvbCB2ZXJzaW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHByb3RvY29sID0gNTtcbmV4cG9ydCB2YXIgUGFja2V0VHlwZTtcbihmdW5jdGlvbiAoUGFja2V0VHlwZSkge1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkNPTk5FQ1RcIl0gPSAwXSA9IFwiQ09OTkVDVFwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkRJU0NPTk5FQ1RcIl0gPSAxXSA9IFwiRElTQ09OTkVDVFwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkVWRU5UXCJdID0gMl0gPSBcIkVWRU5UXCI7XG4gICAgUGFja2V0VHlwZVtQYWNrZXRUeXBlW1wiQUNLXCJdID0gM10gPSBcIkFDS1wiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkNPTk5FQ1RfRVJST1JcIl0gPSA0XSA9IFwiQ09OTkVDVF9FUlJPUlwiO1xuICAgIFBhY2tldFR5cGVbUGFja2V0VHlwZVtcIkJJTkFSWV9FVkVOVFwiXSA9IDVdID0gXCJCSU5BUllfRVZFTlRcIjtcbiAgICBQYWNrZXRUeXBlW1BhY2tldFR5cGVbXCJCSU5BUllfQUNLXCJdID0gNl0gPSBcIkJJTkFSWV9BQ0tcIjtcbn0pKFBhY2tldFR5cGUgfHwgKFBhY2tldFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBBIHNvY2tldC5pbyBFbmNvZGVyIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBjbGFzcyBFbmNvZGVyIHtcbiAgICAvKipcbiAgICAgKiBFbmNvZGVyIGNvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZXBsYWNlciAtIGN1c3RvbSByZXBsYWNlciB0byBwYXNzIGRvd24gdG8gSlNPTi5wYXJzZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlcGxhY2VyKSB7XG4gICAgICAgIHRoaXMucmVwbGFjZXIgPSByZXBsYWNlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlIGEgcGFja2V0IGFzIGEgc2luZ2xlIHN0cmluZyBpZiBub24tYmluYXJ5LCBvciBhcyBhXG4gICAgICogYnVmZmVyIHNlcXVlbmNlLCBkZXBlbmRpbmcgb24gcGFja2V0IHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gcGFja2V0IG9iamVjdFxuICAgICAqL1xuICAgIGVuY29kZShvYmopIHtcbiAgICAgICAgaWYgKG9iai50eXBlID09PSBQYWNrZXRUeXBlLkVWRU5UIHx8IG9iai50eXBlID09PSBQYWNrZXRUeXBlLkFDSykge1xuICAgICAgICAgICAgaWYgKGhhc0JpbmFyeShvYmopKSB7XG4gICAgICAgICAgICAgICAgb2JqLnR5cGUgPVxuICAgICAgICAgICAgICAgICAgICBvYmoudHlwZSA9PT0gUGFja2V0VHlwZS5FVkVOVFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBQYWNrZXRUeXBlLkJJTkFSWV9FVkVOVFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBQYWNrZXRUeXBlLkJJTkFSWV9BQ0s7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQXNCaW5hcnkob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3RoaXMuZW5jb2RlQXNTdHJpbmcob2JqKV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZSBwYWNrZXQgYXMgc3RyaW5nLlxuICAgICAqL1xuICAgIGVuY29kZUFzU3RyaW5nKG9iaikge1xuICAgICAgICAvLyBmaXJzdCBpcyB0eXBlXG4gICAgICAgIGxldCBzdHIgPSBcIlwiICsgb2JqLnR5cGU7XG4gICAgICAgIC8vIGF0dGFjaG1lbnRzIGlmIHdlIGhhdmUgdGhlbVxuICAgICAgICBpZiAob2JqLnR5cGUgPT09IFBhY2tldFR5cGUuQklOQVJZX0VWRU5UIHx8XG4gICAgICAgICAgICBvYmoudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfQUNLKSB7XG4gICAgICAgICAgICBzdHIgKz0gb2JqLmF0dGFjaG1lbnRzICsgXCItXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIG5hbWVzcGFjZSBvdGhlciB0aGFuIGAvYFxuICAgICAgICAvLyB3ZSBhcHBlbmQgaXQgZm9sbG93ZWQgYnkgYSBjb21tYSBgLGBcbiAgICAgICAgaWYgKG9iai5uc3AgJiYgXCIvXCIgIT09IG9iai5uc3ApIHtcbiAgICAgICAgICAgIHN0ciArPSBvYmoubnNwICsgXCIsXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgdGhlIGlkXG4gICAgICAgIGlmIChudWxsICE9IG9iai5pZCkge1xuICAgICAgICAgICAgc3RyICs9IG9iai5pZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBqc29uIGRhdGFcbiAgICAgICAgaWYgKG51bGwgIT0gb2JqLmRhdGEpIHtcbiAgICAgICAgICAgIHN0ciArPSBKU09OLnN0cmluZ2lmeShvYmouZGF0YSwgdGhpcy5yZXBsYWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlIHBhY2tldCBhcyAnYnVmZmVyIHNlcXVlbmNlJyBieSByZW1vdmluZyBibG9icywgYW5kXG4gICAgICogZGVjb25zdHJ1Y3RpbmcgcGFja2V0IGludG8gb2JqZWN0IHdpdGggcGxhY2Vob2xkZXJzIGFuZFxuICAgICAqIGEgbGlzdCBvZiBidWZmZXJzLlxuICAgICAqL1xuICAgIGVuY29kZUFzQmluYXJ5KG9iaikge1xuICAgICAgICBjb25zdCBkZWNvbnN0cnVjdGlvbiA9IGRlY29uc3RydWN0UGFja2V0KG9iaik7XG4gICAgICAgIGNvbnN0IHBhY2sgPSB0aGlzLmVuY29kZUFzU3RyaW5nKGRlY29uc3RydWN0aW9uLnBhY2tldCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBkZWNvbnN0cnVjdGlvbi5idWZmZXJzO1xuICAgICAgICBidWZmZXJzLnVuc2hpZnQocGFjayk7IC8vIGFkZCBwYWNrZXQgaW5mbyB0byBiZWdpbm5pbmcgb2YgZGF0YSBsaXN0XG4gICAgICAgIHJldHVybiBidWZmZXJzOyAvLyB3cml0ZSBhbGwgdGhlIGJ1ZmZlcnNcbiAgICB9XG59XG4vKipcbiAqIEEgc29ja2V0LmlvIERlY29kZXIgaW5zdGFuY2VcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGRlY29kZXJcbiAqL1xuZXhwb3J0IGNsYXNzIERlY29kZXIgZXh0ZW5kcyBFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBEZWNvZGVyIGNvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZXZpdmVyIC0gY3VzdG9tIHJldml2ZXIgdG8gcGFzcyBkb3duIHRvIEpTT04uc3RyaW5naWZ5XG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmV2aXZlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJldml2ZXIgPSByZXZpdmVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGFuIGVuY29kZWQgcGFja2V0IHN0cmluZyBpbnRvIHBhY2tldCBKU09OLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9iaiAtIGVuY29kZWQgcGFja2V0XG4gICAgICovXG4gICAgYWRkKG9iaikge1xuICAgICAgICBsZXQgcGFja2V0O1xuICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcGFja2V0ID0gdGhpcy5kZWNvZGVTdHJpbmcob2JqKTtcbiAgICAgICAgICAgIGlmIChwYWNrZXQudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfRVZFTlQgfHxcbiAgICAgICAgICAgICAgICBwYWNrZXQudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfQUNLKSB7XG4gICAgICAgICAgICAgICAgLy8gYmluYXJ5IHBhY2tldCdzIGpzb25cbiAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IgPSBuZXcgQmluYXJ5UmVjb25zdHJ1Y3RvcihwYWNrZXQpO1xuICAgICAgICAgICAgICAgIC8vIG5vIGF0dGFjaG1lbnRzLCBsYWJlbGVkIGJpbmFyeSBidXQgbm8gYmluYXJ5IGRhdGEgdG8gZm9sbG93XG4gICAgICAgICAgICAgICAgaWYgKHBhY2tldC5hdHRhY2htZW50cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJkZWNvZGVkXCIsIHBhY2tldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbm9uLWJpbmFyeSBmdWxsIHBhY2tldFxuICAgICAgICAgICAgICAgIHN1cGVyLmVtaXRSZXNlcnZlZChcImRlY29kZWRcIiwgcGFja2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0JpbmFyeShvYmopIHx8IG9iai5iYXNlNjQpIHtcbiAgICAgICAgICAgIC8vIHJhdyBiaW5hcnkgZGF0YVxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJnb3QgYmluYXJ5IGRhdGEgd2hlbiBub3QgcmVjb25zdHJ1Y3RpbmcgYSBwYWNrZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYWNrZXQgPSB0aGlzLnJlY29uc3RydWN0b3IudGFrZUJpbmFyeURhdGEob2JqKTtcbiAgICAgICAgICAgICAgICBpZiAocGFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlY2VpdmVkIGZpbmFsIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3RydWN0b3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5lbWl0UmVzZXJ2ZWQoXCJkZWNvZGVkXCIsIHBhY2tldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0eXBlOiBcIiArIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlIGEgcGFja2V0IFN0cmluZyAoSlNPTiBkYXRhKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcGFja2V0XG4gICAgICovXG4gICAgZGVjb2RlU3RyaW5nKHN0cikge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIC8vIGxvb2sgdXAgdHlwZVxuICAgICAgICBjb25zdCBwID0ge1xuICAgICAgICAgICAgdHlwZTogTnVtYmVyKHN0ci5jaGFyQXQoMCkpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoUGFja2V0VHlwZVtwLnR5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInVua25vd24gcGFja2V0IHR5cGUgXCIgKyBwLnR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvb2sgdXAgYXR0YWNobWVudHMgaWYgdHlwZSBiaW5hcnlcbiAgICAgICAgaWYgKHAudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfRVZFTlQgfHxcbiAgICAgICAgICAgIHAudHlwZSA9PT0gUGFja2V0VHlwZS5CSU5BUllfQUNLKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IGkgKyAxO1xuICAgICAgICAgICAgd2hpbGUgKHN0ci5jaGFyQXQoKytpKSAhPT0gXCItXCIgJiYgaSAhPSBzdHIubGVuZ3RoKSB7IH1cbiAgICAgICAgICAgIGNvbnN0IGJ1ZiA9IHN0ci5zdWJzdHJpbmcoc3RhcnQsIGkpO1xuICAgICAgICAgICAgaWYgKGJ1ZiAhPSBOdW1iZXIoYnVmKSB8fCBzdHIuY2hhckF0KGkpICE9PSBcIi1cIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgYXR0YWNobWVudHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwLmF0dGFjaG1lbnRzID0gTnVtYmVyKGJ1Zik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbG9vayB1cCBuYW1lc3BhY2UgKGlmIGFueSlcbiAgICAgICAgaWYgKFwiL1wiID09PSBzdHIuY2hhckF0KGkgKyAxKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAoXCIsXCIgPT09IGMpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChpID09PSBzdHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAubnNwID0gc3RyLnN1YnN0cmluZyhzdGFydCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwLm5zcCA9IFwiL1wiO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvb2sgdXAgaWRcbiAgICAgICAgY29uc3QgbmV4dCA9IHN0ci5jaGFyQXQoaSArIDEpO1xuICAgICAgICBpZiAoXCJcIiAhPT0gbmV4dCAmJiBOdW1iZXIobmV4dCkgPT0gbmV4dCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBjIHx8IE51bWJlcihjKSAhPSBjKSB7XG4gICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpID09PSBzdHIubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAuaWQgPSBOdW1iZXIoc3RyLnN1YnN0cmluZyhzdGFydCwgaSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBsb29rIHVwIGpzb24gZGF0YVxuICAgICAgICBpZiAoc3RyLmNoYXJBdCgrK2kpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gdGhpcy50cnlQYXJzZShzdHIuc3Vic3RyKGkpKTtcbiAgICAgICAgICAgIGlmIChEZWNvZGVyLmlzUGF5bG9hZFZhbGlkKHAudHlwZSwgcGF5bG9hZCkpIHtcbiAgICAgICAgICAgICAgICBwLmRhdGEgPSBwYXlsb2FkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwYXlsb2FkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICB0cnlQYXJzZShzdHIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0ciwgdGhpcy5yZXZpdmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBpc1BheWxvYWRWYWxpZCh0eXBlLCBwYXlsb2FkKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkNPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkRJU0NPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5DT05ORUNUX0VSUk9SOlxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5FVkVOVDpcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5CSU5BUllfRVZFTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocGF5bG9hZCkgJiYgcGF5bG9hZC5sZW5ndGggPiAwO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkFDSzpcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5CSU5BUllfQUNLOlxuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlYWxsb2NhdGVzIGEgcGFyc2VyJ3MgcmVzb3VyY2VzXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgdGhpcy5yZWNvbnN0cnVjdG9yLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQSBtYW5hZ2VyIG9mIGEgYmluYXJ5IGV2ZW50J3MgJ2J1ZmZlciBzZXF1ZW5jZScuIFNob3VsZFxuICogYmUgY29uc3RydWN0ZWQgd2hlbmV2ZXIgYSBwYWNrZXQgb2YgdHlwZSBCSU5BUllfRVZFTlQgaXNcbiAqIGRlY29kZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhY2tldFxuICogQHJldHVybiB7QmluYXJ5UmVjb25zdHJ1Y3Rvcn0gaW5pdGlhbGl6ZWQgcmVjb25zdHJ1Y3RvclxuICovXG5jbGFzcyBCaW5hcnlSZWNvbnN0cnVjdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihwYWNrZXQpIHtcbiAgICAgICAgdGhpcy5wYWNrZXQgPSBwYWNrZXQ7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IFtdO1xuICAgICAgICB0aGlzLnJlY29uUGFjayA9IHBhY2tldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGJlIGNhbGxlZCB3aGVuIGJpbmFyeSBkYXRhIHJlY2VpdmVkIGZyb20gY29ubmVjdGlvblxuICAgICAqIGFmdGVyIGEgQklOQVJZX0VWRU5UIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QnVmZmVyIHwgQXJyYXlCdWZmZXJ9IGJpbkRhdGEgLSB0aGUgcmF3IGJpbmFyeSBkYXRhIHJlY2VpdmVkXG4gICAgICogQHJldHVybiB7bnVsbCB8IE9iamVjdH0gcmV0dXJucyBudWxsIGlmIG1vcmUgYmluYXJ5IGRhdGEgaXMgZXhwZWN0ZWQgb3JcbiAgICAgKiAgIGEgcmVjb25zdHJ1Y3RlZCBwYWNrZXQgb2JqZWN0IGlmIGFsbCBidWZmZXJzIGhhdmUgYmVlbiByZWNlaXZlZC5cbiAgICAgKi9cbiAgICB0YWtlQmluYXJ5RGF0YShiaW5EYXRhKSB7XG4gICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKGJpbkRhdGEpO1xuICAgICAgICBpZiAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gdGhpcy5yZWNvblBhY2suYXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgIC8vIGRvbmUgd2l0aCBidWZmZXIgbGlzdFxuICAgICAgICAgICAgY29uc3QgcGFja2V0ID0gcmVjb25zdHJ1Y3RQYWNrZXQodGhpcy5yZWNvblBhY2ssIHRoaXMuYnVmZmVycyk7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBwYWNrZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFucyB1cCBiaW5hcnkgcGFja2V0IHJlY29uc3RydWN0aW9uIHZhcmlhYmxlcy5cbiAgICAgKi9cbiAgICBmaW5pc2hlZFJlY29uc3RydWN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlY29uUGFjayA9IG51bGw7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IFtdO1xuICAgIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBvbihvYmosIGV2LCBmbikge1xuICAgIG9iai5vbihldiwgZm4pO1xuICAgIHJldHVybiBmdW5jdGlvbiBzdWJEZXN0cm95KCkge1xuICAgICAgICBvYmoub2ZmKGV2LCBmbik7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IFBhY2tldFR5cGUgfSBmcm9tIFwic29ja2V0LmlvLXBhcnNlclwiO1xuaW1wb3J0IHsgb24gfSBmcm9tIFwiLi9vbi5qc1wiO1xuaW1wb3J0IHsgRW1pdHRlciwgfSBmcm9tIFwiQHNvY2tldC5pby9jb21wb25lbnQtZW1pdHRlclwiO1xuLyoqXG4gKiBJbnRlcm5hbCBldmVudHMuXG4gKiBUaGVzZSBldmVudHMgY2FuJ3QgYmUgZW1pdHRlZCBieSB0aGUgdXNlci5cbiAqL1xuY29uc3QgUkVTRVJWRURfRVZFTlRTID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgY29ubmVjdDogMSxcbiAgICBjb25uZWN0X2Vycm9yOiAxLFxuICAgIGRpc2Nvbm5lY3Q6IDEsXG4gICAgZGlzY29ubmVjdGluZzogMSxcbiAgICAvLyBFdmVudEVtaXR0ZXIgcmVzZXJ2ZWQgZXZlbnRzOiBodHRwczovL25vZGVqcy5vcmcvYXBpL2V2ZW50cy5odG1sI2V2ZW50c19ldmVudF9uZXdsaXN0ZW5lclxuICAgIG5ld0xpc3RlbmVyOiAxLFxuICAgIHJlbW92ZUxpc3RlbmVyOiAxLFxufSk7XG5leHBvcnQgY2xhc3MgU29ja2V0IGV4dGVuZHMgRW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogYFNvY2tldGAgY29uc3RydWN0b3IuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaW8sIG5zcCwgb3B0cykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5zZW5kQnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuaWRzID0gMDtcbiAgICAgICAgdGhpcy5hY2tzID0ge307XG4gICAgICAgIHRoaXMuZmxhZ3MgPSB7fTtcbiAgICAgICAgdGhpcy5pbyA9IGlvO1xuICAgICAgICB0aGlzLm5zcCA9IG5zcDtcbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5hdXRoKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGggPSBvcHRzLmF1dGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW8uX2F1dG9Db25uZWN0KVxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNvY2tldCBpcyBjdXJyZW50bHkgZGlzY29ubmVjdGVkXG4gICAgICovXG4gICAgZ2V0IGRpc2Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNvbm5lY3RlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIG9wZW4sIGNsb3NlIGFuZCBwYWNrZXQgZXZlbnRzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN1YkV2ZW50cygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3VicylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaW8gPSB0aGlzLmlvO1xuICAgICAgICB0aGlzLnN1YnMgPSBbXG4gICAgICAgICAgICBvbihpbywgXCJvcGVuXCIsIHRoaXMub25vcGVuLmJpbmQodGhpcykpLFxuICAgICAgICAgICAgb24oaW8sIFwicGFja2V0XCIsIHRoaXMub25wYWNrZXQuYmluZCh0aGlzKSksXG4gICAgICAgICAgICBvbihpbywgXCJlcnJvclwiLCB0aGlzLm9uZXJyb3IuYmluZCh0aGlzKSksXG4gICAgICAgICAgICBvbihpbywgXCJjbG9zZVwiLCB0aGlzLm9uY2xvc2UuYmluZCh0aGlzKSksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIFNvY2tldCB3aWxsIHRyeSB0byByZWNvbm5lY3Qgd2hlbiBpdHMgTWFuYWdlciBjb25uZWN0cyBvciByZWNvbm5lY3RzXG4gICAgICovXG4gICAgZ2V0IGFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zdWJzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcIk9wZW5zXCIgdGhlIHNvY2tldC5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgdGhpcy5zdWJFdmVudHMoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlvW1wiX3JlY29ubmVjdGluZ1wiXSlcbiAgICAgICAgICAgIHRoaXMuaW8ub3BlbigpOyAvLyBlbnN1cmUgb3BlblxuICAgICAgICBpZiAoXCJvcGVuXCIgPT09IHRoaXMuaW8uX3JlYWR5U3RhdGUpXG4gICAgICAgICAgICB0aGlzLm9ub3BlbigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGNvbm5lY3QoKVxuICAgICAqL1xuICAgIG9wZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBgbWVzc2FnZWAgZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2VuZCguLi5hcmdzKSB7XG4gICAgICAgIGFyZ3MudW5zaGlmdChcIm1lc3NhZ2VcIik7XG4gICAgICAgIHRoaXMuZW1pdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIGBlbWl0YC5cbiAgICAgKiBJZiB0aGUgZXZlbnQgaXMgaW4gYGV2ZW50c2AsIGl0J3MgZW1pdHRlZCBub3JtYWxseS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBlbWl0KGV2LCAuLi5hcmdzKSB7XG4gICAgICAgIGlmIChSRVNFUlZFRF9FVkVOVFMuaGFzT3duUHJvcGVydHkoZXYpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiJyArIGV2ICsgJ1wiIGlzIGEgcmVzZXJ2ZWQgZXZlbnQgbmFtZScpO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3MudW5zaGlmdChldik7XG4gICAgICAgIGNvbnN0IHBhY2tldCA9IHtcbiAgICAgICAgICAgIHR5cGU6IFBhY2tldFR5cGUuRVZFTlQsXG4gICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICB9O1xuICAgICAgICBwYWNrZXQub3B0aW9ucyA9IHt9O1xuICAgICAgICBwYWNrZXQub3B0aW9ucy5jb21wcmVzcyA9IHRoaXMuZmxhZ3MuY29tcHJlc3MgIT09IGZhbHNlO1xuICAgICAgICAvLyBldmVudCBhY2sgY2FsbGJhY2tcbiAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmlkcysrO1xuICAgICAgICAgICAgY29uc3QgYWNrID0gYXJncy5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyQWNrQ2FsbGJhY2soaWQsIGFjayk7XG4gICAgICAgICAgICBwYWNrZXQuaWQgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1RyYW5zcG9ydFdyaXRhYmxlID0gdGhpcy5pby5lbmdpbmUgJiZcbiAgICAgICAgICAgIHRoaXMuaW8uZW5naW5lLnRyYW5zcG9ydCAmJlxuICAgICAgICAgICAgdGhpcy5pby5lbmdpbmUudHJhbnNwb3J0LndyaXRhYmxlO1xuICAgICAgICBjb25zdCBkaXNjYXJkUGFja2V0ID0gdGhpcy5mbGFncy52b2xhdGlsZSAmJiAoIWlzVHJhbnNwb3J0V3JpdGFibGUgfHwgIXRoaXMuY29ubmVjdGVkKTtcbiAgICAgICAgaWYgKGRpc2NhcmRQYWNrZXQpIHtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlPdXRnb2luZ0xpc3RlbmVycyhwYWNrZXQpO1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQocGFja2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKHBhY2tldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGFncyA9IHt9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcmVnaXN0ZXJBY2tDYWxsYmFjayhpZCwgYWNrKSB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLmZsYWdzLnRpbWVvdXQ7XG4gICAgICAgIGlmICh0aW1lb3V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYWNrc1tpZF0gPSBhY2s7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCB0aW1lciA9IHRoaXMuaW8uc2V0VGltZW91dEZuKCgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFja3NbaWRdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlbmRCdWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZW5kQnVmZmVyW2ldLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRCdWZmZXIuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjay5jYWxsKHRoaXMsIG5ldyBFcnJvcihcIm9wZXJhdGlvbiBoYXMgdGltZWQgb3V0XCIpKTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIHRoaXMuYWNrc1tpZF0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5pby5jbGVhclRpbWVvdXRGbih0aW1lcik7XG4gICAgICAgICAgICBhY2suYXBwbHkodGhpcywgW251bGwsIC4uLmFyZ3NdKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwYWNrZXQocGFja2V0KSB7XG4gICAgICAgIHBhY2tldC5uc3AgPSB0aGlzLm5zcDtcbiAgICAgICAgdGhpcy5pby5fcGFja2V0KHBhY2tldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBgb3BlbmAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ub3BlbigpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmF1dGggPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGgoKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhY2tldCh7IHR5cGU6IFBhY2tldFR5cGUuQ09OTkVDVCwgZGF0YSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQoeyB0eXBlOiBQYWNrZXRUeXBlLkNPTk5FQ1QsIGRhdGE6IHRoaXMuYXV0aCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBlbmdpbmUgb3IgbWFuYWdlciBgZXJyb3JgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25lcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJjb25uZWN0X2Vycm9yXCIsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHVwb24gZW5naW5lIGBjbG9zZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVhc29uXG4gICAgICogQHBhcmFtIGRlc2NyaXB0aW9uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmNsb3NlKHJlYXNvbiwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgZGVsZXRlIHRoaXMuaWQ7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZGlzY29ubmVjdFwiLCByZWFzb24sIGRlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdpdGggc29ja2V0IHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWNrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ucGFja2V0KHBhY2tldCkge1xuICAgICAgICBjb25zdCBzYW1lTmFtZXNwYWNlID0gcGFja2V0Lm5zcCA9PT0gdGhpcy5uc3A7XG4gICAgICAgIGlmICghc2FtZU5hbWVzcGFjZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3dpdGNoIChwYWNrZXQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkNPTk5FQ1Q6XG4gICAgICAgICAgICAgICAgaWYgKHBhY2tldC5kYXRhICYmIHBhY2tldC5kYXRhLnNpZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHBhY2tldC5kYXRhLnNpZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmNvbm5lY3QoaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJjb25uZWN0X2Vycm9yXCIsIG5ldyBFcnJvcihcIkl0IHNlZW1zIHlvdSBhcmUgdHJ5aW5nIHRvIHJlYWNoIGEgU29ja2V0LklPIHNlcnZlciBpbiB2Mi54IHdpdGggYSB2My54IGNsaWVudCwgYnV0IHRoZXkgYXJlIG5vdCBjb21wYXRpYmxlIChtb3JlIGluZm9ybWF0aW9uIGhlcmU6IGh0dHBzOi8vc29ja2V0LmlvL2RvY3MvdjMvbWlncmF0aW5nLWZyb20tMi14LXRvLTMtMC8pXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuRVZFTlQ6XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuQklOQVJZX0VWRU5UOlxuICAgICAgICAgICAgICAgIHRoaXMub25ldmVudChwYWNrZXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQYWNrZXRUeXBlLkFDSzpcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5CSU5BUllfQUNLOlxuICAgICAgICAgICAgICAgIHRoaXMub25hY2socGFja2V0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGFja2V0VHlwZS5ESVNDT05ORUNUOlxuICAgICAgICAgICAgICAgIHRoaXMub25kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBhY2tldFR5cGUuQ09OTkVDVF9FUlJPUjpcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IocGFja2V0LmRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGVyci5kYXRhID0gcGFja2V0LmRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImNvbm5lY3RfZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHNlcnZlciBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWNrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uZXZlbnQocGFja2V0KSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBwYWNrZXQuZGF0YSB8fCBbXTtcbiAgICAgICAgaWYgKG51bGwgIT0gcGFja2V0LmlkKSB7XG4gICAgICAgICAgICBhcmdzLnB1c2godGhpcy5hY2socGFja2V0LmlkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVjZWl2ZUJ1ZmZlci5wdXNoKE9iamVjdC5mcmVlemUoYXJncykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVtaXRFdmVudChhcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLl9hbnlMaXN0ZW5lcnMgJiYgdGhpcy5fYW55TGlzdGVuZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIGxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmVtaXQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2R1Y2VzIGFuIGFjayBjYWxsYmFjayB0byBlbWl0IHdpdGggYW4gZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGFjayhpZCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgbGV0IHNlbnQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBwcmV2ZW50IGRvdWJsZSBjYWxsYmFja3NcbiAgICAgICAgICAgIGlmIChzZW50KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHNlbnQgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5wYWNrZXQoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFBhY2tldFR5cGUuQUNLLFxuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGEgc2VydmVyIGFja25vd2xlZ2VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhY2tldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25hY2socGFja2V0KSB7XG4gICAgICAgIGNvbnN0IGFjayA9IHRoaXMuYWNrc1twYWNrZXQuaWRdO1xuICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgYWNrKSB7XG4gICAgICAgICAgICBhY2suYXBwbHkodGhpcywgcGFja2V0LmRhdGEpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWNrc1twYWNrZXQuaWRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIHNlcnZlciBjb25uZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmNvbm5lY3QoaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZW1pdEJ1ZmZlcmVkKCk7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY29ubmVjdFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdCBidWZmZXJlZCBldmVudHMgKHJlY2VpdmVkIGFuZCBlbWl0dGVkKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZW1pdEJ1ZmZlcmVkKCkge1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIuZm9yRWFjaCgoYXJncykgPT4gdGhpcy5lbWl0RXZlbnQoYXJncykpO1xuICAgICAgICB0aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goKHBhY2tldCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlPdXRnb2luZ0xpc3RlbmVycyhwYWNrZXQpO1xuICAgICAgICAgICAgdGhpcy5wYWNrZXQocGFja2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzZXJ2ZXIgZGlzY29ubmVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25kaXNjb25uZWN0KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5vbmNsb3NlKFwiaW8gc2VydmVyIGRpc2Nvbm5lY3RcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGZvcmNlZCBjbGllbnQvc2VydmVyIHNpZGUgZGlzY29ubmVjdGlvbnMsXG4gICAgICogdGhpcyBtZXRob2QgZW5zdXJlcyB0aGUgbWFuYWdlciBzdG9wcyB0cmFja2luZyB1cyBhbmRcbiAgICAgKiB0aGF0IHJlY29ubmVjdGlvbnMgZG9uJ3QgZ2V0IHRyaWdnZXJlZCBmb3IgdGhpcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicykge1xuICAgICAgICAgICAgLy8gY2xlYW4gc3Vic2NyaXB0aW9ucyB0byBhdm9pZCByZWNvbm5lY3Rpb25zXG4gICAgICAgICAgICB0aGlzLnN1YnMuZm9yRWFjaCgoc3ViRGVzdHJveSkgPT4gc3ViRGVzdHJveSgpKTtcbiAgICAgICAgICAgIHRoaXMuc3VicyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlvW1wiX2Rlc3Ryb3lcIl0odGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXQgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBhY2tldCh7IHR5cGU6IFBhY2tldFR5cGUuRElTQ09OTkVDVCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgc29ja2V0IGZyb20gcG9vbFxuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAvLyBmaXJlIGV2ZW50c1xuICAgICAgICAgICAgdGhpcy5vbmNsb3NlKFwiaW8gY2xpZW50IGRpc2Nvbm5lY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBkaXNjb25uZWN0KClcbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb21wcmVzcyBmbGFnLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXByZXNzIC0gaWYgYHRydWVgLCBjb21wcmVzc2VzIHRoZSBzZW5kaW5nIGRhdGFcbiAgICAgKiBAcmV0dXJuIHNlbGZcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29tcHJlc3MoY29tcHJlc3MpIHtcbiAgICAgICAgdGhpcy5mbGFncy5jb21wcmVzcyA9IGNvbXByZXNzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhIG1vZGlmaWVyIGZvciBhIHN1YnNlcXVlbnQgZXZlbnQgZW1pc3Npb24gdGhhdCB0aGUgZXZlbnQgbWVzc2FnZSB3aWxsIGJlIGRyb3BwZWQgd2hlbiB0aGlzIHNvY2tldCBpcyBub3RcbiAgICAgKiByZWFkeSB0byBzZW5kIG1lc3NhZ2VzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgdm9sYXRpbGUoKSB7XG4gICAgICAgIHRoaXMuZmxhZ3Mudm9sYXRpbGUgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhIG1vZGlmaWVyIGZvciBhIHN1YnNlcXVlbnQgZXZlbnQgZW1pc3Npb24gdGhhdCB0aGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBhbiBlcnJvciB3aGVuIHRoZVxuICAgICAqIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHdpdGhvdXQgYW4gYWNrbm93bGVkZ2VtZW50IGZyb20gdGhlIHNlcnZlcjpcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIHNvY2tldC50aW1lb3V0KDUwMDApLmVtaXQoXCJteS1ldmVudFwiLCAoZXJyKSA9PiB7XG4gICAgICogICBpZiAoZXJyKSB7XG4gICAgICogICAgIC8vIHRoZSBzZXJ2ZXIgZGlkIG5vdCBhY2tub3dsZWRnZSB0aGUgZXZlbnQgaW4gdGhlIGdpdmVuIGRlbGF5XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBzZWxmXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHRpbWVvdXQodGltZW91dCkge1xuICAgICAgICB0aGlzLmZsYWdzLnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLiBUaGUgZXZlbnQgbmFtZSBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZVxuICAgICAqIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9uQW55KGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuX2FueUxpc3RlbmVycyA9IHRoaXMuX2FueUxpc3RlbmVycyB8fCBbXTtcbiAgICAgICAgdGhpcy5fYW55TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLiBUaGUgZXZlbnQgbmFtZSBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZVxuICAgICAqIGNhbGxiYWNrLiBUaGUgbGlzdGVuZXIgaXMgYWRkZWQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbGlzdGVuZXJzIGFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHByZXBlbmRBbnkobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fYW55TGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzIHx8IFtdO1xuICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgZmlyZWQgd2hlbiBhbnkgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lclxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBvZmZBbnkobGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hbnlMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fYW55TGlzdGVuZXJzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IGxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hbnlMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdGhhdCBhcmUgbGlzdGVuaW5nIGZvciBhbnkgZXZlbnQgdGhhdCBpcyBzcGVjaWZpZWQuIFRoaXMgYXJyYXkgY2FuIGJlIG1hbmlwdWxhdGVkLFxuICAgICAqIGUuZy4gdG8gcmVtb3ZlIGxpc3RlbmVycy5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBsaXN0ZW5lcnNBbnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbnlMaXN0ZW5lcnMgfHwgW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgZmlyZWQgd2hlbiBhbnkgZXZlbnQgaXMgZW1pdHRlZC4gVGhlIGV2ZW50IG5hbWUgaXMgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGVcbiAgICAgKiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lclxuICAgICAqXG4gICAgICogPHByZT48Y29kZT5cbiAgICAgKlxuICAgICAqIHNvY2tldC5vbkFueU91dGdvaW5nKChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coZXZlbnQpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogPC9wcmU+PC9jb2RlPlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9uQW55T3V0Z29pbmcobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMgPSB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycyB8fCBbXTtcbiAgICAgICAgdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGZpcmVkIHdoZW4gYW55IGV2ZW50IGlzIGVtaXR0ZWQuIFRoZSBldmVudCBuYW1lIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlXG4gICAgICogY2FsbGJhY2suIFRoZSBsaXN0ZW5lciBpcyBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXJcbiAgICAgKlxuICAgICAqIDxwcmU+PGNvZGU+XG4gICAgICpcbiAgICAgKiBzb2NrZXQucHJlcGVuZEFueU91dGdvaW5nKChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coZXZlbnQpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogPC9wcmU+PC9jb2RlPlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHByZXBlbmRBbnlPdXRnb2luZyhsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycyA9IHRoaXMuX2FueU91dGdvaW5nTGlzdGVuZXJzIHx8IFtdO1xuICAgICAgICB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIGFueSBldmVudCBpcyBlbWl0dGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICpcbiAgICAgKiA8cHJlPjxjb2RlPlxuICAgICAqXG4gICAgICogY29uc3QgaGFuZGxlciA9IChldmVudCwgLi4uYXJncykgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coZXZlbnQpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHNvY2tldC5vbkFueU91dGdvaW5nKGhhbmRsZXIpO1xuICAgICAqXG4gICAgICogLy8gdGhlbiBsYXRlclxuICAgICAqIHNvY2tldC5vZmZBbnlPdXRnb2luZyhoYW5kbGVyKTtcbiAgICAgKlxuICAgICAqIDwvcHJlPjwvY29kZT5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBvZmZBbnlPdXRnb2luZyhsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXRoaXMuX2FueU91dGdvaW5nTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2FueU91dGdvaW5nTGlzdGVuZXJzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IGxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0aGF0IGFyZSBsaXN0ZW5pbmcgZm9yIGFueSBldmVudCB0aGF0IGlzIHNwZWNpZmllZC4gVGhpcyBhcnJheSBjYW4gYmUgbWFuaXB1bGF0ZWQsXG4gICAgICogZS5nLiB0byByZW1vdmUgbGlzdGVuZXJzLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGxpc3RlbmVyc0FueU91dGdvaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMgfHwgW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmeSB0aGUgbGlzdGVuZXJzIGZvciBlYWNoIHBhY2tldCBzZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG5vdGlmeU91dGdvaW5nTGlzdGVuZXJzKHBhY2tldCkge1xuICAgICAgICBpZiAodGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMgJiYgdGhpcy5fYW55T3V0Z29pbmdMaXN0ZW5lcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9hbnlPdXRnb2luZ0xpc3RlbmVycy5zbGljZSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKipcbiAqIEluaXRpYWxpemUgYmFja29mZiB0aW1lciB3aXRoIGBvcHRzYC5cbiAqXG4gKiAtIGBtaW5gIGluaXRpYWwgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgWzEwMF1cbiAqIC0gYG1heGAgbWF4IHRpbWVvdXQgWzEwMDAwXVxuICogLSBgaml0dGVyYCBbMF1cbiAqIC0gYGZhY3RvcmAgWzJdXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBCYWNrb2ZmKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB0aGlzLm1zID0gb3B0cy5taW4gfHwgMTAwO1xuICAgIHRoaXMubWF4ID0gb3B0cy5tYXggfHwgMTAwMDA7XG4gICAgdGhpcy5mYWN0b3IgPSBvcHRzLmZhY3RvciB8fCAyO1xuICAgIHRoaXMuaml0dGVyID0gb3B0cy5qaXR0ZXIgPiAwICYmIG9wdHMuaml0dGVyIDw9IDEgPyBvcHRzLmppdHRlciA6IDA7XG4gICAgdGhpcy5hdHRlbXB0cyA9IDA7XG59XG4vKipcbiAqIFJldHVybiB0aGUgYmFja29mZiBkdXJhdGlvbi5cbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5CYWNrb2ZmLnByb3RvdHlwZS5kdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbXMgPSB0aGlzLm1zICogTWF0aC5wb3codGhpcy5mYWN0b3IsIHRoaXMuYXR0ZW1wdHMrKyk7XG4gICAgaWYgKHRoaXMuaml0dGVyKSB7XG4gICAgICAgIHZhciByYW5kID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgdmFyIGRldmlhdGlvbiA9IE1hdGguZmxvb3IocmFuZCAqIHRoaXMuaml0dGVyICogbXMpO1xuICAgICAgICBtcyA9IChNYXRoLmZsb29yKHJhbmQgKiAxMCkgJiAxKSA9PSAwID8gbXMgLSBkZXZpYXRpb24gOiBtcyArIGRldmlhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWluKG1zLCB0aGlzLm1heCkgfCAwO1xufTtcbi8qKlxuICogUmVzZXQgdGhlIG51bWJlciBvZiBhdHRlbXB0cy5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5CYWNrb2ZmLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmF0dGVtcHRzID0gMDtcbn07XG4vKipcbiAqIFNldCB0aGUgbWluaW11bSBkdXJhdGlvblxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbkJhY2tvZmYucHJvdG90eXBlLnNldE1pbiA9IGZ1bmN0aW9uIChtaW4pIHtcbiAgICB0aGlzLm1zID0gbWluO1xufTtcbi8qKlxuICogU2V0IHRoZSBtYXhpbXVtIGR1cmF0aW9uXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuQmFja29mZi5wcm90b3R5cGUuc2V0TWF4ID0gZnVuY3Rpb24gKG1heCkge1xuICAgIHRoaXMubWF4ID0gbWF4O1xufTtcbi8qKlxuICogU2V0IHRoZSBqaXR0ZXJcbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5CYWNrb2ZmLnByb3RvdHlwZS5zZXRKaXR0ZXIgPSBmdW5jdGlvbiAoaml0dGVyKSB7XG4gICAgdGhpcy5qaXR0ZXIgPSBqaXR0ZXI7XG59O1xuIiwiaW1wb3J0IHsgU29ja2V0IGFzIEVuZ2luZSwgaW5zdGFsbFRpbWVyRnVuY3Rpb25zLCB9IGZyb20gXCJlbmdpbmUuaW8tY2xpZW50XCI7XG5pbXBvcnQgeyBTb2NrZXQgfSBmcm9tIFwiLi9zb2NrZXQuanNcIjtcbmltcG9ydCAqIGFzIHBhcnNlciBmcm9tIFwic29ja2V0LmlvLXBhcnNlclwiO1xuaW1wb3J0IHsgb24gfSBmcm9tIFwiLi9vbi5qc1wiO1xuaW1wb3J0IHsgQmFja29mZiB9IGZyb20gXCIuL2NvbnRyaWIvYmFja28yLmpzXCI7XG5pbXBvcnQgeyBFbWl0dGVyLCB9IGZyb20gXCJAc29ja2V0LmlvL2NvbXBvbmVudC1lbWl0dGVyXCI7XG5leHBvcnQgY2xhc3MgTWFuYWdlciBleHRlbmRzIEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgb3B0cykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubnNwcyA9IHt9O1xuICAgICAgICB0aGlzLnN1YnMgPSBbXTtcbiAgICAgICAgaWYgKHVyaSAmJiBcIm9iamVjdFwiID09PSB0eXBlb2YgdXJpKSB7XG4gICAgICAgICAgICBvcHRzID0gdXJpO1xuICAgICAgICAgICAgdXJpID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgICAgICBvcHRzLnBhdGggPSBvcHRzLnBhdGggfHwgXCIvc29ja2V0LmlvXCI7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICAgIGluc3RhbGxUaW1lckZ1bmN0aW9ucyh0aGlzLCBvcHRzKTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3Rpb24ob3B0cy5yZWNvbm5lY3Rpb24gIT09IGZhbHNlKTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3Rpb25BdHRlbXB0cyhvcHRzLnJlY29ubmVjdGlvbkF0dGVtcHRzIHx8IEluZmluaXR5KTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3Rpb25EZWxheShvcHRzLnJlY29ubmVjdGlvbkRlbGF5IHx8IDEwMDApO1xuICAgICAgICB0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KG9wdHMucmVjb25uZWN0aW9uRGVsYXlNYXggfHwgNTAwMCk7XG4gICAgICAgIHRoaXMucmFuZG9taXphdGlvbkZhY3RvcigoX2EgPSBvcHRzLnJhbmRvbWl6YXRpb25GYWN0b3IpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDAuNSk7XG4gICAgICAgIHRoaXMuYmFja29mZiA9IG5ldyBCYWNrb2ZmKHtcbiAgICAgICAgICAgIG1pbjogdGhpcy5yZWNvbm5lY3Rpb25EZWxheSgpLFxuICAgICAgICAgICAgbWF4OiB0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KCksXG4gICAgICAgICAgICBqaXR0ZXI6IHRoaXMucmFuZG9taXphdGlvbkZhY3RvcigpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50aW1lb3V0KG51bGwgPT0gb3B0cy50aW1lb3V0ID8gMjAwMDAgOiBvcHRzLnRpbWVvdXQpO1xuICAgICAgICB0aGlzLl9yZWFkeVN0YXRlID0gXCJjbG9zZWRcIjtcbiAgICAgICAgdGhpcy51cmkgPSB1cmk7XG4gICAgICAgIGNvbnN0IF9wYXJzZXIgPSBvcHRzLnBhcnNlciB8fCBwYXJzZXI7XG4gICAgICAgIHRoaXMuZW5jb2RlciA9IG5ldyBfcGFyc2VyLkVuY29kZXIoKTtcbiAgICAgICAgdGhpcy5kZWNvZGVyID0gbmV3IF9wYXJzZXIuRGVjb2RlcigpO1xuICAgICAgICB0aGlzLl9hdXRvQ29ubmVjdCA9IG9wdHMuYXV0b0Nvbm5lY3QgIT09IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5fYXV0b0Nvbm5lY3QpXG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICB9XG4gICAgcmVjb25uZWN0aW9uKHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW9uID0gISF2O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVjb25uZWN0aW9uQXR0ZW1wdHModikge1xuICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzO1xuICAgICAgICB0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cyA9IHY7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWNvbm5lY3Rpb25EZWxheSh2KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW9uRGVsYXkgPSB2O1xuICAgICAgICAoX2EgPSB0aGlzLmJhY2tvZmYpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXRNaW4odik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByYW5kb21pemF0aW9uRmFjdG9yKHYpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JhbmRvbWl6YXRpb25GYWN0b3I7XG4gICAgICAgIHRoaXMuX3JhbmRvbWl6YXRpb25GYWN0b3IgPSB2O1xuICAgICAgICAoX2EgPSB0aGlzLmJhY2tvZmYpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXRKaXR0ZXIodik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWNvbm5lY3Rpb25EZWxheU1heCh2KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heDtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXggPSB2O1xuICAgICAgICAoX2EgPSB0aGlzLmJhY2tvZmYpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXRNYXgodik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aW1lb3V0KHYpIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVvdXQ7XG4gICAgICAgIHRoaXMuX3RpbWVvdXQgPSB2O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRyeWluZyB0byByZWNvbm5lY3QgaWYgcmVjb25uZWN0aW9uIGlzIGVuYWJsZWQgYW5kIHdlIGhhdmUgbm90XG4gICAgICogc3RhcnRlZCByZWNvbm5lY3RpbmcgeWV0XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG1heWJlUmVjb25uZWN0T25PcGVuKCkge1xuICAgICAgICAvLyBPbmx5IHRyeSB0byByZWNvbm5lY3QgaWYgaXQncyB0aGUgZmlyc3QgdGltZSB3ZSdyZSBjb25uZWN0aW5nXG4gICAgICAgIGlmICghdGhpcy5fcmVjb25uZWN0aW5nICYmXG4gICAgICAgICAgICB0aGlzLl9yZWNvbm5lY3Rpb24gJiZcbiAgICAgICAgICAgIHRoaXMuYmFja29mZi5hdHRlbXB0cyA9PT0gMCkge1xuICAgICAgICAgICAgLy8ga2VlcHMgcmVjb25uZWN0aW9uIGZyb20gZmlyaW5nIHR3aWNlIGZvciB0aGUgc2FtZSByZWNvbm5lY3Rpb24gbG9vcFxuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHRyYW5zcG9ydCBgc29ja2V0YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gb3B0aW9uYWwsIGNhbGxiYWNrXG4gICAgICogQHJldHVybiBzZWxmXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9wZW4oZm4pIHtcbiAgICAgICAgaWYgKH50aGlzLl9yZWFkeVN0YXRlLmluZGV4T2YoXCJvcGVuXCIpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHRoaXMuZW5naW5lID0gbmV3IEVuZ2luZSh0aGlzLnVyaSwgdGhpcy5vcHRzKTtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gdGhpcy5lbmdpbmU7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLl9yZWFkeVN0YXRlID0gXCJvcGVuaW5nXCI7XG4gICAgICAgIHRoaXMuc2tpcFJlY29ubmVjdCA9IGZhbHNlO1xuICAgICAgICAvLyBlbWl0IGBvcGVuYFxuICAgICAgICBjb25zdCBvcGVuU3ViRGVzdHJveSA9IG9uKHNvY2tldCwgXCJvcGVuXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYub25vcGVuKCk7XG4gICAgICAgICAgICBmbiAmJiBmbigpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gZW1pdCBgZXJyb3JgXG4gICAgICAgIGNvbnN0IGVycm9yU3ViID0gb24oc29ja2V0LCBcImVycm9yXCIsIChlcnIpID0+IHtcbiAgICAgICAgICAgIHNlbGYuY2xlYW51cCgpO1xuICAgICAgICAgICAgc2VsZi5fcmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcImVycm9yXCIsIGVycik7XG4gICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgICBmbihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT25seSBkbyB0aGlzIGlmIHRoZXJlIGlzIG5vIGZuIHRvIGhhbmRsZSB0aGUgZXJyb3JcbiAgICAgICAgICAgICAgICBzZWxmLm1heWJlUmVjb25uZWN0T25PcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZmFsc2UgIT09IHRoaXMuX3RpbWVvdXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuICAgICAgICAgICAgaWYgKHRpbWVvdXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBvcGVuU3ViRGVzdHJveSgpOyAvLyBwcmV2ZW50cyBhIHJhY2UgY29uZGl0aW9uIHdpdGggdGhlICdvcGVuJyBldmVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2V0IHRpbWVyXG4gICAgICAgICAgICBjb25zdCB0aW1lciA9IHRoaXMuc2V0VGltZW91dEZuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBvcGVuU3ViRGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHNvY2tldC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcImVycm9yXCIsIG5ldyBFcnJvcihcInRpbWVvdXRcIikpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmF1dG9VbnJlZikge1xuICAgICAgICAgICAgICAgIHRpbWVyLnVucmVmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnMucHVzaChmdW5jdGlvbiBzdWJEZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnMucHVzaChvcGVuU3ViRGVzdHJveSk7XG4gICAgICAgIHRoaXMuc3Vicy5wdXNoKGVycm9yU3ViKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBvcGVuKClcbiAgICAgKlxuICAgICAqIEByZXR1cm4gc2VsZlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25uZWN0KGZuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wZW4oZm4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiB0cmFuc3BvcnQgb3Blbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25vcGVuKCkge1xuICAgICAgICAvLyBjbGVhciBvbGQgc3Vic1xuICAgICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICAgICAgLy8gbWFyayBhcyBvcGVuXG4gICAgICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBcIm9wZW5cIjtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJvcGVuXCIpO1xuICAgICAgICAvLyBhZGQgbmV3IHN1YnNcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gdGhpcy5lbmdpbmU7XG4gICAgICAgIHRoaXMuc3Vicy5wdXNoKG9uKHNvY2tldCwgXCJwaW5nXCIsIHRoaXMub25waW5nLmJpbmQodGhpcykpLCBvbihzb2NrZXQsIFwiZGF0YVwiLCB0aGlzLm9uZGF0YS5iaW5kKHRoaXMpKSwgb24oc29ja2V0LCBcImVycm9yXCIsIHRoaXMub25lcnJvci5iaW5kKHRoaXMpKSwgb24oc29ja2V0LCBcImNsb3NlXCIsIHRoaXMub25jbG9zZS5iaW5kKHRoaXMpKSwgb24odGhpcy5kZWNvZGVyLCBcImRlY29kZWRcIiwgdGhpcy5vbmRlY29kZWQuYmluZCh0aGlzKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHBpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9ucGluZygpIHtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJwaW5nXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2l0aCBkYXRhLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBvbmRhdGEoZGF0YSkge1xuICAgICAgICB0aGlzLmRlY29kZXIuYWRkKGRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBwYXJzZXIgZnVsbHkgZGVjb2RlcyBhIHBhY2tldC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25kZWNvZGVkKHBhY2tldCkge1xuICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInBhY2tldFwiLCBwYWNrZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzb2NrZXQgZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG9uZXJyb3IoZXJyKSB7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiZXJyb3JcIiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBzb2NrZXQgZm9yIHRoZSBnaXZlbiBgbnNwYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1NvY2tldH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc29ja2V0KG5zcCwgb3B0cykge1xuICAgICAgICBsZXQgc29ja2V0ID0gdGhpcy5uc3BzW25zcF07XG4gICAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgICAgICBzb2NrZXQgPSBuZXcgU29ja2V0KHRoaXMsIG5zcCwgb3B0cyk7XG4gICAgICAgICAgICB0aGlzLm5zcHNbbnNwXSA9IHNvY2tldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29ja2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBhIHNvY2tldCBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb2NrZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9kZXN0cm95KHNvY2tldCkge1xuICAgICAgICBjb25zdCBuc3BzID0gT2JqZWN0LmtleXModGhpcy5uc3BzKTtcbiAgICAgICAgZm9yIChjb25zdCBuc3Agb2YgbnNwcykge1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gdGhpcy5uc3BzW25zcF07XG4gICAgICAgICAgICBpZiAoc29ja2V0LmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgYSBwYWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFja2V0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcGFja2V0KHBhY2tldCkge1xuICAgICAgICBjb25zdCBlbmNvZGVkUGFja2V0cyA9IHRoaXMuZW5jb2Rlci5lbmNvZGUocGFja2V0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmNvZGVkUGFja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUud3JpdGUoZW5jb2RlZFBhY2tldHNbaV0sIHBhY2tldC5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cCB0cmFuc3BvcnQgc3Vic2NyaXB0aW9ucyBhbmQgcGFja2V0IGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY2xlYW51cCgpIHtcbiAgICAgICAgdGhpcy5zdWJzLmZvckVhY2goKHN1YkRlc3Ryb3kpID0+IHN1YkRlc3Ryb3koKSk7XG4gICAgICAgIHRoaXMuc3Vicy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmRlY29kZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgY3VycmVudCBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jbG9zZSgpIHtcbiAgICAgICAgdGhpcy5za2lwUmVjb25uZWN0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25jbG9zZShcImZvcmNlZCBjbG9zZVwiKTtcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lKVxuICAgICAgICAgICAgdGhpcy5lbmdpbmUuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGNsb3NlKClcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB1cG9uIGVuZ2luZSBjbG9zZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25jbG9zZShyZWFzb24sIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fcmVhZHlTdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwiY2xvc2VcIiwgcmVhc29uLCBkZXNjcmlwdGlvbik7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3Rpb24gJiYgIXRoaXMuc2tpcFJlY29ubmVjdCkge1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IGEgcmVjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICByZWNvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3RpbmcgfHwgdGhpcy5za2lwUmVjb25uZWN0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5iYWNrb2ZmLmF0dGVtcHRzID49IHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdFJlc2VydmVkKFwicmVjb25uZWN0X2ZhaWxlZFwiKTtcbiAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLmJhY2tvZmYuZHVyYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCB0aW1lciA9IHRoaXMuc2V0VGltZW91dEZuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5za2lwUmVjb25uZWN0KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RfYXR0ZW1wdFwiLCBzZWxmLmJhY2tvZmYuYXR0ZW1wdHMpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGFnYWluIGZvciB0aGUgY2FzZSBzb2NrZXQgY2xvc2VkIGluIGFib3ZlIGV2ZW50c1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNraXBSZWNvbm5lY3QpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBzZWxmLm9wZW4oKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZWNvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRSZXNlcnZlZChcInJlY29ubmVjdF9lcnJvclwiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbnJlY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmF1dG9VbnJlZikge1xuICAgICAgICAgICAgICAgIHRpbWVyLnVucmVmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnMucHVzaChmdW5jdGlvbiBzdWJEZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdXBvbiBzdWNjZXNzZnVsIHJlY29ubmVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgb25yZWNvbm5lY3QoKSB7XG4gICAgICAgIGNvbnN0IGF0dGVtcHQgPSB0aGlzLmJhY2tvZmYuYXR0ZW1wdHM7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgdGhpcy5lbWl0UmVzZXJ2ZWQoXCJyZWNvbm5lY3RcIiwgYXR0ZW1wdCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdXJsIH0gZnJvbSBcIi4vdXJsLmpzXCI7XG5pbXBvcnQgeyBNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgU29ja2V0IH0gZnJvbSBcIi4vc29ja2V0LmpzXCI7XG4vKipcbiAqIE1hbmFnZXJzIGNhY2hlLlxuICovXG5jb25zdCBjYWNoZSA9IHt9O1xuZnVuY3Rpb24gbG9va3VwKHVyaSwgb3B0cykge1xuICAgIGlmICh0eXBlb2YgdXJpID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG9wdHMgPSB1cmk7XG4gICAgICAgIHVyaSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgY29uc3QgcGFyc2VkID0gdXJsKHVyaSwgb3B0cy5wYXRoIHx8IFwiL3NvY2tldC5pb1wiKTtcbiAgICBjb25zdCBzb3VyY2UgPSBwYXJzZWQuc291cmNlO1xuICAgIGNvbnN0IGlkID0gcGFyc2VkLmlkO1xuICAgIGNvbnN0IHBhdGggPSBwYXJzZWQucGF0aDtcbiAgICBjb25zdCBzYW1lTmFtZXNwYWNlID0gY2FjaGVbaWRdICYmIHBhdGggaW4gY2FjaGVbaWRdW1wibnNwc1wiXTtcbiAgICBjb25zdCBuZXdDb25uZWN0aW9uID0gb3B0cy5mb3JjZU5ldyB8fFxuICAgICAgICBvcHRzW1wiZm9yY2UgbmV3IGNvbm5lY3Rpb25cIl0gfHxcbiAgICAgICAgZmFsc2UgPT09IG9wdHMubXVsdGlwbGV4IHx8XG4gICAgICAgIHNhbWVOYW1lc3BhY2U7XG4gICAgbGV0IGlvO1xuICAgIGlmIChuZXdDb25uZWN0aW9uKSB7XG4gICAgICAgIGlvID0gbmV3IE1hbmFnZXIoc291cmNlLCBvcHRzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgICAgICBjYWNoZVtpZF0gPSBuZXcgTWFuYWdlcihzb3VyY2UsIG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlvID0gY2FjaGVbaWRdO1xuICAgIH1cbiAgICBpZiAocGFyc2VkLnF1ZXJ5ICYmICFvcHRzLnF1ZXJ5KSB7XG4gICAgICAgIG9wdHMucXVlcnkgPSBwYXJzZWQucXVlcnlLZXk7XG4gICAgfVxuICAgIHJldHVybiBpby5zb2NrZXQocGFyc2VkLnBhdGgsIG9wdHMpO1xufVxuLy8gc28gdGhhdCBcImxvb2t1cFwiIGNhbiBiZSB1c2VkIGJvdGggYXMgYSBmdW5jdGlvbiAoZS5nLiBgaW8oLi4uKWApIGFuZCBhcyBhXG4vLyBuYW1lc3BhY2UgKGUuZy4gYGlvLmNvbm5lY3QoLi4uKWApLCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuT2JqZWN0LmFzc2lnbihsb29rdXAsIHtcbiAgICBNYW5hZ2VyLFxuICAgIFNvY2tldCxcbiAgICBpbzogbG9va3VwLFxuICAgIGNvbm5lY3Q6IGxvb2t1cCxcbn0pO1xuLyoqXG4gKiBQcm90b2NvbCB2ZXJzaW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHsgcHJvdG9jb2wgfSBmcm9tIFwic29ja2V0LmlvLXBhcnNlclwiO1xuLyoqXG4gKiBFeHBvc2UgY29uc3RydWN0b3JzIGZvciBzdGFuZGFsb25lIGJ1aWxkLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHsgTWFuYWdlciwgU29ja2V0LCBsb29rdXAgYXMgaW8sIGxvb2t1cCBhcyBjb25uZWN0LCBsb29rdXAgYXMgZGVmYXVsdCwgfTtcbiIsImltcG9ydCB7IHBhcnNlIH0gZnJvbSBcImVuZ2luZS5pby1jbGllbnRcIjtcbi8qKlxuICogVVJMIHBhcnNlci5cbiAqXG4gKiBAcGFyYW0gdXJpIC0gdXJsXG4gKiBAcGFyYW0gcGF0aCAtIHRoZSByZXF1ZXN0IHBhdGggb2YgdGhlIGNvbm5lY3Rpb25cbiAqIEBwYXJhbSBsb2MgLSBBbiBvYmplY3QgbWVhbnQgdG8gbWltaWMgd2luZG93LmxvY2F0aW9uLlxuICogICAgICAgIERlZmF1bHRzIHRvIHdpbmRvdy5sb2NhdGlvbi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVybCh1cmksIHBhdGggPSBcIlwiLCBsb2MpIHtcbiAgICBsZXQgb2JqID0gdXJpO1xuICAgIC8vIGRlZmF1bHQgdG8gd2luZG93LmxvY2F0aW9uXG4gICAgbG9jID0gbG9jIHx8ICh0eXBlb2YgbG9jYXRpb24gIT09IFwidW5kZWZpbmVkXCIgJiYgbG9jYXRpb24pO1xuICAgIGlmIChudWxsID09IHVyaSlcbiAgICAgICAgdXJpID0gbG9jLnByb3RvY29sICsgXCIvL1wiICsgbG9jLmhvc3Q7XG4gICAgLy8gcmVsYXRpdmUgcGF0aCBzdXBwb3J0XG4gICAgaWYgKHR5cGVvZiB1cmkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKFwiL1wiID09PSB1cmkuY2hhckF0KDApKSB7XG4gICAgICAgICAgICBpZiAoXCIvXCIgPT09IHVyaS5jaGFyQXQoMSkpIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MucHJvdG9jb2wgKyB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MuaG9zdCArIHVyaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIS9eKGh0dHBzP3x3c3M/KTpcXC9cXC8vLnRlc3QodXJpKSkge1xuICAgICAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBsb2MpIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBsb2MucHJvdG9jb2wgKyBcIi8vXCIgKyB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cmkgPSBcImh0dHBzOi8vXCIgKyB1cmk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGFyc2VcbiAgICAgICAgb2JqID0gcGFyc2UodXJpKTtcbiAgICB9XG4gICAgLy8gbWFrZSBzdXJlIHdlIHRyZWF0IGBsb2NhbGhvc3Q6ODBgIGFuZCBgbG9jYWxob3N0YCBlcXVhbGx5XG4gICAgaWYgKCFvYmoucG9ydCkge1xuICAgICAgICBpZiAoL14oaHR0cHx3cykkLy50ZXN0KG9iai5wcm90b2NvbCkpIHtcbiAgICAgICAgICAgIG9iai5wb3J0ID0gXCI4MFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKC9eKGh0dHB8d3MpcyQvLnRlc3Qob2JqLnByb3RvY29sKSkge1xuICAgICAgICAgICAgb2JqLnBvcnQgPSBcIjQ0M1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9iai5wYXRoID0gb2JqLnBhdGggfHwgXCIvXCI7XG4gICAgY29uc3QgaXB2NiA9IG9iai5ob3N0LmluZGV4T2YoXCI6XCIpICE9PSAtMTtcbiAgICBjb25zdCBob3N0ID0gaXB2NiA/IFwiW1wiICsgb2JqLmhvc3QgKyBcIl1cIiA6IG9iai5ob3N0O1xuICAgIC8vIGRlZmluZSB1bmlxdWUgaWRcbiAgICBvYmouaWQgPSBvYmoucHJvdG9jb2wgKyBcIjovL1wiICsgaG9zdCArIFwiOlwiICsgb2JqLnBvcnQgKyBwYXRoO1xuICAgIC8vIGRlZmluZSBocmVmXG4gICAgb2JqLmhyZWYgPVxuICAgICAgICBvYmoucHJvdG9jb2wgK1xuICAgICAgICAgICAgXCI6Ly9cIiArXG4gICAgICAgICAgICBob3N0ICtcbiAgICAgICAgICAgIChsb2MgJiYgbG9jLnBvcnQgPT09IG9iai5wb3J0ID8gXCJcIiA6IFwiOlwiICsgb2JqLnBvcnQpO1xuICAgIHJldHVybiBvYmo7XG59XG4iLCIvKlxuICogZmlyc3QgNSBzeW1ib2xzIChpLmUgMDA6MTIpXG4gKiBAcGFyYW0gY3JlYXRlZEF0IC0gZGF0ZSBvZiBtZXNzYWdlIGNyZWF0aW9uXG4gKiBAcmV0dXJucyBgaG91cjptaW51dGVgIG9mIGNyZWF0aW9uXG4gKi9cbi8vZmlyc3QgNSBzeW1ib2xzICgwLDEsMiwzLDQpXG5leHBvcnQgZnVuY3Rpb24gbXNnRGF0ZShjcmVhdGVkQXQpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoY3JlYXRlZEF0KS50b1RpbWVTdHJpbmcoKS5zdWJzdHIoMCwgNSk7XG59XG4vKipcbiAqIENyZWF0ZXMgaHRtbCBlbGVtZW50IHdpdGggYXR0cmlidXRlc1xuICogQHBhcmFtIG5hbWUgLSBodG1sIHN0cmluZyBuYW1lXG4gKiBhdHRyaWJ1dGVzIG9iamVjdCB3aXRoIGtleSB2YWx1ZXNcbiAqIEByZXR1cm5zIGh0bWwgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaHRtbENyZWF0ZShuYW1lLCBhdHRyaWJ1dGVzID0ge30pIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbiAgICBmb3IgKGNvbnN0IGF0dHIgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyaWJ1dGVzW2F0dHJdKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbi8vIENyZWF0ZXMgdGhlIDxzZWxlY3Q+IGVsZW1lbnQgZm9yIHRoZSBtZXNzZ2Flc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlbGVjdCgpIHtcbiAgICBjb25zdCBzZWxlY3QgPSBodG1sQ3JlYXRlKFwic2VsZWN0XCIsIHtcbiAgICAgICAgY2xhc3M6IFwibWVzc2FnZUl0ZW1fc2VsZWN0XCIsXG4gICAgICAgIG5hbWU6IFwibWVzc2FnZUl0ZW1TZWxlY3RcIixcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0gW1wiKlwiLCBcImRlbGV0ZVwiLCBcInVwZGF0ZVwiXTtcbiAgICBvcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gaHRtbENyZWF0ZShcIm9wdGlvblwiLCB7IHZhbHVlOiBvcHRpb24gfSk7XG4gICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gb3B0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgb3B0aW9uLnNsaWNlKDEpO1xuICAgICAgICBzZWxlY3QuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHJldHVybiBzZWxlY3Q7XG59XG5cbi8qXG4gKiBXaGVuIHVzZXIgcHJlc3NlcyBhbnkgYWN0aW9uIGxpa2UgYGRlbGV0ZWAgb24gYSBtZXNzYWdlIGl0ZW0sXG4gKiBpdCBzZW5kcyBhIHNvY2tldC1tZXNzYWdlIHRvIHNlcnZlciBhbmQgZ2V0cyByZXNwb25zZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVzc2FnZVNlbGVjdEludGVyYWN0aW9uKHNvY2tldCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjb25zdCBzZWxlY3QgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIGxldCBsaSA9IHNlbGVjdC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBjb25zdCBfaWQgPSBsaS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKF9pZCAmJiBzZWxlY3QudmFsdWUgPT09IFwiZGVsZXRlXCIpIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KFwiZGVsZXRlXCIsIF9pZCk7XG4gICAgICAgICAgICBzb2NrZXQub24oXCJkZWxldGVkXCIsIChvaykgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJlbVwiKTtcbiAgICAgICAgICAgICAgICBlbS50ZXh0Q29udGVudCA9IG9rO1xuICAgICAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgbGkuYXBwZW5kKGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJub3RoaW5nIHlldFwiKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gbGkgaHRtbCBlbGVtZW50IGFuZCBzZXRzIHRoZSBkYXRhLXRpZCBhdHRyaWJ1dGVcbiAqIHRvIGEgdGVtcG9yYXJ5IGlkIGl0IG1ha2VzIHN1cmUgdGhhdCBpdCBpcyBub3QgcmVwZWF0ZWQgaW4gdGhlIGxhc3QgMTAwIGl0ZW1zLlxuICogdGhpcyB2YWx1ZSBpcyB1c2VkIHRvIGxvY2F0ZSB0aGUgZWxlbWVudCBhbmQgYWRkIGEgZGF0YWJhc2UgdW5pcXVlIF9pZCB1cG9uIHNhdmluZ1xuICogQHBhcmFtIGl0ZW1zIC0gaHRtbCBsaSBlbGVtZW50cy4gSXQgc2hvdWxkIHJlY2VpdmUgdGhlIGxhc3QgMTAwIGl0ZW1zXG4gKiBAcmV0dXJucyAtIHRlbXBvcmFyeSBpZFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcElkKGl0ZW1zKSB7XG4gICAgY29uc3QgdGlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygxMCk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGl0ZW1zKSB8fCBpdGVtcy5sZW5ndGggPT0gMCkgcmV0dXJuIHRpZDtcbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBpdGVtcy5zb21lKFxuICAgICAgICAgICAgKGl0ZW0pID0+IGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS10aWRcIikgPT09IHRpZFxuICAgICAgICApO1xuICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4gdGlkO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wSWQoaXRlbXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKiByZXBsYWNlcyB0aGUgdGVtcG9yYXJ5IGlkIGZvciBhIHBlcm1hbmVudCBvbmUgZ2VuZXJhdGVkXG4gKiBhdCB0aGUgZGF0YWJhc2UqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VUSWQoZWxlbWVudCwgX2lkKSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIF9pZCk7XG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXRpZFwiKTtcbn1cbiIsImltcG9ydCB7IG1zZ0RhdGUsIGh0bWxDcmVhdGUsIGNyZWF0ZVNlbGVjdCB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgICAgIGNvbnN0IHsgX2lkLCB0aWQsIGNyZWF0ZWRBdCwgbXNnIH0gPSBkYXRhO1xuICAgICAgICBpZiAoX2lkKSB0aGlzLl9pZCA9IF9pZDtcbiAgICAgICAgaWYgKHRpZCkgdGhpcy50aWQgPSB0aWQ7XG4gICAgICAgIGlmIChjcmVhdGVkQXQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1zZyA9IG1zZztcbiAgICB9XG59XG4vKiogQ3JlYXRlIGEgbGlzdCBpdGVtIGZyb20gbWVzc2FnZS5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgdHJpZ2dlcmVkIGJ5IGRpZmZlcmVudCBhY3Rpb25zLlxuICogMS4gd2hlbiBzZW5kZXIgaGl0cyBzdWJtaXQ6YG1zZyxjcmVhdGVkQXQsdGlkYCBhcmUgZGVmaW5lZC5cbiAqIDIuIHdoZW4gcmVjZWl2ZWQgZnJvbSBEQi4gYG1zZywgY3JlYXRlZEF0LCBfaWRgIGFyZSBkZWZpbmVkLlxuICogT25jZSB0aGlzIGlzIGxpbmtlZCB3aXRoIGEgdW5pcXVlIHVzZXJuYW1lL3NvY2tldCxcbiAqIHRoZXkgd2lsbCBiZSBhYmxlIHRvIGFjdCBvbiB0aGUgbWVzc2FnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1zZ1RvSFRNTChkYXRhKSB7XG4gICAgY29uc3QgeyBtc2c6IG0sIGNyZWF0ZWRBdCwgX2lkLCB0aWQsIG93biB9ID0gZGF0YTtcbiAgICAvLyB3ZSBidWlsZCB1cCB0aGUgbWVzc2FnZSBIVE1MXG4gICAgY29uc3QgbXNnID0gaHRtbENyZWF0ZShcImxpXCIsIHtcbiAgICAgICAgXCJkYXRhLWlkXCI6IF9pZCB8fCBcIlwiLFxuICAgICAgICBcImRhdGEtdGlkXCI6IHRpZCB8fCBcIlwiLFxuICAgIH0pO1xuICAgIGNvbnN0IGRhdGUgPSBodG1sQ3JlYXRlKFwic3BhblwiLCB7IGNsYXNzOiBcInRpbWVcIiB9KTtcbiAgICBkYXRlLmlubmVyVGV4dCA9IG1zZ0RhdGUoY3JlYXRlZEF0KTtcbiAgICBjb25zdCBtc2dCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgbXNnQm9keS5pbm5lclRleHQgPSBtO1xuICAgIC8vcHJlcGVuZCBlbGVtZW50cyB0byBsaXN0IGl0ZW1cbiAgICBtc2cucHJlcGVuZChkYXRlLCBtc2dCb2R5KTtcbiAgICBpZiAoIW93bikgcmV0dXJuIG1zZztcbiAgICBtc2cuYXBwZW5kKGNyZWF0ZVNlbGVjdCgpKTtcbiAgICByZXR1cm4gbXNnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSFRNTFRvRE9NKGh0bWwsIHRhcmdldCwgdHlwZSA9IFwiYXBwZW5kXCIpIHtcbiAgICByZXR1cm4gdHlwZSA9PT0gXCJwcmVwZW5kXCIgPyB0YXJnZXQucHJlcGVuZChodG1sKSA6IHRhcmdldC5hcHBlbmQoaHRtbCk7XG59XG4iLCJpbXBvcnQgeyBIVE1MVG9ET00sIG1zZ1RvSFRNTCB9IGZyb20gXCIuL2J1aWxkTXNnLmpzXCI7XG5cbmNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXNzYWdlc1wiKTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0TXNnc0FzeW5jKHVyaSwgc2tpcCwgbGltaXQpIHtcbiAgICBjb25zdCByb3V0ZSA9IHVyaSArIFwiL1wiICsgc2tpcC50b1N0cmluZygxMCkgKyBcIi9cIiArIGxpbWl0LnRvU3RyaW5nKDEwKTtcbiAgICBjb25zdCBtc2dzID0gYXdhaXQgZmV0Y2gocm91dGUpLnRoZW4oKGQpID0+IGQuanNvbigpKTtcbiAgICBtc2dzLmZvckVhY2goKG1zZykgPT4gSFRNTFRvRE9NKG1zZ1RvSFRNTChtc2cpLCB1bCwgXCJwcmVwZW5kXCIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TGFzdE1zZ3NBc3luYyh1cmkpIHtcbiAgICByZXR1cm4gYXdhaXQgZ2V0TXNnc0FzeW5jKHVyaSwgMCwgMTApO1xufVxuXG5leHBvcnQgeyBnZXRNc2dzQXN5bmMsIGdldExhc3RNc2dzQXN5bmMgfTtcbiIsImltcG9ydCBpbyBmcm9tIFwic29ja2V0LmlvLWNsaWVudFwiO1xuXG5pbXBvcnQgeyBNZXNzYWdlLCBtc2dUb0hUTUwsIEhUTUxUb0RPTSB9IGZyb20gXCIuL2J1aWxkTXNnLmpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0TXNnc0FzeW5jLCBnZXRNc2dzQXN5bmMgfSBmcm9tIFwiLi9mZXRjaC5qc1wiO1xuaW1wb3J0IHsgdGVtcElkIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcblxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VzXCIpO1xuY29uc3QgbWVzc2FnZXMgPSB1bC5jaGlsZHJlbjtcbmNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtXCIpO1xuY29uc3QgcHJldk1zZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uI3dhbnRNb3JlXCIpO1xuXG5jb25zdCB1cmkgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiO1xuXG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICAgIC8vb3BlbiBzb2NrZXQgdG8gdXJpXG4gICAgY29uc3Qgc29ja2V0ID0gaW8oKTtcblxuICAgIGF3YWl0IGdldExhc3RNc2dzQXN5bmModXJpICsgXCIvbWVzc2FnZXNcIik7XG5cbiAgICBwcmV2TXNncy5jbGljaygoKSA9PiB7XG4gICAgICAgIGNvbnN0IGwgPSBwYXJzZUludCh1bC5jaGlsZHJlbi5sZW5ndGgpO1xuICAgICAgICBnZXRNc2dzQXN5bmMoYCR7dXJpfS9tZXNzYWdlc2AsIGwsIGwgKyAxMCk7XG4gICAgfSk7XG5cbiAgICBmb3JtLm9uc3VibWl0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgLypcbiAgICAgICBvbiBpbnB1dCBzdWJtaXQgYXBwZW5kIG1zZyB0byBET00gYW5kXG4gICAgICAgc2VuZCB0byBzZXJ2ZXIuIE9uIHNlcnZlciBPSyBhZGQgX2lkXG4gICAgICAgYW5kIGVuYWJsZSArIENSVUQgb3BlcmF0aW9uc1xuICAgICAgICovXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAvLzEuIGNvbGxlY3QgdGhlIHZhbHVlIGFuZCByZXNldCBmaWVsZFxuICAgICAgICBjb25zdCBtc2cgPSBpbnB1dC52YWx1ZTtcblxuICAgICAgICBpZiAoIW1zZykgcmV0dXJuO1xuICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG5cbiAgICAgICAgLy8yLiBjcmVhdGUgdGhlIEhUTUwgbGlzdCBpdGVtXG4gICAgICAgIGNvbnN0IHRvU2F2ZSA9IG5ldyBNZXNzYWdlKHsgbXNnLCB0aWQ6IHRlbXBJZChtZXNzYWdlcykgfSk7XG5cbiAgICAgICAgY29uc3QgbGkgPSBtc2dUb0hUTUwoeyAuLi50b1NhdmUsIG93bjogdHJ1ZSB9KTtcblxuICAgICAgICAvLzMuQSBmb3IgdGhlIHNlbmRlciwgYXBwZW5kIHJpZ2h0IGF3YXksIGFzIGEgcHJldmlld1xuICAgICAgICB1bC5hcHBlbmQobGkpO1xuICAgICAgICAvL3JlYWRqdXN0IGhlaWdodFxuICAgICAgICB0aGlzLnNjcm9sbFRvKDAsIHRoaXMuc2Nyb2xsSGVpZ2h0KTtcblxuICAgICAgICAvLzQuZW1pdCB0aGUgbWVzc2FnZSB0byBzZXJ2ZXJcbiAgICAgICAgc29ja2V0LmVtaXQoXCJzYXZlXCIsIHsgbXNnOiB0b1NhdmUubXNnLCB0aWQ6IHRvU2F2ZS50aWQgfSk7XG5cbiAgICAgICAgLy9MSSBpbnRlcmFjdGlvblxuICAgICAgICBsZXQgbXNnT3B0aW9ucyA9IGxpLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZUl0ZW1fc2VsZWN0XCIpO1xuICAgICAgICBtc2dPcHRpb25zLm9uY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8ndGhpcycgaXMgdGhlIGN1cnJlbnQgZWxlbWVudCB0YXJnZXRcbiAgICAgICAgICAgIGxldCBsaSA9IHRoaXMucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IF9pZCA9IGxpLmdldEF0dHJpYnV0ZShcImRhdGEtaWRcIik7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gXCJkZWxldGVcIikge1xuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KFwiZGVsZXRlXCIsIF9pZCk7XG4gICAgICAgICAgICAgICAgc29ja2V0Lm9uKFwiZGVsZXRlZFwiLCAoX2lkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImVtXCIpO1xuICAgICAgICAgICAgICAgICAgICBlbS5pbm5lclRleHQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJNZXNzYWdlIHdhcyBkZWxldGVkLiBJdCB3aWxsIGRpc3NhcGVhciBpbiA1IHNlY29uZHMuXCI7XG4gICAgICAgICAgICAgICAgICAgIGxpLmFwcGVuZChlbSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVsU2xpY2UgPSBtZXNzYWdlcy5zbGljZSgtNTApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b1JlbW92ZSA9IHVsU2xpY2UucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGBbZGF0YS1pZD0nJHtfaWR9J11gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdG9SZW1vdmUucmVtb3ZlKCksIDEwMDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vdGhpbmcgeWV0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvLzUuY2hhbmdlIHRlbXBvcmFyeSBpZCB0byBwZXJtYW5lbnRcbiAgICBzb2NrZXQub24oXCJzYXZlZFwiLCAoeyBfaWQsIHRpZCB9KSA9PiB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICBsZXQgaSA9IG1lc3NhZ2VzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBpID4gbWVzc2FnZXMubGVuZ3RoIC0gMjAwICYmIGkgPiAwO1xuICAgICAgICAgICAgaS0tXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VzW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtdGlkXCIpID09PSB0aWQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlc1tpXS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIF9pZCk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXNbaV0ucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS10aWRcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGNsaWVudCBsaXN0ZW5zIGZvciBuZXcgbWVzc2FnZXNcbiAgICBzb2NrZXQub24oXCJuZXdcIiwgKGRhdGEpID0+IHtcbiAgICAgICAgSFRNTFRvRE9NKG1zZ1RvSFRNTChkYXRhKSk7XG4gICAgICAgIGZvcm0uc2Nyb2xsVG8oMCwgZm9ybS5zY3JvbGxIZWlnaHQpO1xuICAgIH0pO1xuICAgIC8vZW5kIG1haW5cbn1cbm1haW4oKS5jYXRjaCgoZSkgPT4gY29uc29sZS5sb2coZSkpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIlBBQ0tFVF9UWVBFUyIsImNyZWF0ZSIsIlBBQ0tFVF9UWVBFU19SRVZFUlNFIiwia2V5cyIsImZvckVhY2giLCJFUlJPUl9QQUNLRVQiLCJ0eXBlIiwiZGF0YSIsIndpdGhOYXRpdmVCbG9iIiwiQmxvYiIsInRvU3RyaW5nIiwid2l0aE5hdGl2ZUFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJlbmNvZGVCbG9iQXNCYXNlNjQiLCJjYWxsYmFjayIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiY29udGVudCIsInJlc3VsdCIsInNwbGl0IiwicmVhZEFzRGF0YVVSTCIsInN1cHBvcnRzQmluYXJ5IiwiaXNWaWV3IiwiYnVmZmVyIiwiY2hhcnMiLCJsb29rdXAiLCJVaW50OEFycmF5IiwiaSIsImxlbmd0aCIsImNoYXJDb2RlQXQiLCJkZWNvZGVCYXNlNjRQYWNrZXQiLCJiaW5hcnlUeXBlIiwiZGVjb2RlZCIsImJhc2U2NCIsImVuY29kZWQxIiwiZW5jb2RlZDIiLCJlbmNvZGVkMyIsImVuY29kZWQ0IiwiYnVmZmVyTGVuZ3RoIiwibGVuIiwicCIsImFycmF5YnVmZmVyIiwiYnl0ZXMiLCJkZWNvZGUiLCJtYXBCaW5hcnkiLCJlbmNvZGVkUGFja2V0IiwiY2hhckF0Iiwic3Vic3RyaW5nIiwiU0VQQVJBVE9SIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiRW1pdHRlciIsIm1peGluIiwib24iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmbiIsInRoaXMiLCJfY2FsbGJhY2tzIiwicHVzaCIsIm9uY2UiLCJvZmYiLCJhcHBseSIsImFyZ3VtZW50cyIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNiIiwiY2FsbGJhY2tzIiwic3BsaWNlIiwiZW1pdCIsImFyZ3MiLCJBcnJheSIsInNsaWNlIiwiZW1pdFJlc2VydmVkIiwibGlzdGVuZXJzIiwiaGFzTGlzdGVuZXJzIiwiZ2xvYmFsVGhpc1NoaW0iLCJzZWxmIiwid2luZG93IiwiRnVuY3Rpb24iLCJwaWNrIiwiYXR0ciIsInJlZHVjZSIsImFjYyIsImsiLCJOQVRJVkVfU0VUX1RJTUVPVVQiLCJzZXRUaW1lb3V0IiwiTkFUSVZFX0NMRUFSX1RJTUVPVVQiLCJjbGVhclRpbWVvdXQiLCJpbnN0YWxsVGltZXJGdW5jdGlvbnMiLCJvcHRzIiwidXNlTmF0aXZlVGltZXJzIiwic2V0VGltZW91dEZuIiwiYmluZCIsImNsZWFyVGltZW91dEZuIiwiVHJhbnNwb3J0RXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwicmVhc29uIiwiZGVzY3JpcHRpb24iLCJjb250ZXh0Iiwic3VwZXIiLCJUcmFuc3BvcnQiLCJ3cml0YWJsZSIsInF1ZXJ5IiwicmVhZHlTdGF0ZSIsInNvY2tldCIsIm9uRXJyb3IiLCJvcGVuIiwiZG9PcGVuIiwiY2xvc2UiLCJkb0Nsb3NlIiwib25DbG9zZSIsInNlbmQiLCJwYWNrZXRzIiwid3JpdGUiLCJvbk9wZW4iLCJvbkRhdGEiLCJwYWNrZXQiLCJvblBhY2tldCIsImRldGFpbHMiLCJhbHBoYWJldCIsIm1hcCIsInByZXYiLCJzZWVkIiwibnVtIiwiZW5jb2RlZCIsIk1hdGgiLCJmbG9vciIsInllYXN0Iiwibm93IiwiRGF0ZSIsInN0ciIsImVuY29kZVVSSUNvbXBvbmVudCIsIlhNTEh0dHBSZXF1ZXN0IiwiZXJyIiwiaGFzQ09SUyIsIlhIUiIsInhkb21haW4iLCJlIiwiY29uY2F0Iiwiam9pbiIsImVtcHR5IiwiaGFzWEhSMiIsInJlc3BvbnNlVHlwZSIsIlJlcXVlc3QiLCJ1cmkiLCJtZXRob2QiLCJhc3luYyIsInVuZGVmaW5lZCIsInhkIiwieHNjaGVtZSIsInhzIiwieGhyIiwiZXh0cmFIZWFkZXJzIiwic2V0RGlzYWJsZUhlYWRlckNoZWNrIiwic2V0UmVxdWVzdEhlYWRlciIsIndpdGhDcmVkZW50aWFscyIsInJlcXVlc3RUaW1lb3V0IiwidGltZW91dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInN0YXR1cyIsIm9uTG9hZCIsImRvY3VtZW50IiwiaW5kZXgiLCJyZXF1ZXN0c0NvdW50IiwicmVxdWVzdHMiLCJjbGVhbnVwIiwiZnJvbUVycm9yIiwiYWJvcnQiLCJyZXNwb25zZVRleHQiLCJ1bmxvYWRIYW5kbGVyIiwiYXR0YWNoRXZlbnQiLCJuZXh0VGljayIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIldlYlNvY2tldCIsImlzUmVhY3ROYXRpdmUiLCJuYXZpZ2F0b3IiLCJwcm9kdWN0IiwidG9Mb3dlckNhc2UiLCJ0cmFuc3BvcnRzIiwid2Vic29ja2V0IiwiZm9yY2VCYXNlNjQiLCJuYW1lIiwiY2hlY2siLCJwcm90b2NvbHMiLCJoZWFkZXJzIiwid3MiLCJhZGRFdmVudExpc3RlbmVycyIsIm9ub3BlbiIsImF1dG9VbnJlZiIsIl9zb2NrZXQiLCJ1bnJlZiIsIm9uY2xvc2UiLCJjbG9zZUV2ZW50Iiwib25tZXNzYWdlIiwiZXYiLCJvbmVycm9yIiwibGFzdFBhY2tldCIsInNjaGVtYSIsInNlY3VyZSIsInBvcnQiLCJOdW1iZXIiLCJ0aW1lc3RhbXBSZXF1ZXN0cyIsInRpbWVzdGFtcFBhcmFtIiwiYjY0IiwiZW5jb2RlZFF1ZXJ5IiwiaG9zdG5hbWUiLCJpbmRleE9mIiwicGF0aCIsInBvbGxpbmciLCJsb2NhdGlvbiIsImlzU1NMIiwicHJvdG9jb2wiLCJwb2xsIiwicGF1c2UiLCJvblBhdXNlIiwidG90YWwiLCJkb1BvbGwiLCJlbmNvZGVkUGF5bG9hZCIsImVuY29kZWRQYWNrZXRzIiwiZGVjb2RlZFBhY2tldCIsImRlY29kZVBheWxvYWQiLCJjb3VudCIsImVuY29kZVBheWxvYWQiLCJkb1dyaXRlIiwic2lkIiwicmVxdWVzdCIsImFzc2lnbiIsInJlcSIsInhoclN0YXR1cyIsInBvbGxYaHIiLCJyZSIsInBhcnRzIiwicGFyc2UiLCJzcmMiLCJiIiwicmVwbGFjZSIsIm0iLCJleGVjIiwic291cmNlIiwiaG9zdCIsImF1dGhvcml0eSIsImlwdjZ1cmkiLCJwYXRoTmFtZXMiLCJuYW1lcyIsInN1YnN0ciIsInF1ZXJ5S2V5IiwiJDAiLCIkMSIsIiQyIiwiU29ja2V0Iiwid3JpdGVCdWZmZXIiLCJwcmV2QnVmZmVyTGVuIiwiYWdlbnQiLCJ1cGdyYWRlIiwicmVtZW1iZXJVcGdyYWRlIiwicmVqZWN0VW5hdXRob3JpemVkIiwicGVyTWVzc2FnZURlZmxhdGUiLCJ0aHJlc2hvbGQiLCJ0cmFuc3BvcnRPcHRpb25zIiwiY2xvc2VPbkJlZm9yZXVubG9hZCIsInFzIiwicXJ5IiwicGFpcnMiLCJsIiwicGFpciIsImRlY29kZVVSSUNvbXBvbmVudCIsImlkIiwidXBncmFkZXMiLCJwaW5nSW50ZXJ2YWwiLCJwaW5nVGltZW91dCIsInBpbmdUaW1lb3V0VGltZXIiLCJ0cmFuc3BvcnQiLCJvZmZsaW5lRXZlbnRMaXN0ZW5lciIsImNyZWF0ZVRyYW5zcG9ydCIsIkVJTyIsInByaW9yV2Vic29ja2V0U3VjY2VzcyIsInNoaWZ0Iiwic2V0VHJhbnNwb3J0Iiwib25EcmFpbiIsInByb2JlIiwiZmFpbGVkIiwib25UcmFuc3BvcnRPcGVuIiwibXNnIiwidXBncmFkaW5nIiwiZmx1c2giLCJmcmVlemVUcmFuc3BvcnQiLCJlcnJvciIsIm9uVHJhbnNwb3J0Q2xvc2UiLCJvbnVwZ3JhZGUiLCJ0byIsIm9uSGFuZHNoYWtlIiwiSlNPTiIsInJlc2V0UGluZ1RpbWVvdXQiLCJzZW5kUGFja2V0IiwiY29kZSIsImZpbHRlclVwZ3JhZGVzIiwibWF4UGF5bG9hZCIsImdldFdyaXRhYmxlUGFja2V0cyIsInBheWxvYWRTaXplIiwiYyIsInV0ZjhMZW5ndGgiLCJjZWlsIiwiYnl0ZUxlbmd0aCIsInNpemUiLCJvcHRpb25zIiwiY29tcHJlc3MiLCJjbGVhbnVwQW5kQ2xvc2UiLCJ3YWl0Rm9yVXBncmFkZSIsImZpbHRlcmVkVXBncmFkZXMiLCJqIiwid2l0aE5hdGl2ZUZpbGUiLCJGaWxlIiwiaXNCaW5hcnkiLCJoYXNCaW5hcnkiLCJ0b0pTT04iLCJpc0FycmF5IiwiZGVjb25zdHJ1Y3RQYWNrZXQiLCJidWZmZXJzIiwicGFja2V0RGF0YSIsInBhY2siLCJfZGVjb25zdHJ1Y3RQYWNrZXQiLCJhdHRhY2htZW50cyIsInBsYWNlaG9sZGVyIiwiX3BsYWNlaG9sZGVyIiwibmV3RGF0YSIsInJlY29uc3RydWN0UGFja2V0IiwiX3JlY29uc3RydWN0UGFja2V0IiwiUGFja2V0VHlwZSIsIkVuY29kZXIiLCJyZXBsYWNlciIsImVuY29kZSIsIkVWRU5UIiwiQUNLIiwiZW5jb2RlQXNTdHJpbmciLCJCSU5BUllfRVZFTlQiLCJCSU5BUllfQUNLIiwiZW5jb2RlQXNCaW5hcnkiLCJuc3AiLCJzdHJpbmdpZnkiLCJkZWNvbnN0cnVjdGlvbiIsInVuc2hpZnQiLCJEZWNvZGVyIiwicmV2aXZlciIsImFkZCIsImRlY29kZVN0cmluZyIsInJlY29uc3RydWN0b3IiLCJCaW5hcnlSZWNvbnN0cnVjdG9yIiwidGFrZUJpbmFyeURhdGEiLCJzdGFydCIsImJ1ZiIsIm5leHQiLCJwYXlsb2FkIiwidHJ5UGFyc2UiLCJpc1BheWxvYWRWYWxpZCIsInN0YXRpYyIsIkNPTk5FQ1QiLCJESVNDT05ORUNUIiwiQ09OTkVDVF9FUlJPUiIsImRlc3Ryb3kiLCJmaW5pc2hlZFJlY29uc3RydWN0aW9uIiwicmVjb25QYWNrIiwiYmluRGF0YSIsIlJFU0VSVkVEX0VWRU5UUyIsImZyZWV6ZSIsImNvbm5lY3QiLCJjb25uZWN0X2Vycm9yIiwiZGlzY29ubmVjdCIsImRpc2Nvbm5lY3RpbmciLCJuZXdMaXN0ZW5lciIsImlvIiwiY29ubmVjdGVkIiwicmVjZWl2ZUJ1ZmZlciIsInNlbmRCdWZmZXIiLCJpZHMiLCJhY2tzIiwiZmxhZ3MiLCJhdXRoIiwiX2F1dG9Db25uZWN0IiwiZGlzY29ubmVjdGVkIiwic3ViRXZlbnRzIiwic3VicyIsIm9ucGFja2V0IiwiYWN0aXZlIiwiX3JlYWR5U3RhdGUiLCJhY2siLCJwb3AiLCJfcmVnaXN0ZXJBY2tDYWxsYmFjayIsImlzVHJhbnNwb3J0V3JpdGFibGUiLCJlbmdpbmUiLCJ2b2xhdGlsZSIsIm5vdGlmeU91dGdvaW5nTGlzdGVuZXJzIiwidGltZXIiLCJfcGFja2V0Iiwib25jb25uZWN0Iiwib25ldmVudCIsIm9uYWNrIiwib25kaXNjb25uZWN0IiwibWVzc2FnZSIsImVtaXRFdmVudCIsIl9hbnlMaXN0ZW5lcnMiLCJsaXN0ZW5lciIsInNlbnQiLCJlbWl0QnVmZmVyZWQiLCJzdWJEZXN0cm95Iiwib25BbnkiLCJwcmVwZW5kQW55Iiwib2ZmQW55IiwibGlzdGVuZXJzQW55Iiwib25BbnlPdXRnb2luZyIsIl9hbnlPdXRnb2luZ0xpc3RlbmVycyIsInByZXBlbmRBbnlPdXRnb2luZyIsIm9mZkFueU91dGdvaW5nIiwibGlzdGVuZXJzQW55T3V0Z29pbmciLCJCYWNrb2ZmIiwibXMiLCJtaW4iLCJtYXgiLCJmYWN0b3IiLCJqaXR0ZXIiLCJhdHRlbXB0cyIsImR1cmF0aW9uIiwicG93IiwicmFuZCIsInJhbmRvbSIsImRldmlhdGlvbiIsInJlc2V0Iiwic2V0TWluIiwic2V0TWF4Iiwic2V0Sml0dGVyIiwiTWFuYWdlciIsIl9hIiwibnNwcyIsInJlY29ubmVjdGlvbiIsInJlY29ubmVjdGlvbkF0dGVtcHRzIiwiSW5maW5pdHkiLCJyZWNvbm5lY3Rpb25EZWxheSIsInJlY29ubmVjdGlvbkRlbGF5TWF4IiwicmFuZG9taXphdGlvbkZhY3RvciIsImJhY2tvZmYiLCJfcGFyc2VyIiwicGFyc2VyIiwiZW5jb2RlciIsImRlY29kZXIiLCJhdXRvQ29ubmVjdCIsInYiLCJfcmVjb25uZWN0aW9uIiwiX3JlY29ubmVjdGlvbkF0dGVtcHRzIiwiX3JlY29ubmVjdGlvbkRlbGF5IiwiX3JhbmRvbWl6YXRpb25GYWN0b3IiLCJfcmVjb25uZWN0aW9uRGVsYXlNYXgiLCJfdGltZW91dCIsIm1heWJlUmVjb25uZWN0T25PcGVuIiwiX3JlY29ubmVjdGluZyIsInJlY29ubmVjdCIsInNraXBSZWNvbm5lY3QiLCJvcGVuU3ViRGVzdHJveSIsImVycm9yU3ViIiwib25waW5nIiwib25kYXRhIiwib25kZWNvZGVkIiwiX2Rlc3Ryb3kiLCJfY2xvc2UiLCJkZWxheSIsIm9ucmVjb25uZWN0IiwiYXR0ZW1wdCIsImNhY2hlIiwicGFyc2VkIiwibG9jIiwidGVzdCIsImhyZWYiLCJ1cmwiLCJzYW1lTmFtZXNwYWNlIiwiZm9yY2VOZXciLCJtdWx0aXBsZXgiLCJodG1sQ3JlYXRlIiwiYXR0cmlidXRlcyIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwidGVtcElkIiwiaXRlbXMiLCJ0aWQiLCJzb21lIiwiaXRlbSIsImdldEF0dHJpYnV0ZSIsIk1lc3NhZ2UiLCJfaWQiLCJjcmVhdGVkQXQiLCJtc2dUb0hUTUwiLCJvd24iLCJkYXRlIiwiY2xhc3MiLCJpbm5lclRleHQiLCJ0b1RpbWVTdHJpbmciLCJtc2dEYXRlIiwibXNnQm9keSIsInByZXBlbmQiLCJhcHBlbmQiLCJzZWxlY3QiLCJvcHRpb24iLCJ0b1VwcGVyQ2FzZSIsImNyZWF0ZVNlbGVjdCIsIkhUTUxUb0RPTSIsImh0bWwiLCJ0YXJnZXQiLCJ1bCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0TXNnc0FzeW5jIiwic2tpcCIsImxpbWl0Iiwicm91dGUiLCJmZXRjaCIsImQiLCJqc29uIiwicXVlcnlTZWxlY3RvciIsIm1lc3NhZ2VzIiwiY2hpbGRyZW4iLCJpbnB1dCIsInByZXZNc2dzIiwiZ2V0TGFzdE1zZ3NBc3luYyIsImNsaWNrIiwicGFyc2VJbnQiLCJvbnN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwidG9TYXZlIiwibGkiLCJzY3JvbGxUbyIsInNjcm9sbEhlaWdodCIsIm9uY2hhbmdlIiwicGFyZW50RWxlbWVudCIsImVtIiwidG9SZW1vdmUiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlQXR0cmlidXRlIiwibWFpbiIsImNhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==